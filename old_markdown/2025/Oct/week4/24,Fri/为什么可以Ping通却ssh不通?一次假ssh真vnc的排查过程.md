# **ä¸ºä»€ä¹ˆèƒ½ Ping é€šå´ SSH ä¸é€šï¼Ÿä¸€æ¬¡â€œå‡ SSH çœŸ VNCâ€ çš„æ’æŸ¥è¿‡ç¨‹**

> **å‰¯æ ‡é¢˜ï¼š** ä»è¿æ¥è¢«æ‹’åˆ°åè®®è¯†åˆ«ï¼Œå¸¦ä½ å½»åº•ç†è§£ TCPã€SSH ä¸ VNC çš„åŒºåˆ«
> **é˜…è¯»æ—¶é•¿ï¼š** 7 åˆ†é’Ÿ
> **æ ‡ç­¾ï¼š** ç½‘ç»œæ’æŸ¥ã€SSHã€VNCã€Linuxã€è¿œç¨‹è¿æ¥
> **SEO å…³é”®è¯ï¼š** SSHè¿æ¥å¤±è´¥ã€kex_exchange_identificationã€VNCç«¯å£5905ã€RFB 003.008ã€SSH vs VNC

---

## ğŸ¯ ç›®æ ‡è¯»è€…

* Linux ä½¿ç”¨è€…ã€å¼€å‘è€…ã€æœåŠ¡å™¨ç»´æŠ¤äººå‘˜
* æƒ³å­¦ä¹ ç½‘ç»œæ’é”™æ€è·¯çš„ä¸­çº§å·¥ç¨‹å¸ˆ
* å¯¹ SSH/VNC åè®®æœºåˆ¶æœ‰å…´è¶£çš„è¯»è€…

---

## ğŸ’¡ èƒŒæ™¯ä¸åŠ¨æœº

ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼š

> â€œæœåŠ¡å™¨èƒ½ ping é€šï¼Œä½† SSH è¿ä¸ä¸Šï¼Ÿâ€

è¿™ç±»é—®é¢˜å¾ˆå¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨å¤šæœåŠ¡ï¼ˆSSHã€VNCã€HTTPï¼‰æ··è·‘çš„è¿œç¨‹ä¸»æœºä¸Šã€‚
æœ¬æ–‡é€šè¿‡ä¸€æ¬¡çœŸå®æ¡ˆä¾‹ï¼Œå±•ç¤ºä»â€œSSH è¿æ¥å¤±è´¥â€åˆ°â€œå‘ç°ç«¯å£è·‘çš„æ˜¯ VNCâ€çš„å®Œæ•´åˆ†æè¿‡ç¨‹ã€‚

---

## ğŸ” é—®é¢˜ç°è±¡

æ‰§è¡Œå‘½ä»¤ï¼š

```bash
ssh chenhm@101.6.142.82 -p 5905
```

è¾“å‡ºï¼š

```
kex_exchange_identification: Connection closed by remote host
Connection closed by 101.6.142.82 port 5905
```

å°è¯• `ping`ï¼š

```bash
ping 101.6.142.82
```

èƒ½é€šï¼Œæ²¡æœ‰ä¸¢åŒ…ã€‚

äºæ˜¯æˆ‘ä»¬çŸ¥é“ï¼š

* ä¸»æœºåœ¨çº¿ï¼›
* ç½‘ç»œè¿é€šï¼›
* ä½† SSH æ¡æ‰‹é˜¶æ®µå¤±è´¥ã€‚

---

## ğŸ§  æ ¸å¿ƒæ¦‚å¿µè§£æ

| æ¦‚å¿µ            | è§£é‡Š                             |
| ------------- | ------------------------------ |
| **Ping**      | ä½¿ç”¨ ICMP åè®®ï¼Œåªæµ‹è¯•ç½‘ç»œè¿é€šæ€§ã€‚           |
| **TCP**       | ä¼ è¾“å±‚åè®®ï¼Œè´Ÿè´£å»ºç«‹è¿æ¥ï¼ˆå¦‚ä¸‰æ¬¡æ¡æ‰‹ï¼‰ã€‚           |
| **SSH**       | åº”ç”¨å±‚åè®®ï¼ŒåŸºäº TCP æä¾›åŠ å¯†è¿œç¨‹ç™»å½•ã€‚         |
| **VNC / RFB** | å›¾å½¢è¿œç¨‹æ¡Œé¢åè®®ï¼ˆRemote Frame Bufferï¼‰ã€‚ |

æ¢å¥è¯è¯´ï¼š**Ping é€š â‰  SSH é€š**ï¼Œå› ä¸ºå®ƒä»¬è¿è¡Œåœ¨ä¸åŒåè®®å±‚ã€‚

---

## âš™ï¸ å®è·µæ’æŸ¥æ­¥éª¤

### Step 1. æµ‹è¯• TCP æ˜¯å¦è¿é€š

```bash
telnet 101.6.142.82 5905
```

è¾“å‡ºï¼š

```
Trying 101.6.142.82...
Connected to 101.6.142.82.
Escape character is '^]'.
RFB 003.008
```

ğŸš¨ **å…³é”®çº¿ç´¢**ï¼š
`RFB 003.008` æ˜¯ **VNC åè®®çš„æ¡æ‰‹å­—ç¬¦ä¸²**ï¼ˆRemote Frame Buffer version 3.8ï¼‰ã€‚

è¿™è¯´æ˜ï¼š

* 5905 ç«¯å£ç¡®å®å¼€æ”¾ï¼›
* ä½†è¿è¡Œçš„æ˜¯ **VNC æœåŠ¡**ï¼Œè€Œä¸æ˜¯ SSHã€‚

---

## ğŸ§© åŸç†è§£é‡Š

SSH å®¢æˆ·ç«¯åœ¨ TCP å±‚è¿ä¸Šåï¼Œä¼šå‘å‡ºåŠ å¯†æ¡æ‰‹è¯·æ±‚ï¼ˆ`SSH-2.0-OpenSSH_8.x`ï¼‰ã€‚
è€Œ VNC æœåŠ¡å™¨åœ¨ç›¸åŒé˜¶æ®µè¿”å› `RFB 003.008`ã€‚
åè®®ä¸åŒ¹é… â†’ SSH å®¢æˆ·ç«¯ç›´æ¥å…³é—­è¿æ¥ã€‚

è¿™æ­£æ˜¯ `kex_exchange_identification` é”™è¯¯çš„æœ¬è´¨åŸå› ã€‚

---

## ğŸ§° éªŒè¯ä¸ç¡®è®¤

1ï¸âƒ£ **æŸ¥çœ‹ç«¯å£æœåŠ¡**

```bash
sudo ss -tlnp | grep 5905
```

å¯èƒ½è¾“å‡ºï¼š

```
LISTEN  0  5  0.0.0.0:5905  ...  /usr/bin/Xvnc
```

è¯´æ˜è¯¥ç«¯å£å±äº VNC æœåŠ¡ã€‚

2ï¸âƒ£ **æŸ¥çœ‹ SSH ç›‘å¬ç«¯å£**

```bash
sudo grep ^Port /etc/ssh/sshd_config
```

å¦‚æœè¿”å› `Port 22`ï¼Œé‚£ SSH ä»åœ¨é»˜è®¤ç«¯å£ã€‚

---

## ğŸ§­ æ­£ç¡®çš„è¿æ¥æ–¹å¼

### âœ… è‹¥ä½ æƒ³è¿æ¥å›¾å½¢ç•Œé¢

ä½¿ç”¨ VNC å®¢æˆ·ç«¯ï¼š

```bash
vncviewer 101.6.142.82:5905
```

æˆ–ä½¿ç”¨å·¥å…·ï¼š

* RealVNC
* TigerVNC
* TightVNC

### âœ… è‹¥ä½ æƒ³è¿æ¥ç»ˆç«¯

ä½¿ç”¨ SSHï¼ˆé»˜è®¤ç«¯å£ï¼‰ï¼š

```bash
ssh chenhm@101.6.142.82 -p 22
```

---

## ğŸ› ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹

| é—®é¢˜                                 | å¯èƒ½åŸå›            | è§£å†³æ–¹å¼                                           |
| ---------------------------------- | -------------- | ---------------------------------------------- |
| `Connection closed by remote host` | åè®®ä¸åŒ¹é…ï¼ˆSSHâ†’VNCï¼‰ | ä½¿ç”¨æ­£ç¡®åè®®è¿æ¥                                       |
| SSH æ— æ³•è¿æ¥ä»»ä½•ç«¯å£                       | SSH æœåŠ¡æœªå¯åŠ¨      | `sudo systemctl start sshd`                    |
| VNC è¿æ¥æ‹’ç»                           | é˜²ç«å¢™æœªæ”¾è¡Œç«¯å£       | `firewall-cmd --add-port=5905/tcp --permanent` |
| SSH è¢«æ–­å¼€                            | fail2ban å°ç¦    | æ£€æŸ¥ `/var/log/auth.log`                         |

---

## ğŸ§© æœ€ä½³å®è·µä¸å»ºè®®

* **åŒºåˆ†ç«¯å£ä¸åè®®**ï¼šä»…å‡­ç«¯å£å·ä¸èƒ½åˆ¤æ–­æœåŠ¡ç±»å‹ã€‚
* **ä½¿ç”¨ `telnet` / `nc` æ¢æµ‹åè®®æ ‡è¯†**ï¼Œæ˜¯å¿«é€Ÿåˆ¤æ–­æœåŠ¡ç±»å‹çš„æŠ€å·§ã€‚
* **å…»æˆæŸ¥çœ‹æ—¥å¿—çš„ä¹ æƒ¯**ï¼š`journalctl -u ssh`ã€`/var/log/auth.log`ã€‚
* **ä¸ºå¤šæœåŠ¡ä¸»æœºè®¾ç½®æ¸…æ™°ç«¯å£è§„åˆ’**ï¼Œä¾‹å¦‚ï¼š

  ```
  SSH â†’ 22
  VNC â†’ 5900+
  HTTP â†’ 80/8080
  HTTPS â†’ 443
  ```

---

## ğŸ§¾ å°ç»“

æœ¬æ–‡é€šè¿‡ä¸€ä¸ªâ€œèƒ½ ping é€šä½† ssh ä¸é€šâ€çš„æ¡ˆä¾‹ï¼Œå±•ç¤ºäº†ï¼š

1. å¦‚ä½•åŒºåˆ†ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ä¸åº”ç”¨å±‚é—®é¢˜ï¼›
2. å¦‚ä½•è¯†åˆ«åè®®ï¼ˆRFB vs SSHï¼‰ï¼›
3. å¦‚ä½•å¿«é€Ÿå®šä½çœŸæ­£è¿è¡Œçš„æœåŠ¡ã€‚

> ä¸€å¥è¯æ€»ç»“ï¼š
> **ä¸æ˜¯ SSH åäº†ï¼Œè€Œæ˜¯ä½ è¿é”™äº†æœåŠ¡ã€‚**

---

## ğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯»

* [OpenSSH å®˜æ–¹æ–‡æ¡£](https://www.openssh.com/manual.html)
* [TigerVNC GitHub](https://github.com/TigerVNC/tigervnc)
* [Linux man pages: ssh, telnet, ss, netstat]
* [RFC 6143: The Remote Framebuffer Protocol (RFB)](https://datatracker.ietf.org/doc/html/rfc6143)

---

## ğŸš€ è¡ŒåŠ¨å·å¬

ğŸ‘‰ **è¯•è¯•çœ‹ï¼**
åœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼š

```bash
nc <server_ip> <port>
```

çœ‹çœ‹å®ƒè¿”å›ä»€ä¹ˆåè®®å¤´ï¼Œä¹Ÿè®¸ä½ ä¼šå‘ç°æ›´å¤šâ€œéšè—æœåŠ¡â€ã€‚

ğŸ’¬ **æœ‰è¶£çš„ç½‘ç»œæ’æŸ¥æ¡ˆä¾‹ï¼Ÿ** æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ•…äº‹æˆ–é—®é¢˜ã€‚
