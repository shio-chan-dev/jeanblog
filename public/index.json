[{"content":"å‘¨æŠ¥ å‘¨æœŸ week1\nä¸»è¦äº§å‡ºå’Œé“¾æ¥ é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ ä¸‹å‘¨è®¡åˆ’å’Œä¼˜å…ˆçº§ éœ€è¦åè°ƒçš„äº‹é¡¹/å†³ç­–è¯·æ±‚ æ—¥æŠ¥ æ—¥æœŸ é¡¹ç›®/ä»»åŠ¡: å½“å‰è¿›åº¦/çŠ¶æ€ ç”¨æ—¶ é˜»å¡/éœ€è¦æ”¯æŒ: æ˜æ—¥è®¡åˆ’ æ—¥æŠ¥ æ—¥æœŸ 2025-11-02 10:54:11\né¡¹ç›®/ä»»åŠ¡: å½“å‰è¿›åº¦/çŠ¶æ€ ç”¨æ—¶ é˜»å¡/éœ€è¦æ”¯æŒ: æ˜æ—¥è®¡åˆ’ ","permalink":"http://localhost:1313/jeanblog/posts/week_log/","summary":"\u003ch1 id=\"å‘¨æŠ¥\"\u003eå‘¨æŠ¥\u003c/h1\u003e\n\u003ch2 id=\"å‘¨æœŸ\"\u003eå‘¨æœŸ\u003c/h2\u003e\n\u003cp\u003eweek1\u003c/p\u003e\n\u003ch2 id=\"ä¸»è¦äº§å‡ºå’Œé“¾æ¥\"\u003eä¸»è¦äº§å‡ºå’Œé“¾æ¥\u003c/h2\u003e\n\u003ch2 id=\"é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\"\u003eé‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\u003c/h2\u003e\n\u003ch2 id=\"ä¸‹å‘¨è®¡åˆ’å’Œä¼˜å…ˆçº§\"\u003eä¸‹å‘¨è®¡åˆ’å’Œä¼˜å…ˆçº§\u003c/h2\u003e\n\u003ch2 id=\"éœ€è¦åè°ƒçš„äº‹é¡¹å†³ç­–è¯·æ±‚\"\u003eéœ€è¦åè°ƒçš„äº‹é¡¹/å†³ç­–è¯·æ±‚\u003c/h2\u003e\n\u003ch1 id=\"æ—¥æŠ¥\"\u003eæ—¥æŠ¥\u003c/h1\u003e\n\u003ch2 id=\"æ—¥æœŸ\"\u003eæ—¥æœŸ\u003c/h2\u003e\n\u003ch2 id=\"é¡¹ç›®ä»»åŠ¡\"\u003eé¡¹ç›®/ä»»åŠ¡:\u003c/h2\u003e\n\u003ch2 id=\"å½“å‰è¿›åº¦çŠ¶æ€\"\u003eå½“å‰è¿›åº¦/çŠ¶æ€\u003c/h2\u003e\n\u003ch2 id=\"ç”¨æ—¶\"\u003eç”¨æ—¶\u003c/h2\u003e\n\u003ch2 id=\"é˜»å¡éœ€è¦æ”¯æŒ\"\u003eé˜»å¡/éœ€è¦æ”¯æŒ:\u003c/h2\u003e\n\u003ch2 id=\"æ˜æ—¥è®¡åˆ’\"\u003eæ˜æ—¥è®¡åˆ’\u003c/h2\u003e\n\u003ch1 id=\"æ—¥æŠ¥-1\"\u003eæ—¥æŠ¥\u003c/h1\u003e\n\u003ch2 id=\"æ—¥æœŸ-1\"\u003eæ—¥æœŸ\u003c/h2\u003e\n\u003cp\u003e2025-11-02 10:54:11\u003c/p\u003e\n\u003ch2 id=\"é¡¹ç›®ä»»åŠ¡-1\"\u003eé¡¹ç›®/ä»»åŠ¡:\u003c/h2\u003e\n\u003ch2 id=\"å½“å‰è¿›åº¦çŠ¶æ€-1\"\u003eå½“å‰è¿›åº¦/çŠ¶æ€\u003c/h2\u003e\n\u003ch2 id=\"ç”¨æ—¶-1\"\u003eç”¨æ—¶\u003c/h2\u003e\n\u003ch2 id=\"é˜»å¡éœ€è¦æ”¯æŒ-1\"\u003eé˜»å¡/éœ€è¦æ”¯æŒ:\u003c/h2\u003e\n\u003ch2 id=\"æ˜æ—¥è®¡åˆ’-1\"\u003eæ˜æ—¥è®¡åˆ’\u003c/h2\u003e","title":"week log"},{"content":"æ ‡é¢˜\nç”¨ä¸€æ®µä¼˜é›…çš„ Python ä»£ç ï¼ŒæŠŠ SQLAlchemy æ¨¡å‹å®‰å…¨ã€é«˜æ•ˆåœ°åºåˆ—åŒ–æˆå­—å…¸\nå‰¯æ ‡é¢˜ / æ‘˜è¦\nSQLAlchemy æ¨¡å‹è½¬å­—å…¸ï¼ˆdictï¼‰çœ‹ä¼¼ç®€å•ï¼Œå´æš—è—å­—æ®µæ ¼å¼ã€å…³ç³»é€’å½’ã€å¾ªç¯å¼•ç”¨ç­‰å‘ã€‚æœ¬æ–‡é€šè¿‡ä¸€æ®µå®æˆ˜ä»£ç ï¼Œå¸¦ä½ å®ç°ä¸€ä¸ªå¯å¤ç”¨çš„ _to_dict åºåˆ—åŒ–å·¥å…·ï¼Œå¹¶åˆ†æå…¶è®¾è®¡å–èˆä¸æ”¹è¿›æ–¹å‘ï¼Œé€‚åˆæ­£åœ¨ç”¨ SQLAlchemy å†™åç«¯æ¥å£çš„ä½ ã€‚\nç›®æ ‡è¯»è€…\nè¿™ç¯‡æ–‡ç« é€‚åˆä»¥ä¸‹è¯»è€…ï¼š\nä½¿ç”¨ SQLAlchemy åš ORM çš„åç«¯å¼€å‘è€… æƒ³æŠŠ ORM æ¨¡å‹è½¬æ¢ä¸º JSON/dict çš„ Python å·¥ç¨‹å¸ˆ å¯¹ æ¨¡å‹åºåˆ—åŒ–è§„èŒƒåŒ– æœ‰éœ€æ±‚çš„ä¸­çº§å¼€å‘è€… ä½¿ç”¨ Flask/FastAPI/Django + SQLAlchemy çš„åŒå­¦ ä¸€ã€èƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆè¦è‡ªå·±å†™ _to_dictï¼Ÿ åœ¨ Web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å‡ ä¹æ¯å¤©éƒ½è¦åšä¸€ä»¶äº‹ï¼š\næŠŠæ•°æ®åº“é‡Œçš„ ORM å¯¹è±¡ï¼Œè½¬æˆå¯ä»¥ JSON å“åº”ç»™å‰ç«¯çš„æ•°æ®ç»“æ„ï¼ˆé€šå¸¸æ˜¯ dict / listï¼‰ã€‚\nä¹ä¸€çœ‹å¥½åƒåªæ˜¯ obj.__dict__ æˆ–ç”¨ä¸ª asdict å°±å®Œäº‹ï¼Œä½†ç°å®ä¸­çš„é—®é¢˜åŒ…æ‹¬ï¼š\næ—¥æœŸæ—¶é—´å­—æ®µæ— æ³•ç›´æ¥ JSON åŒ–ï¼š datetime / date å¯¹è±¡ä¸èƒ½ç›´æ¥ JSON åºåˆ—åŒ–ï¼Œå¿…é¡»æ ¼å¼åŒ–æˆå­—ç¬¦ä¸²ã€‚\nå…³ç³»å­—æ®µæ€ä¹ˆå¤„ç†ï¼Ÿ\nä¸€å¯¹å¤š / å¤šå¯¹å¤šï¼ˆuselist=Trueï¼‰ ä¸€å¯¹ä¸€ / å¤šå¯¹ä¸€ï¼ˆuselist=Falseï¼‰ é¿å…é€’å½’çˆ†ç‚¸ï¼š ä¸¤ä¸ªæ¨¡å‹äº’ç›¸å…³è”ï¼Œå¾ˆå®¹æ˜“åºåˆ—åŒ–æ—¶é™·å…¥æ— é™é€’å½’ã€‚\nç»Ÿä¸€è¾“å‡ºæ ¼å¼ï¼š ä¸åŒæ¨¡å‹ã€ä¸åŒæ¥å£å¦‚æœå„å†™å„çš„ to_dictï¼Œç»´æŠ¤æˆæœ¬æé«˜ã€‚\näºæ˜¯ï¼Œå°±æœ‰äº†è¿™æ®µé€šç”¨åºåˆ—åŒ–ä»£ç ï¼š\ndef _serialize_row(self, obj): return self._to_dict(obj) if obj else None def _to_dict(self, obj, include_relationships=True, backref_depth=1): mapper = inspect(obj.__class__) data = {} # å­—æ®µ for column in mapper.columns: val = getattr(obj, column.key) if isinstance(val, (date, datetime)): val = val.strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;) data[column.key] = val # å…³ç³» if include_relationships and backref_depth \u0026gt; 0: for name, rel in mapper.relationships.items(): value = getattr(obj, name) if value is None: data[name] = None elif rel.uselist: data[name] = [ self._to_dict( item, include_relationships=False, backref_depth=backref_depth-1 ) for item in value ] else: data[name] = self._to_dict( value, include_relationships=False, backref_depth=backref_depth-1 ) return data äºŒã€æ ¸å¿ƒæ¦‚å¿µè§£é‡Š åœ¨æ·±å…¥ä»£ç å‰ï¼Œå…ˆæŠŠå‡ ä¸ªå…³é”®æ¦‚å¿µè®²æ¸…æ¥šï¼š\n1. SQLAlchemy çš„ mapper mapper = inspect(obj.__class__) inspect() æ˜¯ SQLAlchemy çš„ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œç”¨æ¥è·å–æ¨¡å‹ç±»çš„ æ˜ å°„ä¿¡æ¯ã€‚ mapper.columnsï¼šæ¨¡å‹æ˜ å°„åˆ°è¡¨çš„å…¨éƒ¨å­—æ®µï¼ˆColumnï¼‰ã€‚ mapper.relationshipsï¼šæ¨¡å‹å®šä¹‰çš„æ‰€æœ‰å…³ç³»ï¼ˆrelationship(...)ï¼‰ã€‚ 2. uselistï¼šå…³ç³»æ˜¯å•ä¸ªå¯¹è±¡è¿˜æ˜¯åˆ—è¡¨ rel.uselist == Trueï¼šå…³ç³»æ˜¯ å¤šæ¡è®°å½•ï¼ˆä¸€å¯¹å¤š / å¤šå¯¹å¤šï¼‰ï¼Œæ¯”å¦‚ User.postsã€‚ rel.uselist == Falseï¼šå…³ç³»æ˜¯ å•ä¸ªå¯¹è±¡ï¼ˆä¸€å¯¹ä¸€ / å¤šå¯¹ä¸€ï¼‰ï¼Œæ¯”å¦‚ Post.authorã€‚ æˆ‘ä»¬éœ€è¦æ ¹æ®è¿™ä¸ªå±æ€§å†³å®šæ˜¯è¿”å›ï¼š\nlist[dict]ï¼Œè¿˜æ˜¯ dict æˆ– Noneã€‚ 3. å¾ªç¯å¼•ç”¨ \u0026amp; backref_depth å¦‚æœ A æ¨¡å‹å¼•ç”¨ Bï¼ŒB åˆå¼•ç”¨å› Aï¼š\nA â†’ B â†’ A â†’ B â€¦â€¦ éå¸¸å®¹æ˜“é€’å½’åˆ°æ ˆæº¢å‡ºã€‚ æ‰€ä»¥è¿™é‡Œè®¾è®¡äº†ä¸€ä¸ªå‚æ•°ï¼š\nbackref_depthï¼šæ§åˆ¶åå‘å¼•ç”¨çš„é€’å½’æ·±åº¦ï¼Œé»˜è®¤æ˜¯ 1 æ¯æ·±å…¥ä¸€å±‚é€’å½’ï¼Œbackref_depth-1ï¼Œç›´åˆ° 0 æ—¶ä¸å†ç»§ç»­å…³ç³»åºåˆ—åŒ–ã€‚ 4. include_relationships include_relationships=Trueï¼šåºåˆ—åŒ–æ—¶ï¼ŒæŠŠå…³è”å¯¹è±¡ä¹Ÿä¸€èµ·å±•å¼€ã€‚ Falseï¼šåªåºåˆ—åŒ–å½“å‰è¡¨çš„å­—æ®µï¼Œä¸ç®¡å…³ç³»ã€‚ è¿™ä¸ªå¼€å…³å¯ä»¥åœ¨ä¸åŒåœºæ™¯ä¸‹çµæ´»æ§åˆ¶ï¼š\nåˆ—è¡¨æ¥å£ï¼šå¾€å¾€åªè¦å­—æ®µå³å¯ï¼ˆå‡å°‘ä½“ç§¯ï¼‰ã€‚ è¯¦æƒ…æ¥å£ï¼šå¯èƒ½éœ€è¦å…³è”ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ· + åœ°å€ï¼‰ã€‚ ä¸‰ã€å®è·µæŒ‡å—ï¼šä¸€æ­¥æ­¥å®ç°å¯å¤ç”¨çš„åºåˆ—åŒ–å·¥å…· ä½ å¯ä»¥æŠŠè¿™ä¸¤ä¸ªæ–¹æ³•æ”¾åˆ°ä¸€ä¸ª BaseMixin / å·¥å…·ç±»é‡Œï¼Œæ¯”å¦‚ï¼š\nfrom datetime import date, datetime from sqlalchemy import inspect class ModelSerializerMixin: def _serialize_row(self, obj): return self._to_dict(obj) if obj else None def _to_dict(self, obj, include_relationships=True, backref_depth=1): mapper = inspect(obj.__class__) data = {} # 1. å¤„ç†æ™®é€šå­—æ®µ for column in mapper.columns: val = getattr(obj, column.key) if isinstance(val, (date, datetime)): val = val.strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;) data[column.key] = val # 2. å¤„ç†å…³ç³»å­—æ®µ if include_relationships and backref_depth \u0026gt; 0: for name, rel in mapper.relationships.items(): value = getattr(obj, name) if value is None: data[name] = None elif rel.uselist: data[name] = [ self._to_dict( item, include_relationships=False, backref_depth=backref_depth - 1 ) for item in value ] else: data[name] = self._to_dict( value, include_relationships=False, backref_depth=backref_depth - 1 ) return data ç„¶åä½ çš„æ¨¡å‹å¯ä»¥è¿™æ ·ç”¨ï¼š\nclass User(Base, ModelSerializerMixin): __tablename__ = \u0026#34;users\u0026#34; # id, name, created_at ç­‰å­—æ®µ... # posts = relationship(\u0026#34;Post\u0026#34;, back_populates=\u0026#34;author\u0026#34;) å››ã€å¯è¿è¡Œç¤ºä¾‹ï¼šä»æ¨¡å‹åˆ° JSON å“åº” ä¸‹é¢ç»™ä¸€ä¸ªå®Œæ•´ã€å¯ç†è§£çš„ç¤ºä¾‹ï¼ˆç•¥åšç®€åŒ–ï¼‰ï¼š\nfrom datetime import datetime, date from sqlalchemy import Column, Integer, String, DateTime, ForeignKey, create_engine from sqlalchemy.orm import declarative_base, relationship, sessionmaker from sqlalchemy import inspect Base = declarative_base() class ModelSerializerMixin: def _serialize_row(self, obj): return self._to_dict(obj) if obj else None def _to_dict(self, obj, include_relationships=True, backref_depth=1): mapper = inspect(obj.__class__) data = {} # å­—æ®µ for column in mapper.columns: val = getattr(obj, column.key) if isinstance(val, (date, datetime)): val = val.strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;) data[column.key] = val # å…³ç³» if include_relationships and backref_depth \u0026gt; 0: for name, rel in mapper.relationships.items(): value = getattr(obj, name) if value is None: data[name] = None elif rel.uselist: data[name] = [ self._to_dict(item, include_relationships=False, backref_depth=backref_depth-1) for item in value ] else: data[name] = self._to_dict( value, include_relationships=False, backref_depth=backref_depth-1 ) return data class User(Base, ModelSerializerMixin): __tablename__ = \u0026#34;users\u0026#34; id = Column(Integer, primary_key=True) name = Column(String(50)) created_at = Column(DateTime, default=datetime.utcnow) posts = relationship(\u0026#34;Post\u0026#34;, back_populates=\u0026#34;author\u0026#34;) class Post(Base, ModelSerializerMixin): __tablename__ = \u0026#34;posts\u0026#34; id = Column(Integer, primary_key=True) title = Column(String(100)) created_at = Column(DateTime, default=datetime.utcnow) user_id = Column(Integer, ForeignKey(\u0026#34;users.id\u0026#34;)) author = relationship(\u0026#34;User\u0026#34;, back_populates=\u0026#34;posts\u0026#34;) # --- æ¼”ç¤º --- engine = create_engine(\u0026#34;sqlite:///:memory:\u0026#34;, echo=False) Base.metadata.create_all(engine) SessionLocal = sessionmaker(bind=engine) session = SessionLocal() user = User(name=\u0026#34;Alice\u0026#34;) post1 = Post(title=\u0026#34;Hello SQLAlchemy\u0026#34;, author=user) post2 = Post(title=\u0026#34;Serialization Tricks\u0026#34;, author=user) session.add_all([user, post1, post2]) session.commit() # ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ u = session.query(User).first() # è½¬æˆ dict user_dict = u._to_dict(include_relationships=True) print(user_dict) ç¤ºä¾‹è¾“å‡ºç±»ä¼¼ï¼š\n{ \u0026#39;id\u0026#39;: 1, \u0026#39;name\u0026#39;: \u0026#39;Alice\u0026#39;, \u0026#39;created_at\u0026#39;: \u0026#39;2025-11-11 10:00:00\u0026#39;, \u0026#39;posts\u0026#39;: [ { \u0026#39;id\u0026#39;: 1, \u0026#39;title\u0026#39;: \u0026#39;Hello SQLAlchemy\u0026#39;, \u0026#39;created_at\u0026#39;: \u0026#39;2025-11-11 10:00:00\u0026#39;, \u0026#39;user_id\u0026#39;: 1 }, { \u0026#39;id\u0026#39;: 2, \u0026#39;title\u0026#39;: \u0026#39;Serialization Tricks\u0026#39;, \u0026#39;created_at\u0026#39;: \u0026#39;2025-11-11 10:01:00\u0026#39;, \u0026#39;user_id\u0026#39;: 1 } ] } æ­¤æ—¶ä½ å°±å¯ä»¥ç›´æ¥ json.dumps(user_dict) è¿”å›ç»™å‰ç«¯äº†ã€‚\näº”ã€è§£é‡Šä¸åŸç†ï¼šä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™ï¼Ÿ 1. æ‰‹åŠ¨éå† mapper.columns è€Œä¸æ˜¯ç”¨ obj.__dict__ï¼š\n__dict__ ä¼šå¸¦å‡º SQLAlchemy çš„å†…éƒ¨å±æ€§ï¼ˆ_sa_instance_state ç­‰ï¼‰ mapper.columns åªåŒ…å«çœŸæ­£çš„è¡¨å­—æ®µï¼Œå¹²å‡€ä¸”å¯æ§ã€‚ 2. ç»Ÿä¸€æ—¥æœŸæ—¶é—´æ ¼å¼ if isinstance(val, (date, datetime)): val = val.strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;) å¥½å¤„ï¼š\nç»Ÿä¸€æ ¼å¼ï¼Œå‰åç«¯çº¦å®šæ¸…æ™° JSON å‹å¥½ï¼Œä¸ä¼šå‡ºç° â€œObject of type datetime is not JSON serializableâ€ å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ”¹æˆ ISO æ ¼å¼ï¼š\nval.isoformat() åªè¦å…¨å±€ç»Ÿä¸€å³å¯ã€‚\n3. å…³ç³»å¤„ç†çš„ç­–ç•¥ä¸å–èˆ è¿™é‡Œçš„ç­–ç•¥æ˜¯ï¼šå½“å‰å¯¹è±¡å¯ä»¥å±•å¼€å…³ç³»å¯¹è±¡ï¼Œä½†å…³ç³»å¯¹è±¡çš„å†…éƒ¨ä¸å†å±•å¼€å…³ç³»ï¼ˆinclude_relationships=Falseï¼‰ã€‚ é…åˆ backref_depthï¼Œæ—¢é¿å…äº†è¿‡åº¦é€’å½’ï¼Œåˆèƒ½é€‚åº¦å±•å¼€ã€‚ ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ›´ä¸¥æ ¼ï¼š\næŸäº›æ¥å£å®Œå…¨ç¦ç”¨å…³ç³»åºåˆ—åŒ–ã€‚ æŸäº›æ•æ„Ÿå…³ç³»ï¼ˆæ¯”å¦‚å¯†ç ã€tokenï¼‰ä¸è¿”å›ã€‚ 4. æ›¿ä»£æ–¹æ¡ˆ ä½¿ç”¨ SQLAlchemy çš„å®˜æ–¹å·¥å…·æˆ–ç¬¬ä¸‰æ–¹åº“ï¼š\nsqlalchemy-utilsã€marshmallow-sqlalchemyã€pydantic ç­‰è¿›è¡Œåºåˆ—åŒ–ã€‚ ä½¿ç”¨ ORM æ¨¡å‹ â†’ Pydantic æ¨¡å‹ çš„æ–¹å¼è¿›è¡ŒéªŒè¯å’Œè¾“å‡ºã€‚\næœ¬æ–‡è¿™ç§å®ç°å±äºï¼š\nç®€æ´ã€æ— é¢å¤–ä¾èµ–ã€ç«‹åˆ»èƒ½ç”¨çš„â€œå°è€Œç¾â€æ–¹æ¡ˆã€‚\nå…­ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ 1. æ€§èƒ½é—®é¢˜ å¦‚æœä¸€æ¬¡æ€§åºåˆ—åŒ–å¤§é‡å¯¹è±¡ + å±•å¼€å…³ç³»ï¼Œä¼šå¸¦æ¥é¢å¤–çš„ SQL æŸ¥è¯¢ï¼ˆN+1 é—®é¢˜ï¼‰ã€‚\nå»ºè®®ï¼š\næŸ¥è¯¢æ—¶ä½¿ç”¨ joinedload / selectinload è¿›è¡Œé¢„åŠ è½½ã€‚ å¯¹åˆ—è¡¨æ¥å£å‡å°‘å…³ç³»å±•å¼€ï¼Œæˆ–è€…åˆ†é¡µè¿”å›ã€‚ 2. å¾ªç¯å¼•ç”¨ä»ç„¶å¯èƒ½å‡ºç° æ­¤å®ç°é€šè¿‡ï¼š\ninclude_relationships=False backref_depth æ¥é™ä½é£é™©ï¼Œä½†å¦‚æœä½ åœ¨åˆ«çš„åœ°æ–¹åˆæ‰‹åŠ¨é€’å½’ï¼Œä»æœ‰å¯èƒ½è¸©å‘ã€‚å¤æ‚åœºæ™¯å»ºè®®å¼•å…¥æ›´å¥å£®çš„æ–¹æ¡ˆï¼ˆä¾‹å¦‚ Pydantic æ¨¡å‹ï¼‰ã€‚\n3. å®‰å…¨é—®é¢˜ï¼ˆå­—æ®µæ³„éœ²ï¼‰ mapper.columns ä¼šæŠŠæ‰€æœ‰è¡¨å­—æ®µéƒ½åºåˆ—åŒ–å‡ºæ¥ï¼š\nåŒ…æ‹¬å¯†ç å“ˆå¸Œã€tokenã€å†…éƒ¨çŠ¶æ€ç­‰æ•æ„Ÿå­—æ®µã€‚ è§£å†³åŠæ³•ï¼š\nåœ¨ _to_dict ä¸­åŠ å…¥ä¸€ä¸ªç™½åå•/é»‘åå•æœºåˆ¶ï¼š\ninclude_fields / exclude_fields æˆ–è€…åœ¨æ¨¡å‹ä¸Šå®šä¹‰å¯å¯¼å‡ºçš„å­—æ®µåˆ—è¡¨ã€‚\nä¸ƒã€æœ€ä½³å®è·µä¸å»ºè®® ç»Ÿä¸€å°è£…åœ¨ Mixin æˆ– BaseModel ä¸­ æ‰€æœ‰æ¨¡å‹ç»§æ‰¿åŒä¸€ä¸ªåºåˆ—åŒ–èƒ½åŠ›ï¼Œé¿å…åˆ°å¤„å†™é‡å¤ to_dict()ã€‚\næ¥å£æŒ‰éœ€è°ƒæ•´ include_relationships / backref_depth\nåˆ—è¡¨æ¥å£ï¼šinclude_relationships=False è¯¦æƒ…æ¥å£ï¼šinclude_relationships=Trueï¼Œbackref_depth=1 å¯¹æ—¥æœŸå­—æ®µç»Ÿä¸€è§„èŒƒ åˆ¶å®šå›¢é˜Ÿç»Ÿä¸€çš„æ—¥æœŸæ—¶é—´æ ¼å¼ï¼Œå¸¸è§é€‰é¡¹ï¼š\n\u0026quot;YYYY-MM-DD HH:MM:SS\u0026quot; \u0026quot;YYYY-MM-DDTHH:MM:SS\u0026quot;ï¼ˆISO é£æ ¼ï¼‰ å¯¹æ•æ„Ÿå­—æ®µåšè¿‡æ»¤ ç›´æ¥åœ¨ _to_dict é‡Œå®ç° exclude é€»è¾‘ï¼Œé¿å…è¯¯æ³„éœ²ã€‚\nå°½é‡åœ¨æŸ¥è¯¢å±‚è§£å†³ N+1 é—®é¢˜ é€šè¿‡ joinedload / selectinloadï¼Œä¸è¦è®©åºåˆ—åŒ–å‡½æ•°èƒŒé”…ã€‚\nå…«ã€å°ç»“ / ç»“è®º æœ¬æ–‡ä»ä¸€æ®µç®€çŸ­çš„ _to_dict åºåˆ—åŒ–ä»£ç å‡ºå‘ï¼Œè®²äº†ï¼š\nä¸ºä»€ä¹ˆ ORM æ¨¡å‹åºåˆ—åŒ–æ²¡ä½ æƒ³çš„é‚£ä¹ˆç®€å• inspect(mapper)ã€columnsã€relationships çš„ç”¨æ³• å¦‚ä½•å¤„ç†æ—¥æœŸã€å…³ç³»å­—æ®µã€å¾ªç¯å¼•ç”¨ æ€§èƒ½ã€å®‰å…¨ç­‰å¸¸è§å‘ä¸æ”¹å–„æ–¹å‘ è¿™æ®µä»£ç çš„å®šä½æ˜¯ï¼š\nâ€œè½»é‡ã€æ— ä¾èµ–ã€å¯å¿«é€Ÿé›†æˆåˆ°ç°æœ‰é¡¹ç›®â€çš„é€šç”¨ SQLAlchemy åºåˆ—åŒ–å·¥å…·ã€‚\nä½ å¯ä»¥å…ˆç›´æ¥æ‹·è´åˆ°é¡¹ç›®é‡Œç”¨èµ·æ¥ï¼Œç„¶åæ ¹æ®è‡ªå·±å›¢é˜Ÿçš„è§„èŒƒï¼ˆå­—æ®µè¿‡æ»¤ã€æ ¼å¼è¦æ±‚ã€æ€§èƒ½ä¼˜åŒ–ï¼‰é€æ­¥æ¼”è¿›ã€‚\nä¹ã€å‚è€ƒä¸å»¶ä¼¸é˜…è¯» ä½ å¯ä»¥æ£€ç´¢ï¼ˆæˆ–åœ¨é¡¹ç›®ä¸­æŸ¥é˜…ï¼‰ï¼š\nSQLAlchemy å®˜æ–¹æ–‡æ¡£ï¼š\nORM Mapped Class Configuration inspect() ä½¿ç”¨è¯´æ˜ ç¬¬ä¸‰æ–¹åºåˆ—åŒ–/éªŒè¯å·¥å…·ï¼š\nMarshmallow \u0026amp; marshmallow-sqlalchemy Pydanticï¼ˆå°¤å…¶æ˜¯å’Œ SQLAlchemy é›†æˆçš„ç¤ºä¾‹ï¼‰ åã€å…ƒä¿¡æ¯ï¼ˆMeta ä¿¡æ¯ï¼‰ é¢„è®¡é˜…è¯»æ—¶é—´ï¼š8â€“12 åˆ†é’Ÿ\næ ‡ç­¾ï¼šPythonã€SQLAlchemyã€åºåˆ—åŒ–ã€åç«¯å¼€å‘ã€JSON\nSEO å…³é”®è¯ï¼š\nSQLAlchemy æ¨¡å‹è½¬å­—å…¸ Python ORM åºåˆ—åŒ– SQLAlchemy to_dict å®ç° SQLAlchemy JSON å“åº” å…ƒæè¿°ï¼ˆMeta Descriptionï¼‰ï¼š â€œæœ¬æ–‡æ•™ä½ ç”¨ä¸€å°æ®µ Python ä»£ç ä¼˜é›…åœ°å°† SQLAlchemy æ¨¡å‹åºåˆ—åŒ–ä¸ºå­—å…¸ï¼Œæ”¯æŒæ—¥æœŸæ ¼å¼åŒ–ã€å…³ç³»å­—æ®µå±•å¼€ä¸å¾ªç¯å¼•ç”¨æ§åˆ¶ï¼Œå¹¶ç»™å‡ºå¯è¿è¡Œç¤ºä¾‹ä¸æœ€ä½³å®è·µï¼Œé€‚åˆä½¿ç”¨ SQLAlchemy åšåç«¯å¼€å‘çš„å·¥ç¨‹å¸ˆã€‚â€\nåä¸€ã€è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ å¦‚æœä½ å·²ç»çœ‹åˆ°è¿™é‡Œï¼Œå¯ä»¥è¯•ç€åšå‡ ä»¶äº‹ï¼š\nå…ˆæŠŠæ–‡ä¸­çš„ Mixin ç›´æ¥æ”¾è¿›ä½ çš„é¡¹ç›®è¯•ä¸€è¯•ï¼š çœ‹çœ‹ä½ çš„ Userã€Post ç­‰æ¨¡å‹è½¬å‡ºæ¥çš„ dict æ˜¯ä»€ä¹ˆæ ·å­ã€‚ æ ¹æ®è‡ªå·±ä¸šåŠ¡åŠ ä¸Šå­—æ®µè¿‡æ»¤ / æ—¥æœŸæ ¼å¼é…ç½®ï¼š æ¯”å¦‚åŠ ä¸ª exclude_fields æˆ–å…¨å±€æ—¶é—´æ ¼å¼ã€‚ å¦‚æœä½ æ„¿æ„ç»§ç»­è¿­ä»£è¿™æ®µä»£ç ï¼š ","permalink":"http://localhost:1313/jeanblog/posts/%E7%94%A8%E4%B8%80%E6%AE%B5%E4%BC%98%E9%9B%85%E7%9A%84python%E4%BB%A3%E7%A0%81%E6%8A%8Asqlalchemy%E6%A8%A1%E5%9E%8B%E9%AB%98%E6%95%88%E8%BD%AC%E4%B8%BA%E5%AD%97%E5%85%B8/","summary":"\u003cp\u003e\u003cstrong\u003eæ ‡é¢˜\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eç”¨ä¸€æ®µä¼˜é›…çš„ Python ä»£ç ï¼ŒæŠŠ SQLAlchemy æ¨¡å‹å®‰å…¨ã€é«˜æ•ˆåœ°åºåˆ—åŒ–æˆå­—å…¸\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eSQLAlchemy æ¨¡å‹è½¬å­—å…¸ï¼ˆdictï¼‰çœ‹ä¼¼ç®€å•ï¼Œå´æš—è—å­—æ®µæ ¼å¼ã€å…³ç³»é€’å½’ã€å¾ªç¯å¼•ç”¨ç­‰å‘ã€‚æœ¬æ–‡é€šè¿‡ä¸€æ®µå®æˆ˜ä»£ç ï¼Œå¸¦ä½ å®ç°ä¸€ä¸ªå¯å¤ç”¨çš„ \u003ccode\u003e_to_dict\u003c/code\u003e åºåˆ—åŒ–å·¥å…·ï¼Œå¹¶åˆ†æå…¶è®¾è®¡å–èˆä¸æ”¹è¿›æ–¹å‘ï¼Œé€‚åˆæ­£åœ¨ç”¨ SQLAlchemy å†™åç«¯æ¥å£çš„ä½ ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eç›®æ ‡è¯»è€…\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eè¿™ç¯‡æ–‡ç« é€‚åˆä»¥ä¸‹è¯»è€…ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨ \u003cstrong\u003eSQLAlchemy\u003c/strong\u003e åš ORM çš„åç«¯å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eæƒ³æŠŠ \u003cstrong\u003eORM æ¨¡å‹è½¬æ¢ä¸º JSON/dict\u003c/strong\u003e çš„ Python å·¥ç¨‹å¸ˆ\u003c/li\u003e\n\u003cli\u003eå¯¹ \u003cstrong\u003eæ¨¡å‹åºåˆ—åŒ–è§„èŒƒåŒ–\u003c/strong\u003e æœ‰éœ€æ±‚çš„ä¸­çº§å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ Flask/FastAPI/Django + SQLAlchemy çš„åŒå­¦\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¸€èƒŒæ™¯--åŠ¨æœºä¸ºä»€ä¹ˆè¦è‡ªå·±å†™-_to_dict\"\u003eä¸€ã€èƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆè¦è‡ªå·±å†™ \u003ccode\u003e_to_dict\u003c/code\u003eï¼Ÿ\u003c/h2\u003e\n\u003cp\u003eåœ¨ Web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å‡ ä¹æ¯å¤©éƒ½è¦åšä¸€ä»¶äº‹ï¼š\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæŠŠæ•°æ®åº“é‡Œçš„ ORM å¯¹è±¡ï¼Œè½¬æˆå¯ä»¥ JSON å“åº”ç»™å‰ç«¯çš„æ•°æ®ç»“æ„ï¼ˆé€šå¸¸æ˜¯ dict / listï¼‰ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eä¹ä¸€çœ‹å¥½åƒåªæ˜¯ \u003ccode\u003eobj.__dict__\u003c/code\u003e æˆ–ç”¨ä¸ª \u003ccode\u003easdict\u003c/code\u003e å°±å®Œäº‹ï¼Œä½†ç°å®ä¸­çš„é—®é¢˜åŒ…æ‹¬ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ—¥æœŸæ—¶é—´å­—æ®µæ— æ³•ç›´æ¥ JSON åŒ–\u003c/strong\u003eï¼š\n\u003ccode\u003edatetime\u003c/code\u003e / \u003ccode\u003edate\u003c/code\u003e å¯¹è±¡ä¸èƒ½ç›´æ¥ JSON åºåˆ—åŒ–ï¼Œå¿…é¡»æ ¼å¼åŒ–æˆå­—ç¬¦ä¸²ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eå…³ç³»å­—æ®µæ€ä¹ˆå¤„ç†ï¼Ÿ\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä¸€å¯¹å¤š / å¤šå¯¹å¤šï¼ˆ\u003ccode\u003euselist=True\u003c/code\u003eï¼‰\u003c/li\u003e\n\u003cli\u003eä¸€å¯¹ä¸€ / å¤šå¯¹ä¸€ï¼ˆ\u003ccode\u003euselist=False\u003c/code\u003eï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eé¿å…é€’å½’çˆ†ç‚¸\u003c/strong\u003eï¼š\nä¸¤ä¸ªæ¨¡å‹äº’ç›¸å…³è”ï¼Œå¾ˆå®¹æ˜“åºåˆ—åŒ–æ—¶é™·å…¥æ— é™é€’å½’ã€‚\u003c/p\u003e","title":"ç”¨ä¸€æ®µä¼˜é›…çš„pythonä»£ç ï¼ŒæŠŠsqlalchemyæ¨¡å‹é«˜æ•ˆè½¬ä¸ºå­—å…¸"},{"content":"æ ‡é¢˜ï¼ˆå¸å¼•ä¸”å‡†ç¡®ï¼ŒåŒ…å«å…³é”®è¯ï¼‰ ç”¨ Issue æ¨¡æ¿æŠŠéœ€æ±‚å†™æ¸…æ¥šï¼šä» 0 é…ç½® GitHub Issue Template çš„å®Œæ•´æŒ‡å—\nå‰¯æ ‡é¢˜ / æ‘˜è¦ è¿™ç¯‡æ–‡ç« æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ GitHub ä»“åº“ä¸­é…ç½®ã€Œæ–°éœ€æ±‚ / Featureã€ä¸ã€ŒBugã€Issue æ¨¡æ¿ï¼ŒåŒ…æ‹¬ç›®å½•ç»“æ„ã€YAML è¡¨å•ã€Markdown æ¨¡æ¿ä»¥åŠå¸¸è§å‘ã€‚é€‚åˆæƒ³è®©å›¢é˜Ÿéœ€æ±‚æ²Ÿé€šæ›´è§„èŒƒã€å‡å°‘åå¤è¿½é—®çš„å¼€å‘è€…å’Œå›¢é˜Ÿè´Ÿè´£äººã€‚\nç›®æ ‡è¯»è€… è¿™ç¯‡æ–‡ç« é€‚åˆï¼š\nç»å¸¸åœ¨ GitHub ä»“åº“é‡Œå¼€ Issueã€æéœ€æ±‚çš„ åç«¯ / å‰ç«¯ / å…¨æ ˆå·¥ç¨‹å¸ˆ æƒ³æŠŠå›¢é˜Ÿéœ€æ±‚æäº¤æµç¨‹ã€Œæ ‡å‡†åŒ–ã€çš„ é¡¹ç›®è´Ÿè´£äºº / TL / æ¶æ„å¸ˆ å¯¹ GitHub å·²ç»æœ‰åŸºæœ¬ä½¿ç”¨ç»éªŒã€ä½†è¿˜æ²¡ç”¨è¿‡ Issue æ¨¡æ¿çš„ ä¸­çº§å¼€å‘è€… å®Œå…¨æ–°æ‰‹ä¹Ÿèƒ½çœ‹æ‡‚ï¼Œä½†ä¼šé»˜è®¤ä½ çŸ¥é“ï¼šä»€ä¹ˆæ˜¯ä»“åº“ã€ä»€ä¹ˆæ˜¯ Issueã€å¦‚ä½•æäº¤ä»£ç ç­‰ã€‚\nèƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆè¦æŠ˜è…¾ Issue æ¨¡æ¿ï¼Ÿ æ²¡æœ‰ Issue æ¨¡æ¿æ—¶ï¼Œæ—¥å¸¸å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š\nâ€œè¿™ä¸ªéœ€æ±‚èƒŒæ™¯æ˜¯ä»€ä¹ˆï¼Ÿâ€ â€œå½±å“å“ªäº›æ¨¡å—ï¼Ÿâ€ â€œéªŒæ”¶æ ‡å‡†æ€ä¹ˆç®—é€šè¿‡ï¼Ÿâ€ â€œä¼˜å…ˆçº§åˆ°åº•å¤šé«˜ï¼Ÿâ€ ä¸€å¥è¯ Issueï¼š\nâ€œåšä¸ªå¯¼å‡ºåŠŸèƒ½â€ ç›´æ¥æŠŠæ‰€æœ‰äººæ•´ç ´é˜²ã€‚\né•¿æœŸä¸‹æ¥ä¼šæœ‰å‡ ä¸ªç—›ç‚¹ï¼š\næ²Ÿé€šæˆæœ¬é«˜ï¼šæ¯ä¸ªéœ€æ±‚éƒ½è¦åå¤è¿½é—®ç»†èŠ‚ï¼› ä¿¡æ¯ä¸å¯¹ç§°ï¼šè¯·æ±‚äººè„‘å­é‡Œå¾ˆæ¸…æ¥šï¼Œä½†å†™åœ¨ Issue é‡Œçš„åªæœ‰ä¸€å¥è¯ï¼› éš¾ä»¥æ’æœŸï¼šæ²¡æœ‰æ˜ç¡®ä¼˜å…ˆçº§å’ŒéªŒæ”¶æ ‡å‡†ï¼Œå¤§å®¶éƒ½è§‰å¾—è‡ªå·±çš„éœ€æ±‚æ˜¯ P0ï¼› å†å²éš¾è¿½è¸ªï¼šå‡ ä¸ªæœˆåå†çœ‹è¿™ä¸ª Issueï¼Œå®Œå…¨ä¸çŸ¥é“å½“æ—¶æ€ä¹ˆæƒ³çš„ã€‚ è€Œ GitHub æä¾›çš„ Issue Templateï¼Œå…¶å®å°±æ˜¯ä¸€å¥—ã€Œç»“æ„åŒ–æé—®ã€å·¥å…·ï¼š\næ–°å»º Issue æ—¶å¼ºåˆ¶/å¼•å¯¼ç”¨æˆ·æŒ‰æ¨¡æ¿å¡«å†™ï¼› è‡ªåŠ¨å¸¦ä¸Šæ ‡ç­¾ã€æ ‡é¢˜å‰ç¼€ï¼› å¯ä»¥ç”¨è¡¨å•å½¢å¼æ ¡éªŒå¿…å¡«é¡¹ã€‚ ç›®æ ‡å¾ˆç®€å•ï¼šè®©æ¯ä¸€ä¸ªæ–°éœ€æ±‚ä¸€çœ¼å°±èƒ½çœ‹æ‡‚ï¼Œå‡å°‘æ²Ÿé€šæŠ˜è…¾ã€‚\næ ¸å¿ƒæ¦‚å¿µï¼šæˆ‘ä»¬è¦ææ‡‚çš„å‡ ä¸ªå…³é”®è¯ åœ¨é…ç½®ä¹‹å‰ï¼Œå…ˆæŠŠå‡ ä¸ªæ¦‚å¿µè¯´æ¸…æ¥šï¼š\n1. Issue Templateï¼ˆIssue æ¨¡æ¿ï¼‰ æ–°å»º Issue æ—¶å‡ºç°çš„â€œé¢„è®¾æ ¼å¼â€ å¯ä»¥æ˜¯çº¯æ–‡æœ¬ï¼ˆMarkdownï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ Web è¡¨å•ï¼ˆYAMLï¼‰ 2. Markdown æ¨¡æ¿ æ—§å¼ / ç®€å•ç‰ˆ æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé¢„å¡«çš„ Markdown æ–‡æœ¬ æ–‡ä»¶æ”¾åœ¨ï¼š.github/ISSUE_TEMPLATE/xxx.md æˆ– .github/ISSUE_TEMPLATE.md 3. YAML Issue è¡¨å•ï¼ˆè¡¨å•æ¨¡æ¿ï¼‰ æ–°å¼ / æ¨è æ–°å»º Issue æ—¶ä¼šå‡ºç°å¸¦è¾“å…¥æ¡†ã€ä¸‹æ‹‰æ¡†çš„è¡¨å• æäº¤åä¼šæŠŠä½ çš„å¡«å†™å†…å®¹è½¬æˆ Markdown å¡«è¿› Issue æ­£æ–‡ æ–‡ä»¶æ”¾åœ¨ï¼š.github/ISSUE_TEMPLATE/xxx.yml 4. config.yml æ”¾åœ¨ï¼š.github/ISSUE_TEMPLATE/config.yml\næ§åˆ¶ï¼š\næ˜¯å¦å…è®¸â€œæ²¡æœ‰æ¨¡æ¿çš„ç©ºç™½ Issueâ€ æ¨¡æ¿åˆ—è¡¨çš„æ˜¾ç¤ºï¼ˆéƒ¨åˆ†åœºæ™¯ï¼‰ å®è·µæŒ‡å— / æ­¥éª¤æ¦‚è§ˆ æˆ‘ä»¬æŒ‰ä¸‹é¢è¿™ä¸ªé¡ºåºæ¥åšï¼š\nåˆ›å»º .github/ISSUE_TEMPLATE ç›®å½• æ–°å»ºã€Œæ–°éœ€æ±‚ / Featureã€æ¨¡æ¿ï¼ˆYAML è¡¨å•ï¼‰ 3.ï¼ˆå¯é€‰ï¼‰æ–°å»ºã€ŒBug åé¦ˆã€æ¨¡æ¿ é…ç½® config.yml æ§åˆ¶æ˜¯å¦å…è®¸ç©ºç™½ Issue æäº¤å¹¶æ¨é€åˆ° GitHub åœ¨ Web ä¸ŠéªŒè¯æ¨¡æ¿æ˜¯å¦ç”Ÿæ•ˆ æ­¥éª¤ä¸€ï¼šåˆ›å»º Issue æ¨¡æ¿ç›®å½• åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š\nmkdir -p .github/ISSUE_TEMPLATE åˆ›å»ºå®Œåï¼Œç›®å½•ç»“æ„å¤§è‡´æ˜¯ï¼š\nyour-repo/ .github/ ISSUE_TEMPLATE/ # ç­‰ä¼šå„¿æˆ‘ä»¬ä¼šå¾€è¿™é‡ŒåŠ  yml / md æ–‡ä»¶ src/ ... æ­¥éª¤äºŒï¼šåˆ›å»ºã€Œæ–°éœ€æ±‚ / Featureã€æ¨¡æ¿ï¼ˆYAML è¡¨å•ï¼‰ åœ¨ .github/ISSUE_TEMPLATE/feature-request.yml ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š\nname: \u0026#34;æ–°éœ€æ±‚ / Feature\u0026#34; description: \u0026#34;ç”¨äºæäº¤æ–°çš„åŠŸèƒ½éœ€æ±‚æˆ–éœ€æ±‚å˜æ›´\u0026#34; title: \u0026#34;[éœ€æ±‚] \u0026#34; labels: - \u0026#34;feature\u0026#34; - \u0026#34;enhancement\u0026#34; body: - type: markdown attributes: value: | æ„Ÿè°¢æäº¤æ–°éœ€æ±‚ ğŸ™ è¯·å°½é‡å¡«å†™æ¸…æ™°ï¼Œæ–¹ä¾¿è¯„ä¼°å’Œæ’æœŸã€‚ - type: input id: module attributes: label: å½±å“æ¨¡å— description: æ¶‰åŠçš„æœåŠ¡/æ¨¡å—ï¼Œä¾‹å¦‚ï¼šåç«¯æ¥å£ã€çˆ¬è™«ã€å‰ç«¯é¡µé¢ç­‰ placeholder: ä¾‹å¦‚ï¼šecp çˆ¬è™« / é™„ä»¶æµè§ˆæ¥å£ validations: required: true - type: textarea id: background attributes: label: èƒŒæ™¯ / åœºæ™¯ description: ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªéœ€æ±‚ï¼Ÿå½“å‰é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿæœ‰æ²¡æœ‰ç°æœ‰æ›¿ä»£æ–¹æ¡ˆï¼Ÿ placeholder: | ç®€è¦æè¿°ä¸šåŠ¡èƒŒæ™¯ã€è§’è‰²ã€ä½¿ç”¨åœºæ™¯ã€ç—›ç‚¹ç­‰â€¦ validations: required: true - type: textarea id: description attributes: label: éœ€æ±‚æè¿° description: å¸Œæœ›ç³»ç»Ÿå…·ä½“æ€ä¹ˆå˜åŒ–ï¼Ÿæœ€å¥½ä»â€œç”¨æˆ·è§†è§’â€æ¥æè¿°ã€‚ placeholder: | 1. åœ¨ xxx é¡µé¢å¢åŠ  ... 2. å½“ç”¨æˆ·æ‰§è¡Œ ... æ—¶ï¼Œç³»ç»Ÿåº” ... 3. éœ€è¦æ”¯æŒçš„è¾¹ç•Œåœºæ™¯ï¼š... validations: required: true - type: textarea id: acceptance_criteria attributes: label: éªŒæ”¶æ ‡å‡† description: å“ªäº›æƒ…å†µç®—æ˜¯â€œæ»¡è¶³éœ€æ±‚â€ï¼Ÿæ–¹ä¾¿åç»­è‡ªæµ‹å’ŒéªŒæ”¶ã€‚ placeholder: | - [ ] åœºæ™¯ä¸€ï¼š... - [ ] åœºæ™¯äºŒï¼š... - [ ] æ€§èƒ½ / å®‰å…¨æ€§è¦æ±‚ï¼š... validations: required: true - type: dropdown id: priority attributes: label: ä¼˜å…ˆçº§ description: æ–¹ä¾¿æ’æœŸæ’åº options: - P0ï¼ˆå¿…é¡»æœ¬è¿­ä»£å®Œæˆï¼‰ - P1ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰ - P2ï¼ˆä¸€èˆ¬ï¼‰ - P3ï¼ˆä½ï¼‰ default: 2 validations: required: false - type: textarea id: extra attributes: label: å…¶ä»–ä¿¡æ¯ description: ç›¸å…³æ¥å£ã€æ–‡æ¡£é“¾æ¥ã€è®¾è®¡ç¨¿ã€æˆªå›¾ã€å…³è” Issue ç­‰ placeholder: | - æ¥å£æ–‡æ¡£ï¼š - è®¾è®¡ç¨¿ / åŸå‹ï¼š - ç›¸å…³ Issue / éœ€æ±‚å•ï¼š validations: required: false æ•ˆæœï¼š\næ–°å»º Issue æ—¶ä¼šæœ‰ä¸€ä¸ªã€Œæ–°éœ€æ±‚ / Featureã€é€‰é¡¹ï¼› ç‚¹è¿›å»æ˜¯è¡¨å•ï¼Œè€Œä¸æ˜¯çº¯æ–‡æœ¬ï¼› labels ä¼šè‡ªåŠ¨æ‰“ä¸Š feature / enhancement æ ‡ç­¾ï¼› æ ‡é¢˜è‡ªåŠ¨å¸¦ [éœ€æ±‚] å‰ç¼€ï¼› background/description/acceptance_criteria ç­‰å­—æ®µæ˜¯å¿…å¡«ã€‚ æ­¥éª¤ä¸‰ï¼ˆå¯é€‰ï¼‰ï¼šåˆ›å»ºã€ŒBug åé¦ˆã€æ¨¡æ¿ åœ¨ .github/ISSUE_TEMPLATE/bug-report.yml å†™å…¥ï¼š\nname: \u0026#34;ç¼ºé™· / Bug\u0026#34; description: \u0026#34;ç”¨äºæäº¤ Bug å’Œå¼‚å¸¸é—®é¢˜\u0026#34; title: \u0026#34;[Bug] \u0026#34; labels: - \u0026#34;bug\u0026#34; body: - type: textarea id: summary attributes: label: é—®é¢˜æ¦‚è¿° placeholder: ç®€è¦æè¿°é—®é¢˜ç°è±¡ validations: required: true - type: textarea id: steps attributes: label: å¤ç°æ­¥éª¤ placeholder: | 1. æ‰“å¼€ ... 2. ç‚¹å‡» ... 3. çœ‹åˆ° ... validations: required: true - type: textarea id: expected attributes: label: é¢„æœŸç»“æœ validations: required: true - type: textarea id: actual attributes: label: å®é™…ç»“æœ validations: required: true - type: textarea id: extra attributes: label: å…¶ä»–ä¿¡æ¯ description: æ—¥å¿—ã€æˆªå›¾ã€ç¯å¢ƒä¿¡æ¯ç­‰ validations: required: false è¿™æ ·ä¸€æ¥ï¼Œå›¢é˜Ÿå°±å¯ä»¥æ¯”è¾ƒæ¸…æ¥šåœ°åŒºåˆ†ã€ŒåŠŸèƒ½éœ€æ±‚ã€å’Œã€ŒBugã€ã€‚\næ­¥éª¤å››ï¼šé…ç½® config.ymlï¼ˆæ§åˆ¶æ¨¡æ¿é€‰æ‹©å’Œç©ºç™½ Issueï¼‰ åœ¨ .github/ISSUE_TEMPLATE/config.yml å†™å…¥ï¼š\nblank_issues_enabled: false # ç¦æ­¢ç›´æ¥æ–°å»ºâ€œç©ºç™½ Issueâ€ï¼Œå¼ºåˆ¶é€‰æ¨¡æ¿ contact_links: - name: å†…éƒ¨éœ€æ±‚ç®¡ç†ç³»ç»Ÿ url: https://example.com/your-internal-system about: å¦‚ä¸ºæ­£å¼ç«‹é¡¹éœ€æ±‚ï¼Œè¯·å…ˆåœ¨å†…éƒ¨ç³»ç»Ÿä¸­åˆ›å»ºï¼Œå†åœ¨æ­¤å…³è”ç¼–å·ã€‚ å¦‚æœä½ è¿˜æ²¡å†…éƒ¨éœ€æ±‚ç³»ç»Ÿï¼Œå¯ä»¥å…ˆæŠŠ contact_links åˆ é™¤æˆ–æ”¹æˆä½ è‡ªå·±çš„ Wiki é“¾æ¥ã€‚\nblank_issues_enabled: false ä¼šè®©æ‰€æœ‰ Issue éƒ½å¿…é¡»èµ°æ¨¡æ¿ï¼Œé¿å…å‡ºç°â€œä»€ä¹ˆéƒ½æ²¡å¡«å°±æ‰”ä¸€ä¸ª Issueâ€çš„æƒ…å†µã€‚\næ­¥éª¤äº”ï¼šæäº¤å¹¶æ¨é€åˆ° GitHub git add .github/ISSUE_TEMPLATE/* git commit -m \u0026#34;chore: add GitHub issue templates for feature \u0026amp; bug\u0026#34; git push æ¨é€åˆ°é»˜è®¤åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ main æˆ– masterï¼‰ä¹‹åï¼Œæ¨¡æ¿å°±ç”Ÿæ•ˆäº†ã€‚\næ­¥éª¤å…­ï¼šåœ¨ GitHub ä¸ŠéªŒè¯æ•ˆæœ æ‰“å¼€ä½ çš„ GitHub ä»“åº“ï¼› ç‚¹å‡»ä¸Šæ–¹çš„ Issuesï¼› ç‚¹å‡» New issueã€‚ æ­¤æ—¶ä¸€èˆ¬ä¼šçœ‹åˆ°ä¸€ä¸ªã€Œé€‰æ‹©æ¨¡æ¿ã€çš„é¡µé¢ï¼Œä¾‹å¦‚ï¼š\næ–°éœ€æ±‚ / Feature ç¼ºé™· / Bug ï¼ˆå¦‚æœå¼€äº†ï¼‰Open a blank issue å¦‚æœä½ é…ç½®äº† blank_issues_enabled: falseï¼Œå°±ä¸ä¼šæœ‰ç©ºç™½ Issue é€‰é¡¹ã€‚\nç‚¹ã€Œæ–°éœ€æ±‚ / Featureã€ï¼Œä½ ä¼šçœ‹è§ä½ åˆšæ‰åœ¨ YAML é‡Œå®šä¹‰çš„è¡¨å•ï¼Œä¸­è‹±æ–‡éƒ½èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚\nå¯è¿è¡Œç¤ºä¾‹ï¼šæœ€å°å¯ç”¨é…ç½®ï¼ˆæ‹·è´å³ç”¨ï¼‰ å¦‚æœä½ åªæƒ³è¦ä¸€å¥—æœ€å°å¯ç”¨çš„ Feature æ¨¡æ¿ï¼Œä¸‹é¢è¿™ä¸¤æ­¥å°±å¤Ÿäº†ï¼š\n1ï¼‰åˆ›å»ºç›®å½•ï¼š\nmkdir -p .github/ISSUE_TEMPLATE 2ï¼‰åˆ›å»º .github/ISSUE_TEMPLATE/feature-request.ymlï¼š\nname: \u0026#34;æ–°éœ€æ±‚ / Feature\u0026#34; description: \u0026#34;ç”¨äºæäº¤æ–°çš„åŠŸèƒ½éœ€æ±‚æˆ–éœ€æ±‚å˜æ›´\u0026#34; title: \u0026#34;[éœ€æ±‚] \u0026#34; labels: [\u0026#34;feature\u0026#34;] body: - type: textarea id: background attributes: label: èƒŒæ™¯ / åœºæ™¯ placeholder: ç®€è¦æè¿°ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªéœ€æ±‚ validations: required: true - type: textarea id: description attributes: label: éœ€æ±‚æè¿° placeholder: | å¸Œæœ›ç³»ç»Ÿåšä»€ä¹ˆï¼Ÿç”¨æˆ·å¦‚ä½•ä½¿ç”¨ï¼Ÿåˆ—å‡ºå…³é”®æµç¨‹ã€‚ validations: required: true - type: textarea id: acceptance attributes: label: éªŒæ”¶æ ‡å‡† placeholder: | - [ ] åœºæ™¯ä¸€ï¼š... - [ ] åœºæ™¯äºŒï¼š... validations: required: true åŠ ä¸Šï¼š\ngit add .github/ISSUE_TEMPLATE/feature-request.yml git commit -m \u0026#34;add minimal feature request issue template\u0026#34; git push å°±èƒ½åœ¨ä»“åº“é‡Œçœ‹åˆ°ä¸€ä¸ªã€Œæ–°éœ€æ±‚ / Featureã€æ¨¡æ¿ã€‚\nè§£é‡Šä¸åŸç†ï¼šä¸ºä»€ä¹ˆè¦ç”¨ YAML è¡¨å•è€Œä¸æ˜¯å•çº¯ Markdownï¼Ÿ YAML è¡¨å•çš„å¥½å¤„ å¿…å¡«æ ¡éªŒï¼šå¯ä»¥å¼ºåˆ¶è¦æ±‚å¡«å†™â€œèƒŒæ™¯â€â€œéœ€æ±‚æè¿°â€â€œéªŒæ”¶æ ‡å‡†â€ç­‰ï¼Œé¿å…ç©ºç©ºå¦‚ä¹Ÿï¼› æ›´å‹å¥½çš„ UIï¼šå¯¹éæŠ€æœ¯åŒäº‹ä¹Ÿç›¸å¯¹å‹å¥½ï¼Œä¸éœ€è¦æ‡‚ Markdownï¼› ç»“æ„æ›´æ¸…æ™°ï¼šæ¯ä¸ªå­—æ®µéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¾¿äºé˜…è¯»å’ŒåæœŸè‡ªåŠ¨åŒ–å¤„ç†ï¼ˆæ¯”å¦‚æœºå™¨äººã€è„šæœ¬ï¼‰ï¼› è‡ªåŠ¨æ‰“æ ‡ç­¾ / æ ‡é¢˜å‰ç¼€ï¼šçœå»åç»­äººå·¥ç»´æŠ¤ã€‚ Markdown æ¨¡æ¿çš„ä¼˜åŠ¿ä¸å±€é™ Markdown æ¨¡æ¿ï¼ˆ.md æ–‡ä»¶ï¼‰ä¹Ÿå¾ˆå¥½ç”¨ï¼Œä½†ï¼š\nå¥½å¤„ï¼š\nç®€å•ã€å…¼å®¹è€ç‰ˆæœ¬ï¼› å¯¹çº¯æŠ€æœ¯å›¢é˜Ÿæ¥è¯´å®Œå…¨å¤Ÿç”¨ã€‚ ç¼ºç‚¹ï¼š\næ— æ³•å¼ºåˆ¶æ ¡éªŒå¿…å¡«é¡¹ï¼ˆå¤§å®¶ç»å¸¸åªæ”¹ä¸€è¡Œæ ‡é¢˜å°±ç‚¹æäº¤ï¼‰ï¼› UI ä¸å¤Ÿç›´è§‚ï¼Œå°¤å…¶å¯¹äº§å“ã€è¿è¥ç­‰éæŠ€æœ¯è§’è‰²ä¸å¤Ÿå‹å¥½ã€‚ æ‰€ä»¥ï¼Œå¦‚æœä½ æ˜¯ç»™ å›¢é˜Ÿå†…éƒ¨ç”¨ã€ä¸”æƒ³æå‡è§„èŒƒï¼ŒYAML è¡¨å•æ›´é€‚åˆã€‚ å¦‚æœåªæ˜¯ä¸ªäººé¡¹ç›®ã€æˆ–è€…å›¢é˜Ÿéå¸¸å°ï¼ŒMarkdown æ¨¡æ¿å·²ç»è¶³å¤Ÿã€‚\nå¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ 1. æ¨¡æ¿æ²¡ç”Ÿæ•ˆæ€ä¹ˆåŠï¼Ÿ æ£€æŸ¥è¿™äº›ç‚¹ï¼š\næ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼š å¿…é¡»æ˜¯ .github/ISSUE_TEMPLATE/xxx.yml æˆ– .github/ISSUE_TEMPLATE/xxx.md åˆ†æ”¯æ˜¯å¦æ­£ç¡®ï¼š æ¨¡æ¿å¿…é¡»åœ¨é»˜è®¤åˆ†æ”¯ï¼ˆmain / masterï¼‰ä¸Šæ‰ä¼šç”Ÿæ•ˆï¼› æ–‡ä»¶åå¤§å°å†™ï¼š GitHub å¯¹å¤§å°å†™æ˜¯æ•æ„Ÿçš„ï¼ŒISSUE_TEMPLATE ç›®å½•åä¸€å®šè¦å¯¹ã€‚ 2. æ”¹äº†æ¨¡æ¿ä½†é¡µé¢æ²¡å˜åŒ–ï¼Ÿ æµè§ˆå™¨å¯èƒ½æœ‰ç¼“å­˜ï¼Œè¯•ç€åˆ·æ–° / æ— ç—•çª—å£æ‰“å¼€ï¼› ç¡®è®¤ä»£ç å·²ç» push åˆ° GitHubï¼› å¦‚æœä½ æ˜¯ Fork ä»“åº“ï¼Œæ¨¡æ¿æ˜¯è·Ÿç€å½“å‰ repo èµ°çš„ï¼Œä¸ä¼šç»§æ‰¿ä¸Šæ¸¸ä»“åº“çš„æ¨¡æ¿ã€‚ 3. å¯ä»¥ä¸ºç»„ç»‡ç»Ÿä¸€é…ç½®æ¨¡æ¿å—ï¼Ÿ å¯ä»¥åœ¨ ç»„ç»‡çº§åˆ«çš„ .github ä»“åº“ ä¸­é…ç½®é»˜è®¤æ¨¡æ¿ï¼Œè¿™æ ·ç»„ç»‡å†…çš„ä»“åº“å¦‚æœæœ¬èº«æ²¡æœ‰æ¨¡æ¿ï¼Œå°±ä¼šä½¿ç”¨ç»„ç»‡æ¨¡æ¿ã€‚ ä½†è¿™å±äºè¿›é˜¶ç©æ³•ï¼Œè¿™ç¯‡å…ˆä¸å±•å¼€ã€‚ 4. YAML å†™é”™äº†æ€ä¹ˆåŠï¼Ÿ YAML å¯¹ç¼©è¿›å’Œç©ºæ ¼æ¯”è¾ƒæ•æ„Ÿï¼›\nå¦‚æœå†™é”™ï¼Œæœ‰æ—¶ GitHub ä¼šç›´æ¥æ— è§†è¿™ä¸ªæ¨¡æ¿ / æŠ¥é”™ï¼›\nå»ºè®®ï¼š\nä½¿ç”¨ç¼–è¾‘å™¨çš„ YAML é«˜äº®å’Œæ ¡éªŒï¼ˆVS Code éå¸¸å¥½ç”¨ï¼‰ï¼› ä¿è¯ç¼©è¿›æ˜¯ç©ºæ ¼ï¼Œä¸”å±‚çº§ä¸€è‡´ã€‚ æœ€ä½³å®è·µä¸å»ºè®® æ˜ç¡®ç›®æ ‡ï¼šå…ˆä»ä¸€ä¸ªã€Œæ–°éœ€æ±‚æ¨¡æ¿ã€å¼€å§‹ï¼Œä¸è¦ä¸€ä¸Šæ¥å°±æä¸€å †å¤æ‚é…ç½®ã€‚\nå¼ºåˆ¶å¡«å†™æ ¸å¿ƒå­—æ®µï¼šèƒŒæ™¯ã€éœ€æ±‚æè¿°ã€éªŒæ”¶æ ‡å‡†ï¼Œè‡³å°‘è¿™ä¸‰é¡¹å»ºè®®å¿…å¡«ã€‚\nç»Ÿä¸€æ ‡é¢˜å‰ç¼€ï¼šæ¯”å¦‚ [éœ€æ±‚] / [Bug]ï¼Œæ–¹ä¾¿ç­›é€‰å’Œæœç´¢ã€‚\nè‡ªåŠ¨æ‰“æ ‡ç­¾ï¼šå‡å°‘åç»­æ‰‹åŠ¨ç»´æŠ¤ï¼Œæ¯”å¦‚ featureã€bugã€enhancementã€‚\né€‚åº¦å³å¯ï¼šæ¨¡æ¿å¤ªé•¿ã€å¤ªå¤æ‚ï¼Œç”¨æˆ·ä¼šçƒ¦ï¼›ä¿æŒåœ¨ã€Œå¼•å¯¼æ¸…æ™°ï¼Œåˆä¸è‡³äºå¤ªå•°å—¦ã€çš„å¹³è¡¡ç‚¹ã€‚\nå®šæœŸå›é¡¾ï¼šç”¨ä¸€ä¸¤ä¸ªæœˆåï¼Œå›å¤´çœ‹çœ‹ï¼š\nå“ªäº›å­—æ®µå¤§å®¶ä»æ¥ä¸å¡« â†’ å¯ä»¥åˆ ï¼› å“ªäº›ä¿¡æ¯æ€»æ˜¯ç¼º â†’ åŠ ä¸€ä¸ªå­—æ®µã€‚ å°ç»“ / ç»“è®º è¿™ç¯‡æ–‡ç« é‡Œæˆ‘ä»¬åšäº†å‡ ä»¶äº‹ï¼š\nææ¸…æ¥šäº† Issue æ¨¡æ¿ / YAML è¡¨å• / Markdown æ¨¡æ¿ è¿™äº›æ ¸å¿ƒæ¦‚å¿µï¼› å®é™…é…ç½®äº†ä¸€å¥— ã€Œæ–°éœ€æ±‚ / Featureã€è¡¨å•æ¨¡æ¿ å’Œä¸€ä¸ªå¯é€‰çš„ Bug æ¨¡æ¿ï¼› ç”¨æ­¥éª¤å’Œå‘½ä»¤è·‘å®Œäº† ä»åˆ›å»ºç›®å½• â†’ å†™æ¨¡æ¿ â†’ æ¨é€ â†’ éªŒè¯ çš„å®Œæ•´æµç¨‹ï¼› è§£é‡Šäº†ä¸ºä»€ä¹ˆæ¨èç”¨ YAML è¡¨å•ï¼Œä»¥åŠå¸¸è§çš„é…ç½®å‘ã€‚ å¦‚æœä½ æŠŠè¿™äº›æ­¥éª¤åœ¨è‡ªå·±çš„ä»“åº“è·‘ä¸€éï¼Œä½ çš„å›¢é˜Ÿæéœ€æ±‚è¿™ä»¶äº‹ï¼Œè´¨é‡ä¼šç«‹åˆ»æœ‰è‚‰çœ¼å¯è§çš„æå‡â€”â€”è‡³å°‘ä»â€œä¸€å¥åºŸè¯ Issueâ€å˜æˆäº†â€œå¯è¯»ã€å¯æ‰§è¡Œçš„éœ€æ±‚æè¿°â€ã€‚\nå‚è€ƒä¸å»¶ä¼¸é˜…è¯» ä½ å¯ä»¥åœ¨è¿™äº›å…³é”®è¯ä¸‹ç»§ç»­æŸ¥å®˜æ–¹æ–‡æ¡£å’Œç¤ºä¾‹ï¼š\nGitHub Docsï¼šIssue and pull request templates\nå…³é”®è¯ï¼š\ngithub issue template yaml github issue forms github .github/ISSUE_TEMPLATE examples ï¼ˆå¦‚æœä½ å›¢é˜ŸåŒæ—¶ç”¨ Gitea \u0026amp; GitHubï¼Œå…¶å®ä¸¤è¾¹çš„ç†å¿µæ˜¯é€šçš„ï¼Œé…ç½®æ–¹å¼ä¹Ÿå¾ˆæ¥è¿‘ã€‚ï¼‰\nå…ƒä¿¡æ¯ é¢„è®¡é˜…è¯»æ—¶é•¿ï¼š8â€“12 åˆ†é’Ÿ\næ ‡ç­¾ï¼šGitHubã€åä½œæ•ˆç‡ã€Issue æ¨¡æ¿ã€å›¢é˜Ÿè§„èŒƒã€éœ€æ±‚ç®¡ç†\nSEO å…³é”®è¯ï¼š\nGitHub Issue æ¨¡æ¿ GitHub Issue Template é…ç½® YAML Issue Form æ•™ç¨‹ Feature Request æ¨¡æ¿ å…ƒæè¿°ï¼ˆMeta Descriptionï¼‰ï¼š æœ¬æ–‡è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ GitHub ä»“åº“ä¸­é…ç½® Issue æ¨¡æ¿ï¼Œå°¤å…¶æ˜¯ç”¨äºæ–°éœ€æ±‚ / Feature çš„ YAML è¡¨å•æ¨¡æ¿å’Œ Bug æ¨¡æ¿ï¼ŒåŒ…å«å®Œæ•´ç›®å½•ç»“æ„ã€é…ç½®ç¤ºä¾‹ã€å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µï¼Œå¸®åŠ©å›¢é˜Ÿè§„èŒƒéœ€æ±‚æäº¤æµç¨‹ï¼Œæå‡åä½œæ•ˆç‡ã€‚\nè¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ å¦‚æœä½ å·²ç»çœ‹å®Œäº†ï¼Œæˆ‘å»ºè®®ä½ ç°åœ¨å°±ï¼š\næ‰¾ä¸€ä¸ªä½ å¸¸ç”¨çš„ GitHub ä»“åº“ï¼› æŒ‰æ–‡ä¸­æ­¥éª¤åˆ›å»º .github/ISSUE_TEMPLATE/feature-request.ymlï¼› æ¨ä¸Šå»ï¼Œè‡ªå·±å¼€ä¸€ä¸ªæµ‹è¯• Issue æ„Ÿå—ä¸€ä¸‹æ•ˆæœã€‚ ","permalink":"http://localhost:1313/jeanblog/posts/%E7%94%A8issue%E6%8A%8A%E9%97%AE%E9%A2%98%E5%86%99%E6%B8%85%E6%A5%9A%E4%BB%8E0%E5%88%B0template/","summary":"\u003ch2 id=\"æ ‡é¢˜å¸å¼•ä¸”å‡†ç¡®åŒ…å«å…³é”®è¯\"\u003eæ ‡é¢˜ï¼ˆå¸å¼•ä¸”å‡†ç¡®ï¼ŒåŒ…å«å…³é”®è¯ï¼‰\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eç”¨ Issue æ¨¡æ¿æŠŠéœ€æ±‚å†™æ¸…æ¥šï¼šä» 0 é…ç½® GitHub Issue Template çš„å®Œæ•´æŒ‡å—\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"å‰¯æ ‡é¢˜--æ‘˜è¦\"\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/h2\u003e\n\u003cp\u003eè¿™ç¯‡æ–‡ç« æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ GitHub ä»“åº“ä¸­é…ç½®ã€Œæ–°éœ€æ±‚ / Featureã€ä¸ã€ŒBugã€Issue æ¨¡æ¿ï¼ŒåŒ…æ‹¬ç›®å½•ç»“æ„ã€YAML è¡¨å•ã€Markdown æ¨¡æ¿ä»¥åŠå¸¸è§å‘ã€‚é€‚åˆæƒ³è®©å›¢é˜Ÿéœ€æ±‚æ²Ÿé€šæ›´è§„èŒƒã€å‡å°‘åå¤è¿½é—®çš„å¼€å‘è€…å’Œå›¢é˜Ÿè´Ÿè´£äººã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"ç›®æ ‡è¯»è€…\"\u003eç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cp\u003eè¿™ç¯‡æ–‡ç« é€‚åˆï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eç»å¸¸åœ¨ GitHub ä»“åº“é‡Œå¼€ Issueã€æéœ€æ±‚çš„ \u003cstrong\u003eåç«¯ / å‰ç«¯ / å…¨æ ˆå·¥ç¨‹å¸ˆ\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eæƒ³æŠŠå›¢é˜Ÿéœ€æ±‚æäº¤æµç¨‹ã€Œæ ‡å‡†åŒ–ã€çš„ \u003cstrong\u003eé¡¹ç›®è´Ÿè´£äºº / TL / æ¶æ„å¸ˆ\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eå¯¹ GitHub å·²ç»æœ‰åŸºæœ¬ä½¿ç”¨ç»éªŒã€ä½†è¿˜æ²¡ç”¨è¿‡ Issue æ¨¡æ¿çš„ \u003cstrong\u003eä¸­çº§å¼€å‘è€…\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå®Œå…¨æ–°æ‰‹ä¹Ÿèƒ½çœ‹æ‡‚ï¼Œä½†ä¼šé»˜è®¤ä½ çŸ¥é“ï¼šä»€ä¹ˆæ˜¯ä»“åº“ã€ä»€ä¹ˆæ˜¯ Issueã€å¦‚ä½•æäº¤ä»£ç ç­‰ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"èƒŒæ™¯--åŠ¨æœºä¸ºä»€ä¹ˆè¦æŠ˜è…¾-issue-æ¨¡æ¿\"\u003eèƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆè¦æŠ˜è…¾ Issue æ¨¡æ¿ï¼Ÿ\u003c/h2\u003e\n\u003cp\u003eæ²¡æœ‰ Issue æ¨¡æ¿æ—¶ï¼Œæ—¥å¸¸å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eâ€œè¿™ä¸ªéœ€æ±‚èƒŒæ™¯æ˜¯ä»€ä¹ˆï¼Ÿâ€\u003c/li\u003e\n\u003cli\u003eâ€œå½±å“å“ªäº›æ¨¡å—ï¼Ÿâ€\u003c/li\u003e\n\u003cli\u003eâ€œéªŒæ”¶æ ‡å‡†æ€ä¹ˆç®—é€šè¿‡ï¼Ÿâ€\u003c/li\u003e\n\u003cli\u003eâ€œä¼˜å…ˆçº§åˆ°åº•å¤šé«˜ï¼Ÿâ€\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸€å¥è¯ Issueï¼š\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eâ€œåšä¸ªå¯¼å‡ºåŠŸèƒ½â€\nç›´æ¥æŠŠæ‰€æœ‰äººæ•´ç ´é˜²ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eé•¿æœŸä¸‹æ¥ä¼šæœ‰å‡ ä¸ªç—›ç‚¹ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eæ²Ÿé€šæˆæœ¬é«˜\u003c/strong\u003eï¼šæ¯ä¸ªéœ€æ±‚éƒ½è¦åå¤è¿½é—®ç»†èŠ‚ï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¿¡æ¯ä¸å¯¹ç§°\u003c/strong\u003eï¼šè¯·æ±‚äººè„‘å­é‡Œå¾ˆæ¸…æ¥šï¼Œä½†å†™åœ¨ Issue é‡Œçš„åªæœ‰ä¸€å¥è¯ï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eéš¾ä»¥æ’æœŸ\u003c/strong\u003eï¼šæ²¡æœ‰æ˜ç¡®ä¼˜å…ˆçº§å’ŒéªŒæ”¶æ ‡å‡†ï¼Œå¤§å®¶éƒ½è§‰å¾—è‡ªå·±çš„éœ€æ±‚æ˜¯ P0ï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå†å²éš¾è¿½è¸ª\u003c/strong\u003eï¼šå‡ ä¸ªæœˆåå†çœ‹è¿™ä¸ª Issueï¼Œå®Œå…¨ä¸çŸ¥é“å½“æ—¶æ€ä¹ˆæƒ³çš„ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eè€Œ GitHub æä¾›çš„ \u003cstrong\u003eIssue Template\u003c/strong\u003eï¼Œå…¶å®å°±æ˜¯ä¸€å¥—ã€Œç»“æ„åŒ–æé—®ã€å·¥å…·ï¼š\u003c/p\u003e","title":"ç”¨IssueæŠŠé—®é¢˜å†™æ¸…æ¥šï¼Œä»0åˆ°TEMPLATE"},{"content":"æ ‡é¢˜ åˆ«è®© Pydantic å é¢†ä½ çš„æ•´ä¸ªé¡¹ç›®ï¼šèŠèŠ API æ ¡éªŒã€Domain æ¨¡å‹å’Œæ•°æ®åº“ä¹‹é—´çš„è¾¹ç•Œ\nå‰¯æ ‡é¢˜ / æ‘˜è¦ å¾ˆå¤šç”¨ FastAPI/Pydantic çš„ Python å·¥ç¨‹å¸ˆï¼Œä¼šä¸çŸ¥ä¸è§‰è®© Pydantic Model è´¯ç©¿ APIã€ä¸šåŠ¡ã€æ•°æ®åº“æ‰€æœ‰å±‚ã€‚æœ¬æ–‡ç”¨ä¸€ä¸ªæ¸…æ™°çš„åˆ†å±‚æ€è·¯å’Œå®Œæ•´ä»£ç ç¤ºä¾‹ï¼Œå¸®ä½ ææ¸…æ¥šï¼šPydantic é€‚åˆç”¨åœ¨ä»€ä¹ˆåœ°æ–¹ï¼ŒDomain / ORM åˆåº”è¯¥æ€ä¹ˆé…åˆã€‚\nç›®æ ‡è¯»è€… è¿™ç¯‡æ–‡ç« é€‚åˆï¼š\næ­£åœ¨ä½¿ç”¨ FastAPI / Pydantic / SQLAlchemy / SQLModel çš„ Python åç«¯å·¥ç¨‹å¸ˆ åˆšå…¥è¡Œ 0â€“3 å¹´ã€å¼€å§‹å…³å¿ƒâ€œåˆ†å±‚ã€æ¶æ„ã€é¢†åŸŸæ¨¡å‹â€çš„å¼€å‘è€… æƒ³ä»â€œä¼šå†™æ¥å£â€è¿›é˜¶åˆ°â€œæ‡‚ä¸šåŠ¡å»ºæ¨¡ã€æ‡‚åˆ†å±‚â€çš„å·¥ç¨‹å¸ˆ å¯¹ â€œPydantic è¦ä¸è¦è¿› Domain / è¦ä¸è¦ç”¨äº DB æ¨¡å‹â€ æœ‰ç–‘æƒ‘çš„äºº ä¸€ã€èƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆ Pydantic å®¹æ˜“â€œé•¿æ»¡å…¨é¡¹ç›®â€ï¼Ÿ å¦‚æœä½ æ˜¯ä» FastAPI å…¥é—¨åç«¯ï¼Œå¾ˆå¯èƒ½ç»å†è¿‡è¿™æ ·çš„è·¯å¾„ï¼š\nç”¨ Pydantic å®šä¹‰è¯·æ±‚ä½“ã€å“åº”ä½“ï¼šå¤ªå¥½ç”¨äº†ï¼Œè‡ªåŠ¨æ ¡éªŒ + æ–‡æ¡£ + ç±»å‹æç¤ºã€‚\nè§‰å¾—æ—¢ç„¶ Pydantic è¿™ä¹ˆé¦™ï¼Œé‚£å¹²è„†ï¼š\nç›´æ¥æ‹¿ Pydantic Model å½“â€œä¸šåŠ¡å¯¹è±¡â€ä¼ æ¥ä¼ å» ç”šè‡³é¡ºæ‰‹æ‹¿å®ƒå»åšâ€œæ•°æ®åº“æ¨¡å‹â€ æ¸æ¸åœ°ï¼Œä½ çš„é¡¹ç›®å˜æˆï¼š\nAPI å±‚ â†’ Pydantic Model Service å±‚ â†’ Pydantic Model DB å±‚ â†’ è¿˜æ˜¯ Pydantic Model æ‰€æœ‰é€»è¾‘éƒ½åœ¨â€œå›´ç»•ä¸€ä¸ªä¸ª BaseModel å­ç±»æ‰“è½¬â€ çŸ­æœŸçœ‹èµ·æ¥å¾ˆçˆ½ï¼š\nå°‘å†™å¾ˆå¤šè½¬æ¢ä»£ç  IDE ä½“éªŒå¥½ã€è‡ªåŠ¨è¡¥å…¨å®Œå–„ ä½†å½“é¡¹ç›®ç¨å¾®å¤§ä¸€ç‚¹ã€å¤æ‚ä¸€ç‚¹ï¼Œä½ ä¼šé‡åˆ°ï¼š\næƒ³æŠŠä¸€äº›ä¸šåŠ¡é€»è¾‘æŠ½å‡ºæ¥åšè„šæœ¬ / CLI / å•å…ƒæµ‹è¯•ï¼Œå´å‘ç°å¼ºä¾èµ– Pydantic \u0026amp; FastAPIï¼› æƒ³æ¢ ORMã€æ¢å­˜å‚¨ï¼Œå‘ç°â€œä¸šåŠ¡å±‚â€å¤§é‡ç›´æ¥ä¾èµ–æŸç§å…·ä½“ç»“æ„ï¼› Domain æ¦‚å¿µè·Ÿ API/DB ç»‘æ­»ï¼Œä¸šåŠ¡ä¸æ¡†æ¶é«˜åº¦è€¦åˆã€‚ è¿™æ—¶ä½ å°±ä¼šé—®å‡ºä»Šå¤©è¿™å¥è¯ï¼š\nâ€œPydantic æ˜¯ä¸æ˜¯åªåº”è¯¥ç”¨åœ¨ API æ ¡éªŒï¼Ÿæ•°æ®åº“äº¤äº’èƒ½ä¸èƒ½ä¸ç”¨å®ƒï¼Ÿ Repository ä¸ºä»€ä¹ˆè¦ä¾èµ– Domain æ¨¡å‹ï¼Œè€Œä¸æ˜¯ Pydantic BaseModelï¼Ÿâ€\nè¿™ç¯‡æ–‡ç« ï¼Œå°±æ˜¯æ¥å›ç­”ï¼šPydantic åœ¨ä¸€ä¸ªâ€œåˆ†å±‚æ¸…æ™°â€çš„é¡¹ç›®ä¸­ï¼Œåº”è¯¥å¤„åœ¨ä»€ä¹ˆä½ç½®ã€‚\näºŒã€æ ¸å¿ƒæ¦‚å¿µï¼šæˆ‘ä»¬åœ¨è¯´çš„å‡ ç§â€œæ¨¡å‹â€åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å…ˆæŠŠå‡ ä¸ªå…³é”®æ¦‚å¿µè¯´æ¸…æ¥šï¼Œä¸ç„¶åé¢å…¨æ˜¯åè¯å¤§æˆ˜ã€‚\n1. é¢†åŸŸæ¨¡å‹ï¼ˆDomain Modelï¼‰ è¡¨è¾¾çš„æ˜¯ä¸šåŠ¡ä¸–ç•Œé‡Œçš„çœŸå®æ¦‚å¿µï¼šæ–‡ç« ã€ç”¨æˆ·ã€è®¢å•ã€åº“å­˜â€¦ ä¸å…³å¿ƒ HTTPã€JSONã€æ•°æ®åº“ã€ORMã€Pydanticã€‚ å¯ä»¥æ˜¯ dataclass / æ™®é€šç±» / NamedTuple ç­‰ã€‚ ä¾‹å­ï¼š\nfrom dataclasses import dataclass, field from datetime import datetime from enum import Enum from typing import List, Optional class PostStatus(str, Enum): DRAFT = \u0026#34;draft\u0026#34; PUBLISHED = \u0026#34;published\u0026#34; @dataclass class Post: id: int author_id: int title: str content: str status: PostStatus = PostStatus.DRAFT tags: List[str] = field(default_factory=list) created_at: datetime = field(default_factory=datetime.utcnow) updated_at: datetime = field(default_factory=datetime.utcnow) published_at: Optional[datetime] = None def publish(self): if self.status == PostStatus.PUBLISHED: return self.status = PostStatus.PUBLISHED self.published_at = datetime.utcnow() self.updated_at = datetime.utcnow() è¿™é‡Œå®Œå…¨æ²¡å‡ºç° Pydanticã€‚\n2. API æ¨¡å‹ / DTOï¼ˆData Transfer Objectï¼‰ ç›®çš„ï¼šæè¿°è¯·æ±‚ \u0026amp; å“åº”ç»“æ„ï¼Œè´Ÿè´£æ ¡éªŒ + æ–‡æ¡£ + åºåˆ—åŒ–ã€‚ å…¸å‹å®ç°ï¼šPydantic BaseModelã€‚ å±äº API å±‚ï¼Œä¸æ˜¯ä¸šåŠ¡æ ¸å¿ƒã€‚ ä¾‹å­ï¼š\nfrom pydantic import BaseModel from typing import List class CreatePostRequest(BaseModel): title: str content: str tags: List[str] = [] class PostResponse(BaseModel): id: int title: str content: str tags: List[str] status: str 3. æŒä¹…åŒ–æ¨¡å‹ï¼ˆPersistence Model / ORM Modelï¼‰ ç›®çš„ï¼šæ–¹ä¾¿å’Œæ•°æ®åº“äº¤äº’ï¼ˆå»ºè¡¨ã€æŸ¥è¯¢ã€æ›´æ–°ã€ç´¢å¼•ï¼‰ã€‚ é€šå¸¸ç”¨ ORMï¼šSQLAlchemy / Django ORM / SQLModel / Beanie ç­‰ã€‚ å±äº Infra / åŸºç¡€è®¾æ–½å±‚ï¼Œå’Œ DB å¼ºç›¸å…³ã€‚ ä¾‹å­ï¼ˆSQLAlchemyï¼‰ï¼š\nfrom sqlalchemy import Column, Integer, String, DateTime from sqlalchemy.orm import declarative_base Base = declarative_base() class PostTable(Base): __tablename__ = \u0026#34;posts\u0026#34; id = Column(Integer, primary_key=True) author_id = Column(Integer, nullable=False) title = Column(String(200), nullable=False) content = Column(String, nullable=False) status = Column(String(20), default=\u0026#34;draft\u0026#34;) created_at = Column(DateTime) updated_at = Column(DateTime) published_at = Column(DateTime, nullable=True) ğŸ”‘ æ€»ç»“ä¸€å¥ï¼š\nDomain Model = ä¸šåŠ¡ä¸–ç•Œ API Model (Pydantic) = HTTP ä¸–ç•Œ / å¤–éƒ¨é€šä¿¡ ORM Model = æ•°æ®åº“ä¸–ç•Œ å®ƒä»¬å¯ä»¥é•¿å¾—å¾ˆåƒï¼Œä½†èŒè´£å®Œå…¨ä¸åŒã€‚\nä¸‰ã€å®è·µæŒ‡å—ï¼šPydanticã€Domainã€DB çš„æ¨èåˆ†å·¥ï¼ˆå¸¦å®Œæ•´æµç¨‹ï¼‰ æˆ‘ä»¬ç”¨ä¸€ä¸ªâ€œåšå®¢ç³»ç»Ÿâ€çš„æœ€å°ç”¨ä¾‹æ¥èµ°å…¨æµç¨‹ï¼š\nç”¨æˆ·é€šè¿‡ HTTP åˆ›å»ºä¸€ç¯‡æ–‡ç«  â†’ å­˜åˆ°æ•°æ®åº“ â†’ è¿”å›æ–‡ç« ä¿¡æ¯ã€‚\næˆ‘ä»¬åˆ† 4 å±‚çœ‹ï¼š\nAPI å±‚ï¼šæ¥æ”¶ HTTP è¯·æ±‚ï¼Œç”¨ Pydantic æ ¡éªŒå‚æ•° Application/Service å±‚ï¼šæ‰¿è½½ç”¨ä¾‹é€»è¾‘ Domain å±‚ï¼šä¸šåŠ¡çœŸç›¸ï¼ˆPost å®ä½“ï¼‰ Infra/Repo å±‚ï¼šæ“ä½œæ•°æ®åº“ï¼ˆç”¨ ORMï¼‰ æ­¥éª¤ 1ï¼šå®šä¹‰ Domain æ¨¡å‹ï¼ˆä¸šåŠ¡æ ¸å¿ƒï¼‰ # app/domain/post.py from dataclasses import dataclass, field from datetime import datetime from enum import Enum from typing import List, Optional class PostStatus(str, Enum): DRAFT = \u0026#34;draft\u0026#34; PUBLISHED = \u0026#34;published\u0026#34; @dataclass class Post: id: int author_id: int title: str content: str status: PostStatus = PostStatus.DRAFT tags: List[str] = field(default_factory=list) created_at: datetime = field(default_factory=datetime.utcnow) updated_at: datetime = field(default_factory=datetime.utcnow) published_at: Optional[datetime] = None def publish(self): if self.status == PostStatus.PUBLISHED: return self.status = PostStatus.PUBLISHED self.published_at = datetime.utcnow() self.updated_at = datetime.utcnow() æ­¥éª¤ 2ï¼šå®šä¹‰ Repo æ¥å£ï¼ˆç”¨ Domain ç±»å‹ï¼‰ # app/application/ports.py from typing import Protocol, Optional, List from app.domain.post import Post class PostRepository(Protocol): def get_by_id(self, post_id: int) -\u0026gt; Optional[Post]: ... def save(self, post: Post) -\u0026gt; Post: ... def list_published(self, limit: int = 10, offset: int = 0) -\u0026gt; List[Post]: ... æ³¨æ„ï¼š\nè¿™é‡Œç”¨çš„æ˜¯ Postï¼ˆDomain å®ä½“ï¼‰ï¼Œä¸æ˜¯ Pydantic Model è¿™æ˜¯ â€œæˆ‘è¦å­˜çš„æ˜¯ä»€ä¹ˆâ€ çš„å£°æ˜ï¼Œå’Œ DB æŠ€æœ¯æ— å…³ æ­¥éª¤ 3ï¼šå®šä¹‰ Application Serviceï¼ˆç”¨ä¾‹é€»è¾‘ï¼‰ # app/application/post_service.py from typing import List from app.domain.post import Post from app.application.ports import PostRepository class PostService: def __init__(self, repo: PostRepository): self.repo = repo def create_draft(self, author_id: int, title: str, content: str, tags: List[str]) -\u0026gt; Post: post = Post( id=0, # å…·ä½“ ID ç”± Repo å†³å®šå¦‚ä½•ç”Ÿæˆ author_id=author_id, title=title, content=content, tags=tags, ) return self.repo.save(post) Application Service åªå…³å¿ƒï¼š\næ‹¿åˆ° Domain å¯¹è±¡ è°ƒç”¨ Repo æ¥å£ å®Œå…¨ä¸å…³å¿ƒï¼š\nHTTP æ€ä¹ˆä¼ å‚ DB ç”¨ä»€ä¹ˆç±»å‹å­—æ®µ æ­¥éª¤ 4ï¼šå®ç° Repoï¼ˆInfra å±‚ï¼Œå¤„ç† ORM â†” Domain è½¬æ¢ï¼‰ # app/infra/repositories/postgres_post_repo.py from typing import Optional, List from sqlalchemy.orm import Session from app.domain.post import Post, PostStatus from app.application.ports import PostRepository from app.infra.tables import PostTable class PostgresPostRepository(PostRepository): def __init__(self, session: Session): self.session = session def get_by_id(self, post_id: int) -\u0026gt; Optional[Post]: row = self.session.query(PostTable).get(post_id) if row is None: return None return self._row_to_domain(row) def save(self, post: Post) -\u0026gt; Post: if post.id == 0: row = PostTable( author_id=post.author_id, title=post.title, content=post.content, status=post.status.value, created_at=post.created_at, updated_at=post.updated_at, published_at=post.published_at, ) self.session.add(row) else: row = self.session.query(PostTable).get(post.id) row.title = post.title row.content = post.content row.status = post.status.value row.updated_at = post.updated_at row.published_at = post.published_at self.session.commit() self.session.refresh(row) return self._row_to_domain(row) def list_published(self, limit: int = 10, offset: int = 0) -\u0026gt; List[Post]: q = ( self.session.query(PostTable) .filter(PostTable.status == PostStatus.PUBLISHED.value) .order_by(PostTable.published_at.desc()) .limit(limit) .offset(offset) ) return [self._row_to_domain(row) for row in q.all()] def _row_to_domain(self, row: PostTable) -\u0026gt; Post: return Post( id=row.id, author_id=row.author_id, title=row.title, content=row.content, status=PostStatus(row.status), tags=row.tags or [], created_at=row.created_at, updated_at=row.updated_at, published_at=row.published_at, ) è¿™é‡Œæ˜¯ DB çš„â€œé‡ç¾åŒºâ€ï¼Œä½†ä½ ä¼šçœ‹åˆ°ï¼š\nRepo å®ç°ä¾èµ– Domain å®ä½“æ˜¯æ­£å¸¸ä¸”æ¨èçš„ ä¸Šå±‚å®Œå…¨ä¸éœ€è¦å…³å¿ƒ ORM çš„å­˜åœ¨ æ­¥éª¤ 5ï¼šAPI å±‚æ‰ç”¨ Pydanticï¼ˆè¯·æ±‚æ ¡éªŒ + å“åº”åŒ…è£…ï¼‰ # app/api/schemas.py from pydantic import BaseModel from typing import List class CreatePostRequest(BaseModel): title: str content: str tags: List[str] = [] class PostResponse(BaseModel): id: int title: str content: str tags: List[str] status: str # app/api/routes_posts.py from fastapi import APIRouter, Depends from app.api.schemas import CreatePostRequest, PostResponse from app.application.post_service import PostService router = APIRouter() def get_post_service() -\u0026gt; PostService: # è¿™é‡Œæ³¨å…¥å…·ä½“çš„ Repo å®ç° ... @router.post(\u0026#34;/posts\u0026#34;, response_model=PostResponse) def create_post( req: CreatePostRequest, service: PostService = Depends(get_post_service), ): # è¿™é‡Œå¯ä»¥ä» token é‡Œæ‹¿ author_idï¼Œè¿™é‡Œç®€åŒ–å†™æ­» post = service.create_draft( author_id=1, title=req.title, content=req.content, tags=req.tags, ) return PostResponse( id=post.id, title=post.title, content=post.content, tags=post.tags, status=post.status.value, ) åˆ°è¿™é‡Œï¼Œä½ å°±å®Œæˆäº†ä¸€ä¸ªåˆ†å·¥æ¸…æ™°çš„æµï¼š\nPydantic åªåœ¨ API å±‚å‡ºç° Domain æ˜¯çº¯ Pythonï¼Œå¯åœ¨ CLI/è„šæœ¬/åˆ«çš„æœåŠ¡é‡Œå¤ç”¨ DB ç›¸å…³çš„éƒ½åœ¨ Infra/Repo å®ç°é‡Œ å››ã€è§£é‡Šä¸åŸç†ï¼šä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåˆ†ï¼Ÿæ›¿ä»£æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ 1. ä¸ºä»€ä¹ˆæ¨è Pydantic åªåœ¨ API/å¤–å›´ä½¿ç”¨ï¼Ÿ æ ¸å¿ƒåŸå› ï¼šâ€œä¾èµ–æ–¹å‘â€ \u0026amp; â€œä¸šåŠ¡æ ¸å¿ƒè§£è€¦æ¡†æ¶â€\nPydantic æœ¬è´¨æ˜¯ä¸€ä¸ªâ€œå·¥å…·åº“ + æ¡†æ¶ä¾èµ–â€ï¼ˆå°¤å…¶åœ¨ FastAPI ä¸­ï¼‰\nå¦‚æœ Domain / Service ç›´æ¥ä¾èµ– Pydanticï¼š\nä½ çš„ä¸šåŠ¡é€»è¾‘å°±è¢«å¼ºç»‘å®šåœ¨è¿™ä¸ªåº“ä¸Š æ¢æ¡†æ¶ / å»æ‰ Pydantic / åšçº¯è„šæœ¬æ—¶ï¼Œä¼šéå¸¸ç—›è‹¦ è€Œæˆ‘ä»¬æ›´å¸Œæœ›ï¼š\nä¸šåŠ¡æ ¸å¿ƒåªä¾èµ– Python æ ‡å‡†åº“ / åŸºæœ¬ç±»å‹ æ¡†æ¶ \u0026amp; åº“æ˜¯å¯ä»¥æ›¿æ¢çš„å¤–å±‚ï¼Œè€Œä¸æ˜¯â€œé•¶åµŒè¿›ä¸šåŠ¡é‡Œâ€çš„ è¿™å…¶å®å°±æ˜¯ï¼š\nClean Architecture / å…­è¾¹å½¢æ¶æ„ / DDD é‡Œè¯´çš„ï¼š\nâ€œå†…åœˆï¼ˆä¸šåŠ¡ï¼‰ä¸ä¾èµ–å¤–åœˆï¼ˆæ¡†æ¶/æŠ€æœ¯ç»†èŠ‚ï¼‰â€ 2. æ›¿ä»£æ–¹æ¡ˆ \u0026amp; å·¥ç¨‹å¦¥å ç°å®å·¥ç¨‹é‡Œï¼Œä½ ä¼šçœ‹åˆ°å‡ ç§å¸¸è§åšæ³•ï¼š\nåšæ³• Aï¼šå…¨é¡¹ç›®ç»Ÿä¸€ç”¨ Pydantic Modelï¼ˆä¸æ¨èåšå¤§é¡¹ç›®ï¼‰ æœ€ç®€å•ã€æœ€å°‘ä»£ç ã€æœ€é€‚åˆ demo \u0026amp; å°ç©å…·ã€‚ ä¸€æ—¦é¡¹ç›®å¤æ‚åº¦æå‡ï¼Œå¾ˆéš¾æ§åˆ¶è¾¹ç•Œã€‚ åšæ³• Bï¼šSQLModel / Beanie ç­‰â€œPydantic + ORM ä¸€ä½“åŒ–â€ å¯¹å°ä¸­å‹é¡¹ç›®å…¶å®æŒºé¦™ï¼š\nä¸€ä»½æ¨¡å‹åŒæ—¶ç”¨äº API \u0026amp; DB ä½†å¦‚æœä½ æƒ³èµ°æ¯”è¾ƒâ€œçº¯ç²¹â€çš„é¢†åŸŸå»ºæ¨¡è·¯çº¿ï¼š\nå»ºè®®ä»ç„¶åœ¨ Domain å±‚ç”¨ç‹¬ç«‹å®ä½“ï¼Œ æŠŠ SQLModel å½“æˆ Infra çš„å®ç°ã€‚ åšæ³• Cï¼šæœ¬æ–‡æ¨èæ–¹æ¡ˆï¼ˆåˆ†å±‚æ˜ç¡®ï¼‰ Domainï¼šçº¯ Python å®ä½“ APIï¼šPydantic DTO DBï¼šORM Model Repoï¼šè´Ÿè´£åšè½¬æ¢ é€‚åˆï¼šä½ å¸Œæœ›åé¢å…»æˆâ€œæ¶æ„æ„Ÿâ€ï¼Œä¸åªå†™ CRUD çš„æƒ…å†µã€‚\näº”ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ Q1ï¼šè¿™æ ·è¦å†™å¾ˆå¤šâ€œè½¬æ¢ä»£ç â€ï¼Œæ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Ÿ æ˜¯çš„ï¼Œä¼šå¤šä¸€ç‚¹ä»£ç ï¼Œä½†æ¢æ¥çš„æ˜¯ï¼š\nèŒè´£æ¸…æ™°ï¼šå“ªé‡Œæ˜¯ä¸šåŠ¡ï¼Œå“ªé‡Œæ˜¯é€šä¿¡ï¼Œå“ªé‡Œæ˜¯å­˜å‚¨ï¼Œä¸€ç›®äº†ç„¶ï¼› æ”¹åŠ¨å¯æ§ï¼šæ¢ ORMã€æ¢æ¡†æ¶ï¼Œä¸ä¼šç‰µä¸€å‘åŠ¨å…¨èº«ï¼› æµ‹è¯•æ›´ç®€å•ï¼šDomain \u0026amp; Service å±‚å¯ä»¥å®Œå…¨ä¸ä¾èµ– FastAPI è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ å°å»ºè®®ï¼š\nç”¨ä¸€äº›å°å·¥å…·å‡½æ•°å°è£…ï¼špost_to_response(post)ã€row_to_post(row) ç­‰ï¼› çœŸæ­£éº»çƒ¦çš„ä¸æ˜¯â€œå†™è½¬æ¢â€ï¼Œè€Œæ˜¯â€œåˆ°å¤„æ··åœ¨ä¸€èµ·ç„¶åä¸çŸ¥é“æ€ä¹ˆæ”¹â€ã€‚ Q2ï¼šRepo æ¥å£ä¾èµ– Domain å®ä½“ï¼Œä¼šä¸ä¼šç®—â€œåå‘ä¾èµ–â€ï¼Ÿ ä¸ä¼šï¼Œåè€Œæ˜¯åº”è¯¥çš„ï¼š\nRepo çš„èŒè´£å°±æ˜¯ï¼šâ€œå­˜å–é¢†åŸŸå¯¹è±¡â€ï¼› æ‰€ä»¥å®ƒéå¸¸è‡ªç„¶åœ°è¦ç”¨ Domain ç±»å‹ï¼› é”™çš„åšæ³•æ˜¯ï¼šDomain åè¿‡æ¥ä¾èµ–å…·ä½“ Repo å®ç°ï¼ˆæ¯”å¦‚ç›´æ¥ import SQLAlchemy Sessionï¼‰ã€‚ Q3ï¼šæ˜¯ä¸æ˜¯ DB å±‚â€œç»å¯¹ä¸èƒ½â€ç”¨ Pydanticï¼Ÿ ä¸æ˜¯â€œç»å¯¹ä¸èƒ½â€ï¼Œè€Œæ˜¯ï¼š\nä¸è¦è®© Pydantic Model æ¸—é€è¿› Domain \u0026amp; Service å±‚\nåœ¨ Infra é‡Œï¼Œç”¨ Pydantic åšä¸€äº›éªŒè¯/è½¬æ¢æ˜¯å®Œå…¨å¯ä»¥çš„\næ¯”å¦‚ï¼š\nç”¨ Pydantic æ ¡éªŒæŸä¸ªå¤–éƒ¨ç³»ç»Ÿçš„é…ç½® ç”¨ Pydantic è§£æç¬¬ä¸‰æ–¹ API å“åº”ï¼Œå†è½¬æˆ Domain å…­ã€æœ€ä½³å®è·µä¸å»ºè®®ï¼ˆå¯ä»¥å½“ Checklistï¼‰ Pydantic æ”¾åœ¨å“ªï¼š\nâœ… API å±‚è¯·æ±‚/å“åº” DTO âœ… é…ç½® / å¤–éƒ¨æœåŠ¡æ•°æ®ç»“æ„ âŒ ä¸è¦ä½œä¸º Domain å®ä½“ âŒ ä¸è¦ä½œä¸º Repo æ¥å£ç±»å‹ Domain æ¨¡å‹å¦‚ä½•å†™ï¼š\nç”¨ dataclass / æ™®é€šç±» é›†ä¸­ä¸šåŠ¡è§„åˆ™ï¼ˆçŠ¶æ€å˜æ›´ã€æ ¡éªŒï¼‰ ä¸ import FastAPI / Pydantic / ORM Repo çš„èŒè´£ï¼š\næ¥æ”¶ \u0026amp; è¿”å› Domain å®ä½“ åœ¨å®ç°ä¸­è´Ÿè´£ ORM/Pydantic â†” Domain ä¹‹é—´çš„è½¬æ¢ ä¸æŠŠ ORM/Pydantic é€ä¼ ç»™ä¸Šå±‚ æ”¹é€ è€é¡¹ç›®çš„é¡ºåºï¼š\nå…ˆä»æœ€æ ¸å¿ƒçš„ä¸€ä¸¤ä¸ªé¢†åŸŸå¯¹è±¡å¼€å§‹æŠ½å‡º Domain å®ä½“ å†åœ¨ Service å±‚ç”¨ Domainï¼ŒRepo å±‚æ…¢æ…¢æ›¿æ¢ API å±‚æœ€ååš Pydantic â†” Domain çš„è½¬æ¢ ä¸ƒã€å°ç»“ / ç»“è®ºï¼šä¸€å¥è¯è®°ä½è¿™ä»¶äº‹ Pydantic æ˜¯ç”¨æ¥â€œå’Œå¤–ç•Œæ‰“äº¤é“â€çš„ï¼Œä¸æ˜¯ç”¨æ¥â€œå®šä¹‰ä½ ä¸šåŠ¡ä¸–ç•Œæœ¬èº«â€çš„ã€‚\nAPI / é…ç½® / å¤–éƒ¨æœåŠ¡ â†’ ç”¨ Pydantic å¾ˆåˆé€‚ ä¸šåŠ¡æ ¸å¿ƒï¼ˆDomainï¼‰ â†’ å°½é‡ä¿æŒçº¯ Python æ•°æ®åº“äº¤äº’ â†’ ç”¨ ORM / SQLï¼ŒRepo è´Ÿè´£ Domain â†” DB çš„ç¿»è¯‘ å½“ä½ å¼€å§‹æœ‰æ„è¯†åœ°æŠŠè¿™ä¸‰è€…åˆ†å¼€ï¼Œä½ ä¼šå‘ç°ï¼š\nä»£ç æ›´å®¹æ˜“æµ‹ã€æ›´å®¹æ˜“é‡æ„ã€æ›´å®¹æ˜“è§£é‡Šç»™åˆ«äººå¬ï¼› ä½ ä¸å†åªæ˜¯â€œå†™æ¥å£çš„äººâ€ï¼Œè€Œæ˜¯åœ¨ç”¨ä»£ç è¡¨è¾¾ä½ çš„ä¸šåŠ¡ç†è§£ã€‚ å…«ã€å‚è€ƒä¸å»¶ä¼¸é˜…è¯»ï¼ˆå»ºè®®ä½ æŒ‰å…³é”®è¯æœç´¢ï¼‰ é¿å…ç›´æ¥è´´é•¿é“¾æ¥ï¼Œä½ å¯ä»¥æŒ‰è¿™äº›å…³é”®å­—æœç´¢å®˜æ–¹æ–‡æ¡£/åšå®¢ï¼š\nâ€œFastAPI Pydantic Modelsâ€ â€“ FastAPI å®˜æ–¹æ–‡æ¡£ â€œPydantic Usage Models vs ORMâ€ â€“ Pydantic æ–‡æ¡£è®¨è®º â€œRepository Pattern in Pythonâ€ â€œClean Architecture in Pythonâ€ â€œDomain-Driven Design (DDD) Domain Modelâ€ ä¹ã€å…ƒä¿¡æ¯ï¼ˆMeta ä¿¡æ¯ï¼‰ é¢„è®¡é˜…è¯»æ—¶é•¿ï¼š12â€“18 åˆ†é’Ÿ\næ ‡ç­¾ï¼ˆTagsï¼‰ï¼š\nFastAPI Pydantic Python åç«¯ åˆ†å±‚æ¶æ„ Domain Model Repository Pattern SEO å…³é”®è¯ï¼ˆKeywordsï¼‰ï¼š\nPydantic åªç”¨äº API æ ¡éªŒ FastAPI åˆ†å±‚è®¾è®¡ Python Domain Model ä¸ Pydantic Repository ä¾èµ– Domain å®ä½“ Pydantic ä¸ SQLAlchemy åˆ†å±‚å®è·µ å…ƒæè¿°ï¼ˆMeta Descriptionï¼‰ï¼š\næœ¬æ–‡é¢å‘ä½¿ç”¨ FastAPI/Pydantic çš„ Python åç«¯å·¥ç¨‹å¸ˆï¼Œæ·±å…¥è®²è§£ Pydantic åœ¨åˆ†å±‚æ¶æ„ä¸­çš„æ­£ç¡®ä½ç½®ï¼šå¦‚ä½•åªåœ¨ API å±‚ä½¿ç”¨ Pydantic åšæ ¡éªŒä¸åºåˆ—åŒ–ï¼ŒæŠŠ Domain æ¨¡å‹å’Œæ•°æ®åº“äº¤äº’ä»æ¡†æ¶ä¸­è§£è€¦ï¼Œå¹¶é€šè¿‡å®Œæ•´ç¤ºä¾‹å±•ç¤º Repository ä¸ Domain çš„åä½œæ–¹å¼ã€‚\nåã€è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ›  åŠ¨æ‰‹è¯•ä¸€è¯•ï¼š ä»ä½ ç°æœ‰é¡¹ç›®ä¸­æŒ‘ä¸€ä¸ªæ ¸å¿ƒå®ä½“ï¼ˆæ¯”å¦‚ User æˆ– Postï¼‰ï¼Œ æŠŠå®ƒä» Pydantic Model ä¸­ç‹¬ç«‹å‡ºæ¥ï¼Œæ”¹æˆä¸€ä¸ªçº¯ Python çš„ Domain ç±»ï¼Œ ç„¶åè®© Service / Repo éƒ½æ”¹ç”¨è¿™ä¸ª Domain ç±»ã€‚\nğŸ§ª å†™ä¸ªå°å®éªŒä»“åº“ï¼š æ–°å»ºä¸€ä¸ªæç®€ FastAPI + SQLAlchemy é¡¹ç›®ï¼ŒæŒ‰æœ¬æ–‡ç»“æ„æ­ä¸€éåˆ†å±‚ï¼Œä»¥åæ–°é¡¹ç›®å¯ä»¥ç›´æ¥ copy è¿™å¥—è„šæ‰‹æ¶ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%88%AB%E8%AE%A9pydantic%E5%8D%A0%E9%A2%86%E4%BD%A0%E7%9A%84%E6%95%B4%E4%B8%AA%E9%A1%B9%E7%9B%AE%E8%81%8A%E8%81%8Aapi%E6%A0%A1%E9%AA%8Cdomain%E6%A8%A1%E5%9E%8B%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BE%B9%E7%95%8C/","summary":"\u003ch3 id=\"æ ‡é¢˜\"\u003eæ ‡é¢˜\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eåˆ«è®© Pydantic å é¢†ä½ çš„æ•´ä¸ªé¡¹ç›®ï¼šèŠèŠ API æ ¡éªŒã€Domain æ¨¡å‹å’Œæ•°æ®åº“ä¹‹é—´çš„è¾¹ç•Œ\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"å‰¯æ ‡é¢˜--æ‘˜è¦\"\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/h3\u003e\n\u003cp\u003eå¾ˆå¤šç”¨ FastAPI/Pydantic çš„ Python å·¥ç¨‹å¸ˆï¼Œä¼šä¸çŸ¥ä¸è§‰è®© Pydantic Model è´¯ç©¿ APIã€ä¸šåŠ¡ã€æ•°æ®åº“æ‰€æœ‰å±‚ã€‚æœ¬æ–‡ç”¨ä¸€ä¸ªæ¸…æ™°çš„åˆ†å±‚æ€è·¯å’Œå®Œæ•´ä»£ç ç¤ºä¾‹ï¼Œå¸®ä½ ææ¸…æ¥šï¼š\u003cstrong\u003ePydantic é€‚åˆç”¨åœ¨ä»€ä¹ˆåœ°æ–¹ï¼ŒDomain / ORM åˆåº”è¯¥æ€ä¹ˆé…åˆã€‚\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"ç›®æ ‡è¯»è€…\"\u003eç›®æ ‡è¯»è€…\u003c/h3\u003e\n\u003cp\u003eè¿™ç¯‡æ–‡ç« é€‚åˆï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ­£åœ¨ä½¿ç”¨ \u003cstrong\u003eFastAPI / Pydantic / SQLAlchemy / SQLModel\u003c/strong\u003e çš„ Python åç«¯å·¥ç¨‹å¸ˆ\u003c/li\u003e\n\u003cli\u003eåˆšå…¥è¡Œ 0â€“3 å¹´ã€å¼€å§‹å…³å¿ƒâ€œåˆ†å±‚ã€æ¶æ„ã€é¢†åŸŸæ¨¡å‹â€çš„å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eæƒ³ä»â€œä¼šå†™æ¥å£â€è¿›é˜¶åˆ°â€œæ‡‚ä¸šåŠ¡å»ºæ¨¡ã€æ‡‚åˆ†å±‚â€çš„å·¥ç¨‹å¸ˆ\u003c/li\u003e\n\u003cli\u003eå¯¹ â€œPydantic è¦ä¸è¦è¿› Domain / è¦ä¸è¦ç”¨äº DB æ¨¡å‹â€ æœ‰ç–‘æƒ‘çš„äºº\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¸€èƒŒæ™¯--åŠ¨æœºä¸ºä»€ä¹ˆ-pydantic-å®¹æ˜“é•¿æ»¡å…¨é¡¹ç›®\"\u003eä¸€ã€èƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆ Pydantic å®¹æ˜“â€œé•¿æ»¡å…¨é¡¹ç›®â€ï¼Ÿ\u003c/h2\u003e\n\u003cp\u003eå¦‚æœä½ æ˜¯ä» FastAPI å…¥é—¨åç«¯ï¼Œå¾ˆå¯èƒ½ç»å†è¿‡è¿™æ ·çš„è·¯å¾„ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eç”¨ Pydantic å®šä¹‰è¯·æ±‚ä½“ã€å“åº”ä½“ï¼šå¤ªå¥½ç”¨äº†ï¼Œè‡ªåŠ¨æ ¡éªŒ + æ–‡æ¡£ + ç±»å‹æç¤ºã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eè§‰å¾—æ—¢ç„¶ Pydantic è¿™ä¹ˆé¦™ï¼Œé‚£å¹²è„†ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eç›´æ¥æ‹¿ Pydantic Model å½“â€œä¸šåŠ¡å¯¹è±¡â€ä¼ æ¥ä¼ å»\u003c/li\u003e\n\u003cli\u003eç”šè‡³é¡ºæ‰‹æ‹¿å®ƒå»åšâ€œæ•°æ®åº“æ¨¡å‹â€\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eæ¸æ¸åœ°ï¼Œä½ çš„é¡¹ç›®å˜æˆï¼š\u003c/p\u003e","title":"åˆ«è®©Pydanticå é¢†ä½ çš„æ•´ä¸ªé¡¹ç›®:èŠèŠAPIæ ¡éªŒ,Domainæ¨¡å‹å’Œæ•°æ®åº“ä¹‹é—´çš„è¾¹ç•Œ"},{"content":"æ ‡é¢˜ ä»å†™è·¯ç”±åˆ°å†™â€œå¤§è„‘â€ï¼šPython å·¥ç¨‹å¸ˆå¦‚ä½•å…ˆæå®šæ ¸å¿ƒé€»è¾‘ï¼Œå†è€ƒè™‘ API\nå‰¯æ ‡é¢˜ / æ‘˜è¦ åˆšå…¥è¡Œæ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¸€ä¸Šæ¥å°±å†™è·¯ç”±ã€è®¾è®¡æ¥å£ã€æƒ³ chat_id / message_id æ€ä¹ˆå­˜ï¼Œå´å‘ç°çœŸæ­£çš„â€œæ™ºåŠ›æ´»â€â€”â€”æ ¸å¿ƒé€»è¾‘â€”â€”æ€»æ˜¯æ‹–åˆ°åé¢ã€‚è¿™ç¯‡æ–‡ç« å¸¦ä½ ä»ã€Œå…ˆå†™æ¥å£ã€çš„æ€ç»´ï¼Œå‡çº§åˆ°ã€Œå…ˆå†™å¤§è„‘ï¼Œå†æ¥å¤–å£³ã€ï¼Œå¹¶ä¸²èµ·æ¥å…­è¾¹å½¢æ¶æ„ã€Clean Architectureã€DDD ç­‰èƒŒåçš„ç»å…¸ç†å¿µã€‚\nç›®æ ‡è¯»è€… é€‚åˆè¿™äº›åŒå­¦é˜…è¯»ï¼š\n1â€“3 å¹´ç»éªŒ çš„ Python åç«¯å·¥ç¨‹å¸ˆ / AI åº”ç”¨å¼€å‘è€… æ­£åœ¨ç”¨ FastAPI / Django / Flask ç­‰æ¡†æ¶å†™ API çš„å·¥ç¨‹å¸ˆ æƒ³ä»â€œCRUD æ¬ç –å·¥â€è¿›åŒ–ä¸ºâ€œæ‡‚è®¾è®¡ã€èƒ½æŠ½è±¡â€çš„å·¥ç¨‹å¸ˆ å¯¹ å…­è¾¹å½¢æ¶æ„ / Clean Architecture / DDD æœ‰ç‚¹å¥½å¥‡ä½†æ²¡ç³»ç»Ÿçœ‹è¿‡ä¹¦çš„äºº ä¸€ã€èƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆâ€œå…ˆå†™æ¥å£â€ä¼šå¡æ­»è‡ªå·±ï¼Ÿ å¾ˆå¤šåˆšå…¥è¡Œçš„ Python å·¥ç¨‹å¸ˆï¼ˆåŒ…æ‹¬ä½ æˆ‘ï¼‰ä¼šæœ‰è¿™æ ·çš„æµç¨‹ï¼š\näº§å“æä¸€ä¸ªæ–°éœ€æ±‚ï¼šåšä¸€ä¸ª AI èŠå¤©åŠŸèƒ½ã€‚\næ‰“å¼€ç¼–è¾‘å™¨ï¼Œç¬¬ä¸€ååº”å°±æ˜¯ï¼š\nè®¾è®¡ URLï¼šPOST /api/chat/send_message å¼€å§‹å†™ routerï¼š@app.post(\u0026quot;/chat/send\u0026quot;) æƒ³ request body å‚æ•°é•¿ä»€ä¹ˆæ ·ï¼šchat_id / message_id / user_id / content æƒ³æ•°æ®åº“è¡¨ç»“æ„ï¼šchatsï¼Œmessages å†™äº†ä¸€å † APIã€schemaã€modelã€è¿ç§»è„šæœ¬ä¹‹åï¼Œæ‰æƒ³èµ·æ¥ï¼š â€œé‚£ AI å›å¤åˆ°åº•æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Ÿâ€\nå¸¸è§ç—›ç‚¹ï¼š\næ ¸å¿ƒé€»è¾‘æ²¡æœ‰æƒ³æ¸…æ¥šï¼šæ¨¡å‹æ€ä¹ˆè°ƒç”¨ã€prompt æ€ä¹ˆæ„é€ ã€å†å²è®°å½•æ€ä¹ˆæˆªæ–­ï¼Œå…¨æ˜¯ä¸´æ—¶æ‹¼å‡ºæ¥çš„ã€‚ é€»è¾‘è¢«ç»‘æ­»åœ¨æ¡†æ¶é‡Œï¼š æƒ³åšä¸€ä¸ª CLI å·¥å…·å¿«é€Ÿæµ‹è¯•é€»è¾‘ï¼Ÿå‘ç°æ‰€æœ‰ä»£ç éƒ½å†™åœ¨è·¯ç”±å‡½æ•°é‡Œã€‚ æ”¹ä¸€ç‚¹ä¸œè¥¿ç‰µä¸€å¤§å †ï¼š æƒ³æ¢ä¸€ä¸ªæ¨¡å‹ / è°ƒæ•´å¯¹è¯ç­–ç•¥ï¼Œå¿…é¡»æ”¹ API æ¥å£ä»£ç ï¼Œç”šè‡³å½±å“å‰ç«¯ã€‚ ä½ ç›´è§‰ä¸Šå·²ç»æ„è¯†åˆ°ï¼š\nâ€œä¸ç®¡æœ‰æ²¡æœ‰æ¥å£ï¼Œè¿™äº›åŠŸèƒ½å…¶å®çº¯åç«¯ / CLI å°±å¯ä»¥è·‘èµ·æ¥ï¼Œé‚£æ˜¯ä¸æ˜¯è¯´æ˜æˆ‘åº”è¯¥å…ˆå†™æ ¸å¿ƒé€»è¾‘ï¼Ÿâ€\nç­”æ¡ˆæ˜¯ï¼šæ˜¯ï¼Œè€Œä¸”è¿™æ­£å¥½è¸©åœ¨ä¸€å †è½¯ä»¶å·¥ç¨‹å¤§å¸ˆçš„å…±è¯†ä¸Šã€‚\näºŒã€æ ¸å¿ƒæ¦‚å¿µï¼šè¿™å¥—â€œå…ˆæ ¸å¿ƒåæ¥å£â€åˆ°åº•å«ä»€ä¹ˆï¼Ÿ è¿™ä¸æ˜¯æŸä¸ªå¤§å¸ˆçš„â€œç»å­¦â€ï¼Œè€Œæ˜¯ä¸‹é¢è¿™äº›ç†å¿µçš„ç»¼åˆåº”ç”¨ï¼š\nå…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰\næå‡ºè€…ä¹‹ä¸€ï¼šDijkstra æ„æ€ï¼šä¸åŒç±»å‹çš„é—®é¢˜ï¼ˆä¸šåŠ¡é€»è¾‘ã€UIã€å­˜å‚¨ã€æ¥å£ï¼‰åˆ†å¼€å¤„ç†ã€‚ å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ â€“ Robert C. Martinï¼ˆUncle Bobï¼‰\nä¸€ä¸ªç±» / æ¨¡å—åªåº”è¯¥æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„ç†ç”±ã€‚ ä¸€ä¸ªâ€œæ—¢å†™è·¯ç”±åˆå†™æ¨¡å‹è°ƒç”¨â€çš„å‡½æ•°ï¼Œå°±è¿åäº†è¿™æ¡ã€‚ å…­è¾¹å½¢æ¶æ„ / ç«¯å£ä¸é€‚é…å™¨ï¼ˆHexagonal Architecture / Ports \u0026amp; Adaptersï¼‰ â€“ Alistair Cockburn\næ ¸å¿ƒé¢†åŸŸé€»è¾‘åœ¨ä¸­é—´ï¼Œå¤–é¢æ˜¯å„ç§é€‚é…å™¨ï¼šHTTPã€CLIã€MQã€å®šæ—¶ä»»åŠ¡â€¦â€¦ æ ¸å¿ƒé€»è¾‘å¯¹â€œå¦‚ä½•å¯¹å¤–æš´éœ²â€ä¸æ•æ„Ÿã€‚ æ•´æ´æ¶æ„ï¼ˆClean Architectureï¼‰ â€“ Uncle Bob\nå†…åœˆï¼šä¸šåŠ¡è§„åˆ™ å¤–åœˆï¼šæ¡†æ¶ã€UIã€æ•°æ®åº“ã€æ¥å£ å†…åœˆä¸èƒ½ä¾èµ–å¤–åœˆï¼Œåè¿‡æ¥å¯ä»¥ã€‚ é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰ â€“ Eric Evans\nå…ˆå®šä¹‰é¢†åŸŸæ¨¡å‹å’Œé¢†åŸŸæœåŠ¡ï¼Œå†è€ƒè™‘ Application / Interface å±‚ã€‚ Unix å“²å­¦\nâ€œç¨‹åºåªåšå¥½ä¸€ä»¶äº‹ï¼Œç„¶åé€šè¿‡ç»„åˆå®ç°å¤æ‚éœ€æ±‚ã€‚â€ æˆ‘ä»¬è¦åšçš„äº‹ï¼Œç”¨å¤§ç™½è¯å°±æ˜¯ï¼š\nâ€œå…ˆå†™è´Ÿè´£â€˜æ€è€ƒâ€™çš„é‚£å¨ä»£ç ï¼ˆå¤§è„‘ï¼‰ï¼Œå†å†³å®šå®ƒæ˜¯è¢« HTTP è°ƒç”¨ï¼Œè¿˜æ˜¯è¢« CLI è°ƒç”¨ï¼Œè¿˜æ˜¯è¢«å®šæ—¶ä»»åŠ¡è°ƒç”¨ã€‚â€\nä¸‰ã€å®è·µæŒ‡å—ï¼šå¦‚ä½•ä»â€œå…ˆå†™æ¥å£â€åˆ‡æ¢åˆ°â€œå…ˆå†™æ ¸å¿ƒâ€ï¼Ÿ ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªAI èŠå¤©åŠŸèƒ½ä½œä¸ºä¾‹å­ï¼Œå¸¦ä½ ä»éœ€æ±‚åˆ°ä»£ç èµ°ä¸€éã€‚\næ­¥éª¤ 1ï¼šç”¨ä¸€å¥è¯æè¿°åŠŸèƒ½ï¼ˆå¯¹è‡ªå·±ä¹Ÿè¦è®²æ¸…æ¥šï¼‰ â€œç”¨æˆ·è¾“å…¥ä¸€æ®µæ–‡å­—ï¼Œæˆ‘æ ¹æ®å†å²å¯¹è¯ï¼Œç”¨ AI æ¨¡å‹ç”Ÿæˆä¸€æ®µå›å¤ï¼Œå¹¶ä¿å­˜æœ¬è½®å¯¹è¯ã€‚â€\nè¿™ä¸ªç®€å•çš„å°å¥å­ï¼Œä¼šå¼ºè¿«ä½ æŠŠæ³¨æ„åŠ›æ”¾åœ¨ä¸šåŠ¡æœ¬èº«ï¼Œè€Œä¸æ˜¯ HTTP ç»†èŠ‚ã€‚\næ­¥éª¤ 2ï¼šå…ˆè®¾è®¡â€œæ ¸å¿ƒå‡½æ•°â€ï¼Œä¸è€ƒè™‘ HTTP / CLI è¿™é‡Œå…ˆå†™ä¸€ä¸ªçº¯ Python å‡½æ•°/ç±»ï¼Œæƒ³è±¡å®ƒå¯ä»¥è¢«ä»»ä½•æ–¹å¼è°ƒç”¨ï¼š\n# chat_core.py from typing import List, Tuple class ChatService: def __init__(self, model_client, history_repo): self.model_client = model_client self.history_repo = history_repo def generate_reply(self, user_id: int, chat_id: int, user_message: str) -\u0026gt; str: # 1. æ‹‰å–å†å²å¯¹è¯ history = self.history_repo.load_history(user_id, chat_id) # history: List[Tuple[str, str]] -\u0026gt; [(role, content), ...] # 2. ç»„è£… prompt prompt = self._build_prompt(history, user_message) # 3. è°ƒç”¨æ¨¡å‹ raw_reply = self.model_client.generate(prompt) # 4. åå¤„ç†ï¼ˆæˆªæ–­ã€è¿‡æ»¤ç­‰ï¼‰ reply = self._post_process(raw_reply) # 5. ä¿å­˜æœ¬è½®å¯¹è¯ self.history_repo.save_message(user_id, chat_id, user_message, reply) return reply def _build_prompt(self, history: List[Tuple[str, str]], user_message: str) -\u0026gt; str: # ç®€åŒ–ç¤ºä¾‹ï¼šæŠŠå†å²æ‹¼æˆçº¯æ–‡æœ¬ messages = [] for role, content in history: messages.append(f\u0026#34;{role.upper()}: {content}\u0026#34;) messages.append(f\u0026#34;USER: {user_message}\u0026#34;) messages.append(\u0026#34;ASSISTANT:\u0026#34;) return \u0026#34;\\n\u0026#34;.join(messages) def _post_process(self, text: str) -\u0026gt; str: # ç¤ºä¾‹ï¼šå»æ‰å¤šä½™ç©ºæ ¼ï¼Œé™åˆ¶æœ€å¤§é•¿åº¦ text = text.strip() return text[:2000] æ³¨æ„è¿™é‡Œï¼š\næ²¡æœ‰ FastAPIã€æ²¡æœ‰ requestã€æ²¡æœ‰ responseï¼Œä»€ä¹ˆ HTTP éƒ½æ²¡æã€‚ åªæœ‰ä¸€ä¸ªæ¸…æ™°çš„è¾“å…¥è¾“å‡ºï¼š(user_id, chat_id, user_message) -\u0026gt; replyã€‚ history_repo å’Œ model_client ä¹Ÿæ˜¯æŠ½è±¡å‡ºæ¥çš„ä¾èµ–ï¼Œå¯ä»¥æ¢å®ç°ã€‚ è¿™æ®µä»£ç ï¼Œå°±æ˜¯ä½ çš„**â€œé¢†åŸŸæœåŠ¡ / æ ¸å¿ƒé€»è¾‘ / å¤§è„‘â€**ã€‚\næ­¥éª¤ 3ï¼šå†™ä¸€ä¸ª CLI é€‚é…å™¨ï¼ˆè¯æ˜ä½ é€»è¾‘æ˜¯ç‹¬ç«‹çš„ï¼‰ å…ˆä¸ç”¨ç®¡å‰ç«¯ã€æ¥å£ï¼Œæä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œè‡ªå·±å°±èƒ½ç©ï¼š\n# cli_chat.py import argparse from chat_core import ChatService from infra.model_client import OpenAIModelClient from infra.history_repo import InMemoryHistoryRepo def main(): parser = argparse.ArgumentParser() parser.add_argument(\u0026#34;--user-id\u0026#34;, type=int, default=1) parser.add_argument(\u0026#34;--chat-id\u0026#34;, type=int, default=1) parser.add_argument(\u0026#34;--message\u0026#34;, type=str, required=True) args = parser.parse_args() # è¿™é‡Œå…ˆç”¨å†…å­˜å®ç°ï¼Œåé¢å†æ¢æ•°æ®åº“ä¹Ÿè¡Œ model_client = OpenAIModelClient(api_key=\u0026#34;YOUR_API_KEY\u0026#34;) history_repo = InMemoryHistoryRepo() service = ChatService(model_client, history_repo) reply = service.generate_reply( user_id=args.user_id, chat_id=args.chat_id, user_message=args.message, ) print(\u0026#34;AI:\u0026#34;, reply) if __name__ == \u0026#34;__main__\u0026#34;: main() è·‘ä¸€ä¸‹ï¼š\npython cli_chat.py --message \u0026#34;ä½ å¥½ï¼Œä»Šå¤©å¿ƒæƒ…æœ‰ç‚¹ä½è½ã€‚\u0026#34; å¦‚æœè¿™ä¸€æ­¥èƒ½è·‘é€šï¼Œä½ å°±å·²ç»æ‹¥æœ‰ä¸€ä¸ªâ€œå’Œ HTTP å®Œå…¨è§£è€¦â€çš„æ ¸å¿ƒèŠå¤©é€»è¾‘äº†ã€‚\næ­¥éª¤ 4ï¼šå†æŠŠå®ƒæŒ‚åˆ° HTTP API ä¸Šï¼ˆFramework åªæ˜¯å¤–å£³ï¼‰ ç°åœ¨æ‰ä¸Š FastAPIï¼ˆæˆ–å…¶ä»–æ¡†æ¶ï¼‰ï¼š\n# api_chat.py from fastapi import APIRouter, Depends from pydantic import BaseModel from chat_core import ChatService from infra.model_client import get_model_client from infra.history_repo import get_history_repo router = APIRouter() class ChatRequest(BaseModel): user_id: int chat_id: int message: str class ChatResponse(BaseModel): reply: str def get_chat_service() -\u0026gt; ChatService: return ChatService( model_client=get_model_client(), history_repo=get_history_repo(), ) @router.post(\u0026#34;/chat/send\u0026#34;, response_model=ChatResponse) def send_message(req: ChatRequest, service: ChatService = Depends(get_chat_service)): reply = service.generate_reply( user_id=req.user_id, chat_id=req.chat_id, user_message=req.message, ) return ChatResponse(reply=reply) ä½ ä¼šå‘ç°ï¼š\nAPI å±‚éå¸¸è–„ï¼Œåªåšï¼š\nå‚æ•°è§£æ è°ƒç”¨æ ¸å¿ƒæœåŠ¡ è¿”å›ç»“æœ ä»»ä½•ä¸šåŠ¡ä¸Šçš„æ”¹åŠ¨ï¼ˆæ¯”å¦‚ï¼šå¢åŠ å¤šè½®å¯¹è¯å‹ç¼©ï¼‰åŸºæœ¬éƒ½åœ¨ ChatService é‡Œå®Œæˆã€‚\nå››ã€å¯è¿è¡Œç¤ºä¾‹ï¼šæœ€ç®€å†…å­˜ç‰ˆ AI èŠå¤©ï¼ˆä¼ªæ¨¡å‹ï¼‰ ä¸‹é¢ç»™ä½ ä¸€ä¸ªå®Œå…¨å¯è¿è¡Œã€çº¯æœ¬åœ°ç‰ˆçš„å°ä¾‹å­â€”â€”ç”¨ä¸€ä¸ªâ€œå‡æ¨¡å‹â€æ¨¡æ‹Ÿ AI å›å¤ï¼Œç”¨å†…å­˜å­˜èŠå¤©è®°å½•ã€‚\næ–‡ä»¶ç»“æ„ project/ â”œâ”€â”€ chat_core.py â”œâ”€â”€ infra.py â”œâ”€â”€ cli_chat.py â””â”€â”€ api_chat.py infra.py # infra.py from typing import List, Tuple, Dict # å‡æ¨¡å‹å®¢æˆ·ç«¯ï¼šç®€å•å›å£° + å›ºå®šå‰ç¼€ class DummyModelClient: def generate(self, prompt: str) -\u0026gt; str: return \u0026#34;ã€å‡æ¨¡å‹å›å¤ã€‘\u0026#34; + prompt.split(\u0026#34;USER:\u0026#34;)[-1].split(\u0026#34;ASSISTANT:\u0026#34;)[0].strip() # å†…å­˜å†å²è®°å½•å­˜å‚¨ class InMemoryHistoryRepo: def __init__(self): # key: (user_id, chat_id) -\u0026gt; List[(role, content)] self._store: Dict[tuple, List[Tuple[str, str]]] = {} def load_history(self, user_id: int, chat_id: int) -\u0026gt; List[Tuple[str, str]]: return self._store.get((user_id, chat_id), []) def save_message(self, user_id: int, chat_id: int, user_msg: str, reply: str): key = (user_id, chat_id) history = self._store.setdefault(key, []) history.append((\u0026#34;user\u0026#34;, user_msg)) history.append((\u0026#34;assistant\u0026#34;, reply)) chat_core.py # chat_core.py from typing import List, Tuple class ChatService: def __init__(self, model_client, history_repo): self.model_client = model_client self.history_repo = history_repo def generate_reply(self, user_id: int, chat_id: int, user_message: str) -\u0026gt; str: history = self.history_repo.load_history(user_id, chat_id) prompt = self._build_prompt(history, user_message) raw_reply = self.model_client.generate(prompt) reply = self._post_process(raw_reply) self.history_repo.save_message(user_id, chat_id, user_message, reply) return reply def _build_prompt(self, history: List[Tuple[str, str]], user_message: str) -\u0026gt; str: messages = [] for role, content in history: messages.append(f\u0026#34;{role.upper()}: {content}\u0026#34;) messages.append(f\u0026#34;USER: {user_message}\u0026#34;) messages.append(\u0026#34;ASSISTANT:\u0026#34;) return \u0026#34;\\n\u0026#34;.join(messages) def _post_process(self, text: str) -\u0026gt; str: return text.strip() cli_chat.py # cli_chat.py import argparse from chat_core import ChatService from infra import DummyModelClient, InMemoryHistoryRepo # ä¸ºäº†ç®€å•ï¼Œè¿™é‡Œç”¨å•ä¾‹ _model_client = DummyModelClient() _history_repo = InMemoryHistoryRepo() def main(): parser = argparse.ArgumentParser() parser.add_argument(\u0026#34;--user-id\u0026#34;, type=int, default=1) parser.add_argument(\u0026#34;--chat-id\u0026#34;, type=int, default=1) parser.add_argument(\u0026#34;--message\u0026#34;, type=str, required=True) args = parser.parse_args() service = ChatService(_model_client, _history_repo) reply = service.generate_reply(args.user_id, args.chat_id, args.message) print(\u0026#34;AI:\u0026#34;, reply) if __name__ == \u0026#34;__main__\u0026#34;: main() è¿è¡Œï¼š\npython cli_chat.py --message \u0026#34;ä½ å¥½ï¼Œæˆ‘æœ‰ç‚¹å¥½å¥‡å…­è¾¹å½¢æ¶æ„æ˜¯å•¥ï¼Ÿ\u0026#34; ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š\nAI: ã€å‡æ¨¡å‹å›å¤ã€‘ä½ å¥½ï¼Œæˆ‘æœ‰ç‚¹å¥½å¥‡å…­è¾¹å½¢æ¶æ„æ˜¯å•¥ï¼Ÿ è™½ç„¶æ¨¡å‹æ˜¯å‡çš„ï¼Œä½†æ¶æ„æ˜¯çœŸå®çš„ï¼šä½ å·²ç»æŠŠâ€œæ ¸å¿ƒé€»è¾‘â€å’Œâ€œè°ƒç”¨æ–¹å¼â€åˆ†å¼€äº†ã€‚\näº”ã€è§£é‡Šä¸åŸç†ï¼šä¸ºä»€ä¹ˆè¦è¿™ä¹ˆæï¼Ÿæœ‰ä»€ä¹ˆæ›¿ä»£æ–¹æ¡ˆï¼Ÿ ä¸ºä»€ä¹ˆâ€œå…ˆå†™æ ¸å¿ƒé€»è¾‘â€æ›´é è°±ï¼Ÿ å¯æµ‹è¯•æ€§å¼º\nä¸éœ€è¦èµ· HTTP æœåŠ¡ã€ä¸éœ€è¦æ•°æ®åº“ï¼Œå°±èƒ½å•å…ƒæµ‹è¯•æ ¸å¿ƒé€»è¾‘ã€‚ TDD / å•å…ƒæµ‹è¯•æ›´å®¹æ˜“è½åœ°ã€‚ å¯å¤ç”¨æ€§é«˜\nä¸€å¥— ChatServiceï¼Œå¯ä»¥è¢« HTTPã€CLIã€WebSocketã€å…¬æœ‰äº‘å‡½æ•°å¤ç”¨ã€‚ é™ä½è€¦åˆï¼Œé™ä½é‡æ„æˆæœ¬\næ¢æ¨¡å‹ã€åŠ æ–°ç­–ç•¥ï¼Œä¸åŠ¨ API å±‚ï¼› æ¢æ¡†æ¶ï¼ˆFastAPI æ¢æˆ Djangoï¼‰ï¼Œä¸åŠ¨æ ¸å¿ƒé€»è¾‘ã€‚ å›¢é˜Ÿåä½œæ›´æ¸…æ™°\næœ‰äººä¸“æ³¨é¢†åŸŸé€»è¾‘ï¼Œæœ‰äººä¸“æ³¨ API ä¸é›†æˆï¼Œæ›´å®¹æ˜“åˆ†å·¥ã€‚ æ›¿ä»£æ–¹æ¡ˆ / å…¶ä»–æµæ´¾ï¼Ÿ ç®€å•å°é¡¹ç›®ï¼šæœ‰äººä¼šè¯´â€œç›´æ¥å†™åœ¨è·¯ç”±é‡Œå°±å®Œäº†â€ã€‚\nå¯¹äºä¸€æ¬¡æ€§å°è„šæœ¬ / demoï¼Œç¡®å®å¯ä»¥è¿™ä¹ˆå¹²ã€‚ ä½†åªè¦ä½ é¢„æ„Ÿè¿™ä¸ªåŠŸèƒ½ä»¥åä¼šå¤æ‚ã€æœ‰æ¼”è¿›ï¼Œå°±è¯¥ä¸€å¼€å§‹å°±åˆ†å±‚ã€‚ é‡æ¡†æ¶é©±åŠ¨å¼€å‘ï¼šä¾‹å¦‚â€œæ‰€æœ‰é€»è¾‘éƒ½æ˜¯ Django View + ORMâ€ã€‚\nå¥½å¤„ï¼šä¸Šæ‰‹å¿«ã€å†™ CRUD å¾ˆçˆ½ã€‚ åå¤„ï¼šé€»è¾‘è¢«æ¡†æ¶é”æ­»ï¼Œæƒ³æŠ½å–çº¯é€»è¾‘å¾ˆè´¹åŠ²ã€‚ â€œå…ˆæ ¸å¿ƒåæ¥å£â€çš„åšæ³•ï¼Œæ›´åå‘é•¿æœŸæŠ•èµ„ï¼Œä¸ä¸€å®šæ˜¯æœ€â€œå¿«å†™å®Œ demoâ€çš„ï¼Œä½†é€šå¸¸æ˜¯æœ€èƒ½ç¨³ä½ä¸­é•¿æœŸå¤æ‚åº¦çš„ã€‚\nå…­ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ Qï¼šä¼šä¸ä¼šåˆ†å±‚åˆ†è¿‡å¤´ï¼Œå†™ä¸€å † classï¼Œæ˜¾å¾—å¾ˆé‡ï¼Ÿ\nå»ºè®®ï¼šä»æœ€å°å¯æ‹†åˆ†å•å…ƒå¼€å§‹ï¼š\nå…ˆæŠŠâ€œæ¨¡å‹è°ƒç”¨+prompt æ„é€ +åå¤„ç†â€æŠ½æˆä¸€ä¸ªç±» / æ¨¡å—ï¼› æ—¥åå†æ…¢æ…¢æŠŠå­˜å‚¨ã€é…ç½®ã€æ—¥å¿—ç­‰æŠ½å‡ºæ¥ã€‚ Qï¼šåˆšå…¥è¡ŒåŒäº‹çœ‹ä¸æ‡‚è¿™ç§ç»“æ„æ€ä¹ˆåŠï¼Ÿ\nå¯ä»¥åœ¨ä»£ç é‡Œå†™ä¸€ç‚¹æ³¨é‡Šï¼š\n# æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ # HTTP é€‚é…å±‚ æˆ–åœ¨ README é‡Œç”»ä¸€ä¸ªç®€å•æ¶æ„å›¾ï¼ˆå†…åœˆæ˜¯ ChatServiceï¼Œå¤–åœˆæ˜¯ API/CLIï¼‰ã€‚\nQï¼šè¿™æ ·ä¼šä¸ä¼šå½±å“æ€§èƒ½ï¼Ÿ\nåˆ†å±‚æœ¬èº«å‡ ä¹ä¸å¸¦æ¥æ˜æ˜¾æ€§èƒ½æŸå¤±ï¼ˆå¤šäº†ä¸€ä¸¤ä¸ªå‡½æ•°è°ƒç”¨è€Œå·²ï¼‰ã€‚ çœŸæ­£çš„æ€§èƒ½ç“¶é¢ˆå¤šåŠåœ¨ I/Oã€ç½‘ç»œã€æ¨¡å‹è°ƒç”¨ä¸Šã€‚ Qï¼šå®‰å…¨ / æƒé™æ§åˆ¶æ”¾åœ¨å“ªä¸€å±‚ï¼Ÿ\nè®¤è¯ / é‰´æƒé€šå¸¸æ”¾åœ¨ API / Application å±‚ï¼› é¢†åŸŸå±‚åªåœ¨â€œæƒé™å·²ç»è¢«ç¡®è®¤â€çš„å‰æä¸‹å·¥ä½œã€‚ ä¸ƒã€æœ€ä½³å®è·µä¸å»ºè®® ç»™ä½ å‡ ç‚¹å¯ä»¥ç›´æ¥å¸¦èµ°çš„ checklistï¼š\næ–°åŠŸèƒ½å¼€å‘æ—¶ï¼šå…ˆé—®è‡ªå·±ä¸¤ä¸ªé—®é¢˜\nâ€œå¦‚æœæ²¡æœ‰ HTTPï¼Œè¿™ä¸ªåŠŸèƒ½èƒ½ä¸èƒ½ä½œä¸ºä¸€ä¸ªçº¯ Python å‡½æ•°å­˜åœ¨ï¼Ÿâ€ â€œå¦‚æœè¦ä»å‘½ä»¤è¡Œè°ƒç”¨è¿™åŠŸèƒ½ï¼Œæˆ‘å¸Œæœ›çš„æ¥å£é•¿ä»€ä¹ˆæ ·ï¼Ÿâ€ å†™è·¯ç”±å‰ï¼Œå…ˆå†™æ ¸å¿ƒå‡½æ•° / æ ¸å¿ƒç±»\næ¯”å¦‚ ChatService.generate_reply(...) API åªè´Ÿè´£æŠŠ HTTP å‚æ•°è½¬æ¢æˆè¿™ä¸ªå‡½æ•°çš„å‚æ•°ã€‚ ä»»ä½•æ—¶å€™éƒ½è­¦æƒ•â€œå·¨å‹è·¯ç”±å‡½æ•°â€\nä¸€æ—¦ä½ å‘ç°ï¼šè·¯ç”±é‡Œæœ‰å¤æ‚çš„ if/elseã€ä¸šåŠ¡åˆ¤æ–­ã€æ¨¡å‹è°ƒç”¨ï¼Œé‚£å°±è¯´æ˜è¯¥æŠ½å‡ºæ¥äº†ã€‚ å¼ºè¿«è‡ªå·±å†™ä¸€ä¸ª CLI æˆ–å°è„šæœ¬\nè®©ä½ ä»â€œæ¡†æ¶æ€ç»´â€åˆ‡æ¢åˆ°â€œåº“æ€ç»´ / é¢†åŸŸæ€ç»´â€ã€‚ è®°ä¸€å¥è¯ï¼š\nâ€œæ¥å£æ˜¯é—¨é¢ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯æˆ¿å­æœ¬èº«ã€‚ é—¨é¢å¯ä»¥é‡åˆ·ï¼Œæˆ¿å­ç»“æ„ä¸€æ—¦çƒ‚æ‰ï¼Œå¾ˆéš¾é‡å»ºã€‚â€\nå…«ã€å°ç»“ / ç»“è®ºï¼šä»â€œå†™æ¥å£â€åˆ°â€œå†™æ ¸å¿ƒâ€çš„æ€ç»´å‡çº§ æœ¬ç¯‡æˆ‘ä»¬åšäº†è¿™äº›äº‹ï¼š\nä»ä¸€ä¸ªçœŸå®åœºæ™¯ï¼ˆAI èŠå¤©åŠŸèƒ½ï¼‰ï¼Œåæ€ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯å…ˆå†™æ¥å£ã€‚\nä¸²èµ·æ¥äº†ï¼š\nå…³æ³¨ç‚¹åˆ†ç¦»ã€å•ä¸€èŒè´£åŸåˆ™ å…­è¾¹å½¢æ¶æ„ / Clean Architecture DDDã€Unix å“²å­¦ ç”¨ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­å±•ç¤ºäº†ï¼š\næ ¸å¿ƒ ChatService CLI é€‚é…å™¨ HTTP API é€‚é…å™¨ ä¸‹ä¸€æ­¥ä½ å¯ä»¥åšçš„äº‹æƒ…ï¼š\næŠŠä½ ç°æœ‰é¡¹ç›®é‡Œâ€œåˆå¤§åˆä¹±çš„è·¯ç”±å‡½æ•°â€æŒ‘ä¸€ä¸ªå‡ºæ¥ï¼› æŒ‰æ–‡ä¸­ç¤ºä¾‹ï¼ŒæŠŠâ€œæ¨¡å‹è°ƒç”¨ + ä¸šåŠ¡åˆ¤æ–­â€æŠ½æˆä¸€ä¸ª XXXServiceï¼› å°è¯•å†™ä¸€ä¸ª CLI å…¥å£ç›´æ¥è°ƒç”¨è¿™ä¸ª Serviceï¼ŒéªŒè¯ä½ å·²ç»åˆ†ç¦»äº†æ ¸å¿ƒä¸æ¥å£ã€‚ è¿™å°±æ˜¯ä½ ä»â€œæ™®é€š CRUD åç«¯â€å‘â€œæ‡‚æ¶æ„çš„å·¥ç¨‹å¸ˆâ€è¿ˆå‡ºçš„ä¸€æ­¥ã€‚\nä¹ã€å‚è€ƒä¸å»¶ä¼¸é˜…è¯» ä»¥ä¸‹æ˜¯æ¨èæ–¹å‘ï¼Œä½ å¯ä»¥æŒ‰å…³é”®å­—æœç´¢å¯¹åº”èµ„æ–™ï¼š\nEdsger Dijkstra â€“ Separation of Concerns\nRobert C. Martin â€“ Clean Architecture / Agile Software Development, Principles, Patterns, and Practices\nAlistair Cockburn â€“ Hexagonal Architecture (Ports \u0026amp; Adapters)\nEric Evans â€“ Domain-Driven Design: Tackling Complexity in the Heart of Software\nâ€œUnix Philosophyâ€ ç›¸å…³æ–‡ç« ï¼š\nâ€œDo one thing and do it wellâ€ åã€å…ƒä¿¡æ¯ï¼ˆMeta ä¿¡æ¯ï¼‰ é¢„è®¡é˜…è¯»æ—¶é•¿ï¼š10â€“15 åˆ†é’Ÿ\næ ‡ç­¾ï¼ˆTagsï¼‰ï¼š\nPython åç«¯ æ¶æ„è®¾è®¡ å…­è¾¹å½¢æ¶æ„ Clean Architecture DDD AI åº”ç”¨å¼€å‘ SEO å…³é”®è¯ï¼ˆå¯é€‰ï¼‰ï¼š\nPython æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ å…­è¾¹å½¢æ¶æ„ç¤ºä¾‹ Clean Architecture å®æˆ˜ FastAPI åˆ†å±‚è®¾è®¡ AI èŠå¤©æœåŠ¡æ¶æ„ å…ƒæè¿°ï¼ˆMeta Descriptionï¼‰ï¼š\næœ¬æ–‡é¢å‘ Python åç«¯ä¸ AI åº”ç”¨å¼€å‘è€…ï¼Œè®²è§£å¦‚ä½•åœ¨å®ç°æ–°åŠŸèƒ½æ—¶ä¼˜å…ˆè®¾è®¡æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œå†é€šè¿‡å…­è¾¹å½¢æ¶æ„ä¸ Clean Architecture çš„æ€æƒ³ï¼Œå°†å…¶æš´éœ²ä¸º HTTP API æˆ– CLI å·¥å…·ï¼Œå¸®åŠ©ä½ ä»â€œå†™æ¥å£çš„å·¥ç¨‹å¸ˆâ€æˆé•¿ä¸ºâ€œæ‡‚æ¶æ„çš„å·¥ç¨‹å¸ˆâ€ã€‚\nåä¸€ã€è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ âœï¸ è¯•ä¸€è¯•ï¼š é€‰ä½ å½“å‰é¡¹ç›®ä¸­çš„ä¸€ä¸ªæ¥å£ï¼ŒæŠŠæ ¸å¿ƒé€»è¾‘æŠ½å‡ºæ¥åšæˆä¸€ä¸ª Service ç±»ï¼Œå†è¡¥ä¸€ä¸ª CLI è°ƒç”¨å®ƒã€‚\nğŸ§© æ‰©å±•ç»ƒä¹ ï¼š åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œå†åŠ ä¸€ä¸ªâ€œå®šæ—¶ä»»åŠ¡â€çš„å…¥å£ï¼Œè®©åŒä¸€å¥—æ ¸å¿ƒé€»è¾‘æ”¯æŒï¼šAPI + CLI + å®šæ—¶ä»»åŠ¡ã€‚\nğŸ’¬ äº¤æµä¸åé¦ˆï¼š å¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥æŠŠä½ é‡æ„å‰åçš„ä»£ç ç»“æ„ï¼ˆç›®å½•æˆ–ä¼ªä»£ç ï¼‰å‘ç»™æˆ‘ï¼Œæˆ‘å¯ä»¥å¸®ä½ ä¸€èµ·çœ‹çœ‹è¿˜èƒ½æ€ä¹ˆä¼˜åŒ–ï¼Œé¡ºä¾¿å¸®ä½ æ‰“ç£¨æˆä¸€ç¯‡å¯¹å¤–å¯å‘çš„æŠ€æœ¯åˆ†äº«æˆ–åšå®¢ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E4%BB%8E%E5%86%99%E8%B7%AF%E7%94%B1%E5%88%B0%E5%86%99%E5%A4%A7%E8%84%91python%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%A6%82%E4%BD%95%E5%85%88%E6%90%9E%E5%AE%9A%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%E5%86%8D%E8%80%83%E8%99%91api/","summary":"\u003ch1 id=\"æ ‡é¢˜\"\u003e\u003cstrong\u003eæ ‡é¢˜\u003c/strong\u003e\u003c/h1\u003e\n\u003cp\u003eä»å†™è·¯ç”±åˆ°å†™â€œå¤§è„‘â€ï¼šPython å·¥ç¨‹å¸ˆå¦‚ä½•å…ˆæå®šæ ¸å¿ƒé€»è¾‘ï¼Œå†è€ƒè™‘ API\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"å‰¯æ ‡é¢˜--æ‘˜è¦\"\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/h2\u003e\n\u003cp\u003eåˆšå…¥è¡Œæ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¸€ä¸Šæ¥å°±å†™è·¯ç”±ã€è®¾è®¡æ¥å£ã€æƒ³ chat_id / message_id æ€ä¹ˆå­˜ï¼Œå´å‘ç°çœŸæ­£çš„â€œæ™ºåŠ›æ´»â€â€”â€”æ ¸å¿ƒé€»è¾‘â€”â€”æ€»æ˜¯æ‹–åˆ°åé¢ã€‚è¿™ç¯‡æ–‡ç« å¸¦ä½ ä»ã€Œå…ˆå†™æ¥å£ã€çš„æ€ç»´ï¼Œå‡çº§åˆ°ã€Œå…ˆå†™å¤§è„‘ï¼Œå†æ¥å¤–å£³ã€ï¼Œå¹¶ä¸²èµ·æ¥å…­è¾¹å½¢æ¶æ„ã€Clean Architectureã€DDD ç­‰èƒŒåçš„ç»å…¸ç†å¿µã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"ç›®æ ‡è¯»è€…\"\u003eç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cp\u003eé€‚åˆè¿™äº›åŒå­¦é˜…è¯»ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e1â€“3 å¹´ç»éªŒ\u003c/strong\u003e çš„ Python åç«¯å·¥ç¨‹å¸ˆ / AI åº”ç”¨å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eæ­£åœ¨ç”¨ \u003cstrong\u003eFastAPI / Django / Flask\u003c/strong\u003e ç­‰æ¡†æ¶å†™ API çš„å·¥ç¨‹å¸ˆ\u003c/li\u003e\n\u003cli\u003eæƒ³ä»â€œCRUD æ¬ç –å·¥â€è¿›åŒ–ä¸ºâ€œæ‡‚è®¾è®¡ã€èƒ½æŠ½è±¡â€çš„å·¥ç¨‹å¸ˆ\u003c/li\u003e\n\u003cli\u003eå¯¹ \u003cstrong\u003eå…­è¾¹å½¢æ¶æ„ / Clean Architecture / DDD\u003c/strong\u003e æœ‰ç‚¹å¥½å¥‡ä½†æ²¡ç³»ç»Ÿçœ‹è¿‡ä¹¦çš„äºº\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch1 id=\"ä¸€èƒŒæ™¯--åŠ¨æœºä¸ºä»€ä¹ˆå…ˆå†™æ¥å£ä¼šå¡æ­»è‡ªå·±\"\u003eä¸€ã€èƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆâ€œå…ˆå†™æ¥å£â€ä¼šå¡æ­»è‡ªå·±ï¼Ÿ\u003c/h1\u003e\n\u003cp\u003eå¾ˆå¤šåˆšå…¥è¡Œçš„ Python å·¥ç¨‹å¸ˆï¼ˆåŒ…æ‹¬ä½ æˆ‘ï¼‰ä¼šæœ‰è¿™æ ·çš„æµç¨‹ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eäº§å“æä¸€ä¸ªæ–°éœ€æ±‚ï¼šåšä¸€ä¸ª AI èŠå¤©åŠŸèƒ½ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ‰“å¼€ç¼–è¾‘å™¨ï¼Œç¬¬ä¸€ååº”å°±æ˜¯ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè®¾è®¡ URLï¼š\u003ccode\u003ePOST /api/chat/send_message\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eå¼€å§‹å†™ routerï¼š\u003ccode\u003e@app.post(\u0026quot;/chat/send\u0026quot;)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eæƒ³ request body å‚æ•°é•¿ä»€ä¹ˆæ ·ï¼š\u003ccode\u003echat_id / message_id / user_id / content\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eæƒ³æ•°æ®åº“è¡¨ç»“æ„ï¼š\u003ccode\u003echats\u003c/code\u003eï¼Œ\u003ccode\u003emessages\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå†™äº†ä¸€å † APIã€schemaã€modelã€è¿ç§»è„šæœ¬ä¹‹åï¼Œæ‰æƒ³èµ·æ¥ï¼š\n\u003cstrong\u003eâ€œé‚£ AI å›å¤åˆ°åº•æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Ÿâ€\u003c/strong\u003e\u003c/p\u003e","title":"ä»å†™è·¯ç”±åˆ°å†™\"å¤§è„‘\":Pythonå·¥ç¨‹å¸ˆå¦‚ä½•å…ˆæå®šæ ¸å¿ƒé€»è¾‘,å†è€ƒè™‘API"},{"content":"ğŸ§­ æ ‡é¢˜ï¼š å¦‚ä½•ç¼–å†™ä¸€ä»½åˆæ ¼çš„ API æ–‡æ¡£ï¼šä» Tony Tam çš„ Swagger åˆ°ç°ä»£ OpenAPI å®è·µ\nâœï¸ å‰¯æ ‡é¢˜ / æ‘˜è¦ æƒ³è®©ä½ çš„ API è¢«å¼€å‘è€…çœŸæ­£ç”¨å¾—èˆ’æœï¼Ÿè¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ä»ç†å¿µåˆ°å®è·µï¼Œå…¨é¢æŒæ¡ä¸€ä»½é«˜è´¨é‡ API æ–‡æ¡£çš„ç»“æ„ã€ç¤ºä¾‹ä¸æœ€ä½³è§„èŒƒï¼ŒåŸºäº Tony Tam æå‡ºçš„ Swagger / OpenAPI æ ‡å‡†ã€‚\nğŸ¯ ç›®æ ‡è¯»è€… åˆå­¦è€…ï¼šæƒ³äº†è§£ API æ–‡æ¡£æ ‡å‡†ç»“æ„çš„äººã€‚ ä¸­çº§å¼€å‘è€…ï¼šå¸Œæœ›æå‡æ¥å£æ–‡æ¡£å¯ç»´æŠ¤æ€§ä¸è§„èŒƒæ€§çš„äººã€‚ æ¶æ„å¸ˆ / æŠ€æœ¯è´Ÿè´£äººï¼šè´Ÿè´£ API è®¾è®¡è§„èŒƒåˆ¶å®šä¸å›¢é˜Ÿåä½œçš„äººã€‚ ğŸ’¡ èƒŒæ™¯ / åŠ¨æœº è®¸å¤šå¼€å‘å›¢é˜Ÿçš„ API æ–‡æ¡£å­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š\nä¿¡æ¯é›¶æ•£ï¼Œç¼ºä¹ç»Ÿä¸€æ ¼å¼ï¼› æ›´æ–°æ»åï¼Œå¼€å‘ä¸æ–‡æ¡£è„±èŠ‚ï¼› æ— æ³•ç›´æ¥ç”¨äºè‡ªåŠ¨ç”Ÿæˆæˆ–æµ‹è¯•ã€‚ Tony Tam äº 2010 å¹´æå‡ºçš„ Swagger è§„èŒƒï¼ˆåæ›´åä¸º OpenAPIï¼‰ æ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ã€‚å¦‚ä»Šï¼Œå®ƒå·²æˆä¸º RESTful API æ–‡æ¡£çš„äº‹å®æ ‡å‡†ï¼Œè¢« Googleã€Amazonã€Stripe ç­‰å…¬å¸å¹¿æ³›é‡‡ç”¨ã€‚\nğŸ” æ ¸å¿ƒæ¦‚å¿µ æ¦‚å¿µ è¯´æ˜ API æ–‡æ¡£ æè¿°åº”ç”¨ç¨‹åºæ¥å£å¦‚ä½•è¢«è°ƒç”¨ã€è¯·æ±‚ä¸å“åº”çš„æŠ€æœ¯è¯´æ˜ä¹¦ã€‚ Swagger / OpenAPI ä¸€ç§ç”¨äºå®šä¹‰ã€ç”Ÿæˆã€æµ‹è¯• REST API çš„æ ‡å‡†åŒ–è§„èŒƒã€‚ Endpointï¼ˆç«¯ç‚¹ï¼‰ API ä¸­å¯è®¿é—®çš„å…·ä½“è·¯å¾„ï¼ˆå¦‚ /users/{id}ï¼‰ã€‚ Schemaï¼ˆæ•°æ®æ¨¡å‹ï¼‰ å®šä¹‰è¯·æ±‚ä¸å“åº”çš„å­—æ®µç»“æ„ã€‚ ğŸ§° å®è·µæŒ‡å— / æ­¥éª¤ æ˜ç¡®æ–‡æ¡£ç»“æ„\næ¦‚è¿°ï¼ˆOverviewï¼‰ é‰´æƒæœºåˆ¶ï¼ˆAuthenticationï¼‰ æ¥å£å®šä¹‰ï¼ˆEndpointsï¼‰ æ•°æ®æ¨¡å‹ï¼ˆSchemasï¼‰ é”™è¯¯ç ä¸ç¤ºä¾‹ï¼ˆErrors \u0026amp; Examplesï¼‰ ä½¿ç”¨ OpenAPI è§„èŒƒç»„ç»‡æ–‡æ¡£\nå»ºè®®é‡‡ç”¨ YAML æ ¼å¼ï¼Œæ”¯æŒæœºå™¨å¯è¯»ä¸å¯è§†åŒ–ã€‚ æ¨èå·¥å…·é“¾\nç¼–è¾‘å™¨ï¼šSwagger Editorã€Stoplight Studioã€VS Code + YAML æ’ä»¶ æ–‡æ¡£å±•ç¤ºï¼šSwagger UI / ReDoc è‡ªåŠ¨ç”Ÿæˆï¼šé€šè¿‡æ³¨é‡Šç”Ÿæˆï¼ˆå¦‚ Springdocã€FastAPIã€NestJSï¼‰ ğŸ’» å¯è¿è¡Œç¤ºä¾‹ openapi: 3.0.0 info: title: ç”¨æˆ·ç®¡ç† API version: 1.0.0 description: ç”¨äºç®¡ç†ç³»ç»Ÿä¸­ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ã€‚ servers: - url: https://api.example.com/v1 paths: /users/{id}: get: summary: è·å–ç”¨æˆ·ä¿¡æ¯ parameters: - name: id in: path required: true description: ç”¨æˆ·ID schema: type: string responses: \u0026#39;200\u0026#39;: description: è¯·æ±‚æˆåŠŸ content: application/json: schema: $ref: \u0026#39;#/components/schemas/User\u0026#39; \u0026#39;404\u0026#39;: description: ç”¨æˆ·ä¸å­˜åœ¨ components: schemas: User: type: object properties: id: type: string description: ç”¨æˆ·å”¯ä¸€æ ‡è¯† name: type: string description: ç”¨æˆ·å email: type: string description: é‚®ç®±åœ°å€ âœ… è¿™ä¸ªæ–‡æ¡£å¯ä»¥ç›´æ¥å¯¼å…¥ Swagger Editor è¿›è¡Œå¯è§†åŒ–æŸ¥çœ‹ä¸æµ‹è¯•ã€‚\nâš™ï¸ è§£é‡Šä¸åŸç† ä¸ºä»€ä¹ˆä½¿ç”¨ OpenAPIï¼Ÿ\nç»Ÿä¸€ï¼šé¿å…ä¸åŒå›¢é˜Ÿè‡ªå®šä¹‰æ ¼å¼ã€‚ å¯è‡ªåŠ¨åŒ–ï¼šç”Ÿæˆ SDKã€æµ‹è¯•ç”¨ä¾‹ã€Mock æœåŠ¡ã€‚ å¯äº¤äº’ï¼šSwagger UI æä¾›åœ¨çº¿è¯•ç”¨æ¥å£åŠŸèƒ½ã€‚ æ›¿ä»£æ–¹æ¡ˆï¼š\nRAMLï¼ˆç”± MuleSoft æ¨å‡ºï¼‰ API Blueprintï¼ˆæ›´åå‘æ–‡æ¡£åŒ–è€Œéäº¤äº’æ€§ï¼‰ OpenAPI ä¹‹æ‰€ä»¥æ›´æµè¡Œï¼Œæ˜¯å› ä¸ºå…¶ç”Ÿæ€å®Œå–„ä¸å·¥å…·æ”¯æŒä¸°å¯Œã€‚ âš ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ åŸå›  è§£å†³æ–¹æ¡ˆ æ–‡æ¡£ä¸ä»£ç ä¸åŒæ­¥ äººå·¥ç»´æŠ¤ ä½¿ç”¨ä»£ç æ³¨é‡Šè‡ªåŠ¨ç”Ÿæˆï¼ˆå¦‚ FastAPIã€Springdocï¼‰ JSON Schema å¤ªå¤æ‚ ç»“æ„åµŒå¥—æ·± ä½¿ç”¨ $ref æ‹†åˆ†æ¨¡å‹ å“åº”ç¤ºä¾‹é—æ¼å­—æ®µ ç¼ºä¹ mock æµ‹è¯• ä½¿ç”¨ Swagger Mock Server éªŒè¯ç»“æ„ ğŸŒŸ æœ€ä½³å®è·µä¸å»ºè®® åšæŒç‰ˆæœ¬åŒ–ï¼šåœ¨è·¯å¾„ä¸­åŒ…å« /v1/ ç­‰ç‰ˆæœ¬å·ã€‚ æ ‡å‡†åŒ–é”™è¯¯ç ï¼šç»Ÿä¸€è¿”å›æ ¼å¼ï¼ˆå¦‚ {code, message, data}ï¼‰ã€‚ ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥ï¼šæ¨èä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆå·¥å…·ã€‚ æ·»åŠ çœŸå®ç¤ºä¾‹ï¼šå¼€å‘è€…æ›´å®¹æ˜“ç†è§£ã€‚ ä½¿ç”¨ CI æ ¡éªŒæ–‡æ¡£åˆæ³•æ€§ï¼šé˜²æ­¢éƒ¨ç½²æ— æ•ˆæ–‡æ¡£ã€‚ ğŸ§¾ å°ç»“ / ç»“è®º ä¸€ä»½ä¼˜ç§€çš„ API æ–‡æ¡£ä¸ä»…ä»…æ˜¯æŠ€æœ¯èµ„æ–™ï¼Œæ›´æ˜¯å›¢é˜Ÿåä½œçš„æ¡¥æ¢ã€‚ Tony Tam çš„ Swagger æ€æƒ³æ ¸å¿ƒåœ¨äºâ€”â€”â€œè®©æœºå™¨å¯è¯»ã€è®©äººç±»å¯ç”¨â€ã€‚ æŒæ¡ OpenAPI ç»“æ„ä¸å·¥å…·ï¼Œä½ çš„ API å°†æ›´æ˜“ç»´æŠ¤ã€æ›´æ˜“æµ‹è¯•ã€æ›´æ˜“åä½œã€‚\nğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯» OpenAPI å®˜æ–¹æ–‡æ¡£ Swagger Editor åœ¨çº¿ç¼–è¾‘å™¨ ReDoc å¯è§†åŒ–å·¥å…· RESTful API Design Guidelines â€” Microsoft ğŸ§­ å…ƒä¿¡æ¯ é¢„è®¡é˜…è¯»æ—¶é•¿ï¼š7 åˆ†é’Ÿ æ ‡ç­¾ï¼šAPIæ–‡æ¡£ã€Swaggerã€OpenAPIã€å¼€å‘è§„èŒƒã€Tony Tam SEOå…³é”®è¯ï¼šAPIæ–‡æ¡£è§„èŒƒã€Swagger æ•™ç¨‹ã€OpenAPI ç¤ºä¾‹ã€RESTful è®¾è®¡ å…ƒæè¿°ï¼šæœ¬æŒ‡å—åŸºäº Swagger / OpenAPI æ ‡å‡†ï¼Œä»‹ç»ä¸€ä»½åˆæ ¼ API æ–‡æ¡£çš„ç»“æ„ã€ç¤ºä¾‹ä¸æœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºé«˜è´¨é‡æ¥å£è¯´æ˜ã€‚ ğŸš€ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ’¡ ç«‹å³è¯•è¯•ï¼š\næ‰“å¼€ Swagger Editorï¼Œå¤åˆ¶ä¸Šæ–¹ YAML ç¤ºä¾‹ï¼› æˆ–è€…è®¢é˜…æœ¬åšå®¢ç³»åˆ—ã€ŠAPI è®¾è®¡å…¨æŒ‡å—ã€‹ï¼Œä¸‹ä¸€ç¯‡å°†è®²è§£ å¦‚ä½•ç”¨ OpenAPI è‡ªåŠ¨ç”Ÿæˆå‰åç«¯ SDKã€‚ ","permalink":"http://localhost:1313/jeanblog/posts/api%E6%A0%87%E5%87%86/","summary":"\u003ch1 id=\"-æ ‡é¢˜\"\u003eğŸ§­ æ ‡é¢˜ï¼š\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eå¦‚ä½•ç¼–å†™ä¸€ä»½åˆæ ¼çš„ API æ–‡æ¡£ï¼šä» Tony Tam çš„ Swagger åˆ°ç°ä»£ OpenAPI å®è·µ\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å‰¯æ ‡é¢˜--æ‘˜è¦\"\u003eâœï¸ å‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/h2\u003e\n\u003cp\u003eæƒ³è®©ä½ çš„ API è¢«å¼€å‘è€…çœŸæ­£ç”¨å¾—èˆ’æœï¼Ÿè¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ä»ç†å¿µåˆ°å®è·µï¼Œå…¨é¢æŒæ¡ä¸€ä»½é«˜è´¨é‡ API æ–‡æ¡£çš„ç»“æ„ã€ç¤ºä¾‹ä¸æœ€ä½³è§„èŒƒï¼ŒåŸºäº Tony Tam æå‡ºçš„ Swagger / OpenAPI æ ‡å‡†ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ç›®æ ‡è¯»è€…\"\u003eğŸ¯ ç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eåˆå­¦è€…ï¼šæƒ³äº†è§£ API æ–‡æ¡£æ ‡å‡†ç»“æ„çš„äººã€‚\u003c/li\u003e\n\u003cli\u003eä¸­çº§å¼€å‘è€…ï¼šå¸Œæœ›æå‡æ¥å£æ–‡æ¡£å¯ç»´æŠ¤æ€§ä¸è§„èŒƒæ€§çš„äººã€‚\u003c/li\u003e\n\u003cli\u003eæ¶æ„å¸ˆ / æŠ€æœ¯è´Ÿè´£äººï¼šè´Ÿè´£ API è®¾è®¡è§„èŒƒåˆ¶å®šä¸å›¢é˜Ÿåä½œçš„äººã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯--åŠ¨æœº\"\u003eğŸ’¡ èƒŒæ™¯ / åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eè®¸å¤šå¼€å‘å›¢é˜Ÿçš„ API æ–‡æ¡£å­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä¿¡æ¯é›¶æ•£ï¼Œç¼ºä¹ç»Ÿä¸€æ ¼å¼ï¼›\u003c/li\u003e\n\u003cli\u003eæ›´æ–°æ»åï¼Œå¼€å‘ä¸æ–‡æ¡£è„±èŠ‚ï¼›\u003c/li\u003e\n\u003cli\u003eæ— æ³•ç›´æ¥ç”¨äºè‡ªåŠ¨ç”Ÿæˆæˆ–æµ‹è¯•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTony Tam äº 2010 å¹´æå‡ºçš„ \u003cstrong\u003eSwagger è§„èŒƒï¼ˆåæ›´åä¸º OpenAPIï¼‰\u003c/strong\u003e æ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ã€‚å¦‚ä»Šï¼Œå®ƒå·²æˆä¸º RESTful API æ–‡æ¡£çš„äº‹å®æ ‡å‡†ï¼Œè¢« Googleã€Amazonã€Stripe ç­‰å…¬å¸å¹¿æ³›é‡‡ç”¨ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µ\"\u003eğŸ” æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ¦‚å¿µ\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eAPI æ–‡æ¡£\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæè¿°åº”ç”¨ç¨‹åºæ¥å£å¦‚ä½•è¢«è°ƒç”¨ã€è¯·æ±‚ä¸å“åº”çš„æŠ€æœ¯è¯´æ˜ä¹¦ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eSwagger / OpenAPI\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸€ç§ç”¨äºå®šä¹‰ã€ç”Ÿæˆã€æµ‹è¯• REST API çš„æ ‡å‡†åŒ–è§„èŒƒã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eEndpointï¼ˆç«¯ç‚¹ï¼‰\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eAPI ä¸­å¯è®¿é—®çš„å…·ä½“è·¯å¾„ï¼ˆå¦‚ \u003ccode\u003e/users/{id}\u003c/code\u003eï¼‰ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eSchemaï¼ˆæ•°æ®æ¨¡å‹ï¼‰\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå®šä¹‰è¯·æ±‚ä¸å“åº”çš„å­—æ®µç»“æ„ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæŒ‡å—--æ­¥éª¤\"\u003eğŸ§° å®è·µæŒ‡å— / æ­¥éª¤\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eæ˜ç¡®æ–‡æ¡£ç»“æ„\u003c/strong\u003e\u003c/p\u003e","title":"apiæ ‡å‡†"},{"content":"ğŸ”Œ ä¸ºä»€ä¹ˆè®©å‰ç«¯æ‰§è¡Œ Chat Completionï¼šä¸€å¥—é€šç”¨çš„å¤šæ¨¡å‹æµå¼å¯¹è¯æ¶æ„è®¾è®¡ å‰¯æ ‡é¢˜ / æ‘˜è¦ åœ¨ç°ä»£ AI èŠå¤©ç³»ç»Ÿä¸­ï¼Œå¾ˆå¤šäººä¼šé—®ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨åç«¯è°ƒç”¨ OpenAI APIï¼Ÿ æœ¬æ–‡å°†å¸¦ä½ ç†è§£ä¸€ç§æ›´çµæ´»çš„æ¶æ„â€”â€”è®©å‰ç«¯æ‰¿æ‹…æ¨ç†æ‰§è¡Œï¼Œåç«¯è´Ÿè´£è°ƒåº¦å’ŒçŠ¶æ€åŒæ­¥ã€‚é€‚åˆéœ€è¦æ”¯æŒå¤šæ¨¡å‹ã€æœ¬åœ°æ¨ç†æˆ–ç”¨æˆ·è‡ªå¸¦ API Key çš„å¼€å‘è€…ã€‚\nç›®æ ‡è¯»è€…\nAI èŠå¤©åº”ç”¨å¼€å‘è€… WebSocket / Socket.IO å®è·µè€… æƒ³æ„å»ºå¤šæ¨¡å‹ã€å¤šç«¯åä½œèŠå¤©ç³»ç»Ÿçš„æ¶æ„å¸ˆ ğŸ§  èƒŒæ™¯ / åŠ¨æœº ä¼ ç»Ÿçš„èŠå¤©åç«¯å¾€å¾€ç›´æ¥åœ¨æœåŠ¡å™¨è°ƒç”¨ OpenAI APIï¼š\nresp = client.chat.completions.create(model=\u0026#34;gpt-4o\u0026#34;, messages=messages) è™½ç„¶ç®€å•ï¼Œä½†å¸¦æ¥å‡ ä¸ªç°å®é—®é¢˜ï¼š\næ‰€æœ‰è¯·æ±‚éƒ½æ¶ˆè€—æœåŠ¡å™¨çš„ Keyï¼Œæˆæœ¬é«˜ä¸”éš¾è¿½è¸ªï¼› æ— æ³•æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ Keyï¼ˆBYOK æ¨¡å¼ï¼‰ï¼› æ— æ³•è¿æ¥ç”¨æˆ·æœ¬åœ°æ¨ç†ï¼ˆå¦‚ Ollamaã€LM Studioï¼‰ï¼› æ— æ³•åˆ‡æ¢ä¸åŒæ¨¡å‹æˆ– API Base URLï¼› å‰åç«¯çŠ¶æ€ä¸åŒæ­¥ï¼Œä¸åˆ©äºæµå¼æ¶ˆæ¯æ¨é€ã€‚ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œä¸€äº›å¼€æºç³»ç»Ÿï¼ˆå¦‚ Open-WebUIã€Chatbot-UI å¢å¼ºç‰ˆï¼‰é‡‡ç”¨äº†æ›´çµæ´»çš„ Socket.IO åŒå‘é€šä¿¡æ¶æ„ã€‚ æœåŠ¡ç«¯è´Ÿè´£ã€Œè°ƒåº¦ä¸çŠ¶æ€æµã€ï¼Œå‰ç«¯è´Ÿè´£ã€Œæ‰§è¡Œä¸å›ä¼ ã€ã€‚\nğŸ§© æ ¸å¿ƒæ¦‚å¿µ æ¦‚å¿µ è¯´æ˜ Socket.IO åŸºäº WebSocket çš„å®æ—¶åŒå‘é€šä¿¡åº“ï¼Œæ”¯æŒäº‹ä»¶ä¸å›è°ƒã€‚ event_emitter æœåŠ¡ç«¯å‘å‰ç«¯å¹¿æ’­äº‹ä»¶ï¼ˆæ¨é€æ¶ˆæ¯/çŠ¶æ€ï¼‰ã€‚ event_caller (sio.call) æœåŠ¡ç«¯è¯·æ±‚å‰ç«¯æ‰§è¡Œä»»åŠ¡ï¼ˆRPCï¼‰ï¼Œå¹¶ç­‰å¾…å‰ç«¯ callback è¿”å›ã€‚ request:chat:completion ä¸€ç§è‡ªå®šä¹‰äº‹ä»¶ç±»å‹ï¼Œç”¨äºè¯·æ±‚å‰ç«¯æ‰§è¡Œ chat completionã€‚ BYOK æ¨¡å¼ â€œBring Your Own Keyâ€ï¼Œç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„ OpenAI Key è°ƒç”¨ APIã€‚ Executor æ¶æ„ å‰ç«¯æ‰¿æ‹…æ¨ç†ä»»åŠ¡çš„æ‰§è¡Œè€…ï¼Œåç«¯ä½œä¸ºåè°ƒè€…ã€‚ ğŸ§­ å®è·µæŒ‡å— / æ­¥éª¤ 1ï¸âƒ£ æœåŠ¡ç«¯å‘é€è°ƒç”¨è¯·æ±‚ res = await event_caller({ \u0026#34;type\u0026#34;: \u0026#34;request:chat:completion\u0026#34;, \u0026#34;data\u0026#34;: { \u0026#34;form_data\u0026#34;: form_data, \u0026#34;model\u0026#34;: models[form_data[\u0026#34;model\u0026#34;]], \u0026#34;channel\u0026#34;: channel, \u0026#34;session_id\u0026#34;: session_id, }, }) è¿™é‡Œçš„ event_caller ä½¿ç”¨ sio.call() å‘é€äº‹ä»¶ç»™æŒ‡å®šå®¢æˆ·ç«¯ï¼Œå¹¶ç­‰å¾… callback è¿”å›ã€‚\n2ï¸âƒ£ å‰ç«¯å“åº”è¯·æ±‚å¹¶æ‰§è¡Œæ¨¡å‹è°ƒç”¨ else if (type === \u0026#39;request:chat:completion\u0026#39;) { const { session_id, channel, form_data, model } = data; const [res, controller] = await chatCompletion( OPENAI_API_KEY, form_data, OPENAI_API_URL ); if (form_data?.stream ?? false) { cb({ status: true }); // âœ… å›è°ƒç»™åç«¯ï¼ˆéé˜»å¡ï¼‰ const reader = res.body.getReader(); const decoder = new TextDecoder(); while (true) { const { done, value } = await reader.read(); if (done) break; const chunk = decoder.decode(value, { stream: true }); const lines = chunk.split(\u0026#39;\\n\u0026#39;).filter((line) =\u0026gt; line.trim() !== \u0026#39;\u0026#39;); for (const line of lines) { $socket?.emit(channel, line); // æ¨é€æµå¼è¾“å‡º } } } else { const data = await res.json(); cb(data); // âœ… éæµå¼æ¨¡å¼ï¼Œç›´æ¥è¿”å›ç»“æœ } } 3ï¸âƒ£ æœåŠ¡ç«¯æ¥æ”¶è¿”å›å€¼å¹¶ç»§ç»­é€»è¾‘ log.info(f\u0026#34;res: {res}\u0026#34;) # ä¾‹å¦‚ res = {\u0026#34;status\u0026#34;: True} æˆ– {\u0026#34;result\u0026#34;: \u0026#34;AI å›å¤å†…å®¹\u0026#34;} æ­¤æ—¶ï¼Œres å°±æ˜¯å‰ç«¯æ‰§è¡Œå®Œæ¯•åå›ä¼ çš„ç»“æœã€‚\nâš™ï¸ å¯è¿è¡Œç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ # main.py from fastapi import FastAPI import socketio, asyncio sio = socketio.AsyncServer(async_mode=\u0026#34;asgi\u0026#34;) app = FastAPI() socket_app = socketio.ASGIApp(sio) app.mount(\u0026#34;/ws\u0026#34;, socket_app) @app.post(\u0026#34;/api/chat/completions\u0026#34;) async def chat_completion(): request_info = {\u0026#34;session_id\u0026#34;: \u0026#34;abc123\u0026#34;, \u0026#34;chat_id\u0026#34;: \u0026#34;chat_001\u0026#34;} event_caller = get_event_call(request_info) res = await event_caller({ \u0026#34;type\u0026#34;: \u0026#34;request:chat:completion\u0026#34;, \u0026#34;data\u0026#34;: {\u0026#34;form_data\u0026#34;: {\u0026#34;model\u0026#34;: \u0026#34;gpt-4o\u0026#34;, \u0026#34;messages\u0026#34;: [{\u0026#34;role\u0026#34;: \u0026#34;user\u0026#34;, \u0026#34;content\u0026#34;: \u0026#34;ä½ å¥½\u0026#34;}]}} }) print(res) ğŸ” è§£é‡Šä¸åŸç† è¿™å¥—æ¶æ„çš„å…³é”®è®¾è®¡æ€æƒ³æ˜¯â€œèŒè´£åˆ†ç¦»â€ï¼š\næ¨¡å— è´£ä»» åç«¯ï¼ˆOrchestratorï¼‰ æ¥æ”¶è¯·æ±‚ã€éªŒè¯æƒé™ã€åˆ†é…ä»»åŠ¡ã€åŒæ­¥çŠ¶æ€ã€å¹¿æ’­æµå¼å†…å®¹ å‰ç«¯ï¼ˆExecutorï¼‰ æ‰§è¡ŒçœŸå®æ¨ç†ï¼ˆOpenAIã€Ollamaã€æœ¬åœ°æ¨¡å‹ï¼‰ã€å°†ç»“æœå›ä¼  é€šä¿¡å±‚ï¼ˆSocket.IOï¼‰ å»ºç«‹ç»Ÿä¸€çš„äº‹ä»¶æµé€šé“ï¼Œå®ç°å®æ—¶åŒå‘åŒæ­¥ è¿™ç§æ¨¡å¼å…¼å®¹ï¼š\nå¤šæ¨¡å‹ä½“ç³»ï¼ˆOpenAI + Ollama + Gemini + Claudeï¼‰ï¼› ç”¨æˆ·è‡ªå®šä¹‰ Keyï¼› æœ¬åœ°æ¨ç†ç¯å¢ƒï¼› æ— éœ€åç«¯æš´éœ²æ‰€æœ‰ API Keyã€‚ âš–ï¸ æ›¿ä»£æ–¹æ¡ˆä¸å–èˆ æ–¹æ¡ˆ ä¼˜ç‚¹ ç¼ºç‚¹ åç«¯ç›´æ¥è°ƒç”¨ API ç®€å•ï¼Œé›†ä¸­æ§åˆ¶ ä¸æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ¨¡å‹æˆ– Keyï¼›æˆæœ¬é›†ä¸­ å‰ç«¯æ‰§è¡Œï¼ˆå½“å‰æ–¹æ¡ˆï¼‰ çµæ´»ï¼Œæ”¯æŒ BYOKã€æœ¬åœ°æ¨¡å‹ã€å¤šç«¯åä½œ æ¶æ„å¤æ‚ï¼Œéœ€è¦ socket å›è°ƒæœºåˆ¶ ä¸­é—´ä»£ç†ç½‘å…³ å¯å…¼é¡¾å®‰å…¨ä¸çµæ´» éœ€é¢å¤–æœåŠ¡å±‚ âš ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ æœªå®ç° callback å¯¼è‡´ Python ä¸€ç›´ await â†’ å¿…é¡»åœ¨å‰ç«¯è°ƒç”¨ cb() è¿”å›ï¼Œå¦åˆ™åç«¯æ°¸è¿œç­‰å¾…ã€‚ è·¨åŸŸä¸è¿æ¥é—®é¢˜ â†’ ç¡®ä¿å‰ç«¯çš„ Socket.IO URL ä¸åç«¯ /ws è·¯å¾„ä¸€è‡´ã€‚ å®‰å…¨é—®é¢˜ â†’ ä»…å…è®¸è®¤è¯ç”¨æˆ·è¿æ¥ socketï¼›é˜²æ­¢æ»¥ç”¨ç›´è¿ã€‚ æµå¼æ•°æ®ä¸¢å¤± â†’ ä½¿ç”¨ channel å‚æ•°è¿›è¡ŒåŒºåˆ†ï¼Œé¿å…ä¸åŒå¯¹è¯æ··æµã€‚ ğŸ’¡ æœ€ä½³å®è·µä¸å»ºè®® ä½¿ç”¨ sio.emit å¤„ç†çŠ¶æ€å¹¿æ’­ï¼Œsio.call å¤„ç†ä»»åŠ¡è¯·æ±‚ï¼›\nä¿æŒ session_id å’Œ chat_id ç»‘å®šä¸€è‡´ï¼›\nåœ¨å‰ç«¯åˆå§‹åŒ– Socket æ—¶åŒæ—¶æ³¨å†Œï¼š\nsocket.on(\u0026#34;events\u0026#34;, chatEventHandler); socket.on(\u0026#34;events\u0026#34;, (event, cb) =\u0026gt; { ...callback logic... }); ç›‘æ§ sio.call() è¶…æ—¶å¹¶åšé™çº§ï¼›\nå¯¹ request:chat:completion åŠ å…¥é‡è¯•å’Œé”™è¯¯æ—¥å¿—ã€‚\nğŸ§¾ å°ç»“ / ç»“è®º è¿™ç§ã€Œåç«¯è°ƒåº¦ã€å‰ç«¯æ‰§è¡Œã€çš„æ¶æ„å¹¶éå¤šæ­¤ä¸€ä¸¾ï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³ä»¥ä¸‹æ ¸å¿ƒé—®é¢˜ï¼š\næ”¯æŒå¤šç§æ¨¡å‹æ¥æºï¼› å…è®¸ç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„ API Keyï¼› æ”¯æŒæœ¬åœ°æˆ–ç§æœ‰æ¨ç†ï¼› é™ä½æœåŠ¡å™¨æˆæœ¬ï¼› é€šè¿‡ Socket.IO å®ç°ç»Ÿä¸€ã€å®æ—¶çš„æ¶ˆæ¯æµã€‚ å®ƒå°†åç«¯å˜æˆäº†â€œä¸­æ§ç³»ç»Ÿâ€ï¼Œè€Œå‰ç«¯æˆä¸ºäº†â€œæ‰§è¡ŒèŠ‚ç‚¹â€ï¼Œéå¸¸é€‚åˆå¤šæ¨¡å‹ã€å¤šç”¨æˆ·ã€å¤šæ¥æºçš„ç°ä»£ AI èŠå¤©ç³»ç»Ÿã€‚\nğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯» Socket.IO å®˜æ–¹æ–‡æ¡£ FastAPI å®˜æ–¹æ–‡æ¡£ Open-WebUI é¡¹ç›® Ollama å®˜æ–¹ç«™ç‚¹ ChatGPT æµå¼æ¥å£åŸç† ğŸ·ï¸ å…ƒä¿¡æ¯ é¢„è®¡é˜…è¯»æ—¶é•¿ï¼š10 åˆ†é’Ÿ æ ‡ç­¾ï¼šSocket.IOã€FastAPIã€OpenAI APIã€Chatæ¶æ„ã€WebSocketæµå¼é€šä¿¡ SEO å…³é”®è¯ï¼šOpenAI ChatCompletionã€Socket.IO RPCã€å‰åç«¯æµå¼é€šä¿¡ã€BYOK æ¶æ„ Meta Descriptionï¼šä¸ºä»€ä¹ˆè¦è®©å‰ç«¯æ‰§è¡Œ Chat Completionï¼Ÿæœ¬æ–‡è¯¦ç»†è§£æåŸºäº Socket.IO çš„å¤šæ¨¡å‹æµå¼èŠå¤©æ¶æ„è®¾è®¡ï¼Œé€‚åˆæ„å»º OpenAI/Ollama ä¸€ä½“åŒ–ç³»ç»Ÿçš„å¼€å‘è€…ã€‚ ğŸš€ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ‘‰ æƒ³äº²æ‰‹æ­å»ºè¿™æ ·çš„å¤šæ¨¡å‹èŠå¤©ç³»ç»Ÿï¼Ÿ\nğŸ”— æŸ¥çœ‹å®Œæ•´æºç ç¤ºä¾‹ï¼ˆGitHubï¼‰ ğŸ’¬ åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ¨¡å‹æ•´åˆç»éªŒ ğŸ“§ è®¢é˜…æˆ‘ä»¬çš„æ›´æ–°ï¼Œå­¦ä¹ æ›´å¤šåˆ†å¸ƒå¼ AI æ¶æ„æŠ€å·§ ","permalink":"http://localhost:1313/jeanblog/posts/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AE%A9%E5%89%8D%E7%AB%AF%E5%AE%8C%E6%88%90chat-completion-%E4%B8%80%E5%A5%97%E9%80%9A%E7%94%A8%E7%9A%84%E5%A4%9A%E6%A8%A1%E5%9E%8B%E6%B5%81%E5%BC%8F%E5%AF%B9%E8%AF%9D%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/","summary":"\u003ch1 id=\"-ä¸ºä»€ä¹ˆè®©å‰ç«¯æ‰§è¡Œ-chat-completionä¸€å¥—é€šç”¨çš„å¤šæ¨¡å‹æµå¼å¯¹è¯æ¶æ„è®¾è®¡\"\u003eğŸ”Œ ä¸ºä»€ä¹ˆè®©å‰ç«¯æ‰§è¡Œ Chat Completionï¼šä¸€å¥—é€šç”¨çš„å¤šæ¨¡å‹æµå¼å¯¹è¯æ¶æ„è®¾è®¡\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/strong\u003e\nåœ¨ç°ä»£ AI èŠå¤©ç³»ç»Ÿä¸­ï¼Œå¾ˆå¤šäººä¼šé—®ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨åç«¯è°ƒç”¨ OpenAI APIï¼Ÿ\næœ¬æ–‡å°†å¸¦ä½ ç†è§£ä¸€ç§æ›´çµæ´»çš„æ¶æ„â€”â€”è®©å‰ç«¯æ‰¿æ‹…æ¨ç†æ‰§è¡Œï¼Œåç«¯è´Ÿè´£è°ƒåº¦å’ŒçŠ¶æ€åŒæ­¥ã€‚é€‚åˆéœ€è¦æ”¯æŒå¤šæ¨¡å‹ã€æœ¬åœ°æ¨ç†æˆ–ç”¨æˆ·è‡ªå¸¦ API Key çš„å¼€å‘è€…ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eç›®æ ‡è¯»è€…\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAI èŠå¤©åº”ç”¨å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eWebSocket / Socket.IO å®è·µè€…\u003c/li\u003e\n\u003cli\u003eæƒ³æ„å»ºå¤šæ¨¡å‹ã€å¤šç«¯åä½œèŠå¤©ç³»ç»Ÿçš„æ¶æ„å¸ˆ\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯--åŠ¨æœº\"\u003eğŸ§  èƒŒæ™¯ / åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eä¼ ç»Ÿçš„èŠå¤©åç«¯å¾€å¾€ç›´æ¥åœ¨æœåŠ¡å™¨è°ƒç”¨ OpenAI APIï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eresp \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003echat\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecompletions\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecreate(model\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gpt-4o\u0026#34;\u003c/span\u003e, messages\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emessages)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè™½ç„¶ç®€å•ï¼Œä½†å¸¦æ¥å‡ ä¸ªç°å®é—®é¢˜ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ‰€æœ‰è¯·æ±‚éƒ½æ¶ˆè€—æœåŠ¡å™¨çš„ Keyï¼Œæˆæœ¬é«˜ä¸”éš¾è¿½è¸ªï¼›\u003c/li\u003e\n\u003cli\u003eæ— æ³•æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ Keyï¼ˆBYOK æ¨¡å¼ï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eæ— æ³•è¿æ¥ç”¨æˆ·æœ¬åœ°æ¨ç†ï¼ˆå¦‚ Ollamaã€LM Studioï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eæ— æ³•åˆ‡æ¢ä¸åŒæ¨¡å‹æˆ– API Base URLï¼›\u003c/li\u003e\n\u003cli\u003eå‰åç«¯çŠ¶æ€ä¸åŒæ­¥ï¼Œä¸åˆ©äºæµå¼æ¶ˆæ¯æ¨é€ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œä¸€äº›å¼€æºç³»ç»Ÿï¼ˆå¦‚ Open-WebUIã€Chatbot-UI å¢å¼ºç‰ˆï¼‰é‡‡ç”¨äº†æ›´çµæ´»çš„ \u003cstrong\u003eSocket.IO åŒå‘é€šä¿¡æ¶æ„\u003c/strong\u003eã€‚\næœåŠ¡ç«¯è´Ÿè´£ã€Œè°ƒåº¦ä¸çŠ¶æ€æµã€ï¼Œå‰ç«¯è´Ÿè´£ã€Œæ‰§è¡Œä¸å›ä¼ ã€ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µ\"\u003eğŸ§© æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ¦‚å¿µ\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eSocket.IO\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eåŸºäº WebSocket çš„å®æ—¶åŒå‘é€šä¿¡åº“ï¼Œæ”¯æŒäº‹ä»¶ä¸å›è°ƒã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eevent_emitter\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæœåŠ¡ç«¯å‘å‰ç«¯å¹¿æ’­äº‹ä»¶ï¼ˆæ¨é€æ¶ˆæ¯/çŠ¶æ€ï¼‰ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eevent_caller (sio.call)\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæœåŠ¡ç«¯è¯·æ±‚å‰ç«¯æ‰§è¡Œä»»åŠ¡ï¼ˆRPCï¼‰ï¼Œå¹¶ç­‰å¾…å‰ç«¯ callback è¿”å›ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003erequest:chat:completion\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸€ç§è‡ªå®šä¹‰äº‹ä»¶ç±»å‹ï¼Œç”¨äºè¯·æ±‚å‰ç«¯æ‰§è¡Œ chat completionã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eBYOK æ¨¡å¼\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eâ€œBring Your Own Keyâ€ï¼Œç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„ OpenAI Key è°ƒç”¨ APIã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eExecutor æ¶æ„\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå‰ç«¯æ‰¿æ‹…æ¨ç†ä»»åŠ¡çš„æ‰§è¡Œè€…ï¼Œåç«¯ä½œä¸ºåè°ƒè€…ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæŒ‡å—--æ­¥éª¤\"\u003eğŸ§­ å®è·µæŒ‡å— / æ­¥éª¤\u003c/h2\u003e\n\u003ch3 id=\"1-æœåŠ¡ç«¯å‘é€è°ƒç”¨è¯·æ±‚\"\u003e1ï¸âƒ£ æœåŠ¡ç«¯å‘é€è°ƒç”¨è¯·æ±‚\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eres \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e event_caller({\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;request:chat:completion\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;data\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;form_data\u0026#34;\u003c/span\u003e: form_data,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;model\u0026#34;\u003c/span\u003e: models[form_data[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;model\u0026#34;\u003c/span\u003e]],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;channel\u0026#34;\u003c/span\u003e: channel,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;session_id\u0026#34;\u003c/span\u003e: session_id,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e})\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™é‡Œçš„ \u003ccode\u003eevent_caller\u003c/code\u003e ä½¿ç”¨ \u003ccode\u003esio.call()\u003c/code\u003e å‘é€äº‹ä»¶ç»™æŒ‡å®šå®¢æˆ·ç«¯ï¼Œå¹¶ç­‰å¾… callback è¿”å›ã€‚\u003c/p\u003e","title":"ä¸ºä»€ä¹ˆè®©å‰ç«¯å®ŒæˆChat Completion: ä¸€å¥—é€šç”¨çš„å¤šæ¨¡å‹æµå¼å¯¹è¯æ¶æ„è®¾è®¡"},{"content":"ğŸš€ ä»é˜»å¡åˆ°å¼‚æ­¥ï¼šä¸ºä»€ä¹ˆä¸Šä¼ æ¥å£ä¸è¯¥ç­‰æ–‡ä»¶å¤„ç†å®Œï¼Ÿ â€”â€” ç”¨å¼‚æ­¥ä»»åŠ¡å’ŒçŠ¶æ€è·Ÿè¸ªæ„å»ºé«˜æ€§èƒ½æ–‡ä»¶å¤„ç†ç³»ç»Ÿ\nğŸ§­ å‰¯æ ‡é¢˜ / æ‘˜è¦ åœ¨ç°ä»£ Web ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶ä¸Šä¼ åªæ˜¯èµ·ç‚¹ï¼ŒçœŸæ­£çš„æŒ‘æˆ˜åœ¨äºåç»­çš„è§£æã€ç´¢å¼•å’Œå¤„ç†ã€‚æœ¬æ–‡å¸¦ä½ ç†è§£ä¸ºä»€ä¹ˆâ€œä¸Šä¼ æ¥å£ä¸ç­‰å¾…å¤„ç†å®Œæˆâ€æ˜¯ç°ä»£æ¶æ„çš„æ ¸å¿ƒç†å¿µï¼Œä»¥åŠå¦‚ä½•é€šè¿‡å¼‚æ­¥ä»»åŠ¡ + çŠ¶æ€æŸ¥è¯¢å®ç°ç¨³å®šã€å¯æ‰©å±•çš„åå°å¤„ç†ç³»ç»Ÿã€‚\nğŸ‘¥ ç›®æ ‡è¯»è€… æœ‰ä¸€å®š Web å¼€å‘ç»éªŒçš„å·¥ç¨‹å¸ˆï¼ˆPython/FastAPI/Node.js ç­‰ï¼‰ æƒ³ä¼˜åŒ–åç«¯æ€§èƒ½ã€æé«˜å¯æ‰©å±•æ€§çš„ä¸­çº§å¼€å‘è€… å¯¹æ¶æ„è®¾è®¡ã€å¼‚æ­¥ç³»ç»Ÿæ„Ÿå…´è¶£çš„å·¥ç¨‹å¸ˆæˆ–æŠ€æœ¯è´Ÿè´£äºº ğŸ¯ èƒŒæ™¯ / åŠ¨æœº å¾ˆå¤šåˆå­¦è€…å†™ä¸Šä¼ æ¥å£æ—¶ä¼šè¿™æ ·åšï¼š\n@app.post(\u0026#34;/upload\u0026#34;) def upload_file(file: UploadFile): parse_and_store(file) # é˜»å¡æ“ä½œ return {\u0026#34;status\u0026#34;: \u0026#34;completed\u0026#34;} è¡¨é¢ç®€å•ï¼Œå®åˆ™éšè—é—®é¢˜ï¼š\nâ± è¶…æ—¶é£é™©é«˜ï¼ˆè§£æ/embedding/OCRå¯èƒ½å‡ åˆ†é’Ÿï¼‰ ğŸ§µ é˜»å¡ä¸»çº¿ç¨‹ï¼Œæ‹–æ…¢æ•´ä¸ª API æœåŠ¡ ğŸ’¥ è¯·æ±‚ä¸­æ–­å³ä»»åŠ¡ä¸¢å¤± ğŸ˜• ç”¨æˆ·åªèƒ½å¹²ç­‰ç€ï¼Œæ— æ³•çœ‹åˆ°è¿›åº¦ è§£å†³æ–¹æ¡ˆå°±æ˜¯ï¼šä¸Šä¼ ä¸å¤„ç†åˆ†ç¦»ã€‚ä¸Šä¼ åªè´Ÿè´£â€œæŠ•é€’ä»»åŠ¡â€ï¼Œå¤„ç†ç”±åå° worker å¼‚æ­¥æ‰§è¡Œï¼ŒçŠ¶æ€å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ä¾›å‰ç«¯æŸ¥è¯¢ã€‚\nğŸ” æ ¸å¿ƒæ¦‚å¿µ æ¦‚å¿µ è¯´æ˜ å¼‚æ­¥ä»»åŠ¡ï¼ˆAsync Jobï¼‰ æ–‡ä»¶è§£æã€OCRã€embedding ç­‰è€—æ—¶æ“ä½œç‹¬ç«‹è¿è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚ ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰ ä¸´æ—¶å­˜æ”¾å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚ Redisã€RabbitMQã€Celeryã€‚ çŠ¶æ€æŒä¹…åŒ–ï¼ˆState Persistenceï¼‰ å°†ä»»åŠ¡çŠ¶æ€ï¼ˆpending / processing / completed / failedï¼‰å†™å…¥æ•°æ®åº“ã€‚ SSEï¼ˆServer-Sent Eventsï¼‰ ä¸€ç§è½»é‡çš„å®æ—¶æ¨é€æœºåˆ¶ï¼Œå‰ç«¯å¯å®æ—¶æ¥æ”¶çŠ¶æ€æ›´æ–°ã€‚ âš™ï¸ å®è·µæŒ‡å— / å®ç°æ­¥éª¤ 1ï¸âƒ£ ä¸Šä¼ æ–‡ä»¶æ¥å£ï¼ˆåªè´Ÿè´£å…¥é˜Ÿï¼‰ @router.post(\u0026#34;/upload\u0026#34;) async def upload(file: UploadFile, user=Depends(get_verified_user)): file_id = Files.create(file, user.id) # å¼‚æ­¥æäº¤ä»»åŠ¡ï¼ˆCeleryã€RQã€çº¿ç¨‹æ± ç­‰ï¼‰ background_tasks.add_task(process_file, file_id) return {\u0026#34;file_id\u0026#34;: file_id, \u0026#34;status\u0026#34;: \u0026#34;pending\u0026#34;} 2ï¸âƒ£ å¼‚æ­¥ä»»åŠ¡ï¼ˆåå° worker æ‰§è¡Œï¼‰ def process_file(file_id: str): file = Files.get(file_id) Files.update_status(file_id, \u0026#34;processing\u0026#34;) try: parse_and_vectorize(file) Files.update_status(file_id, \u0026#34;completed\u0026#34;) except Exception as e: Files.update_status(file_id, \u0026#34;failed\u0026#34;, error=str(e)) 3ï¸âƒ£ çŠ¶æ€æŸ¥è¯¢æ¥å£ @router.get(\u0026#34;/{id}/process/status\u0026#34;) async def get_status(id: str, stream: bool = False): file = Files.get(id) if stream: async def event_stream(): while True: status = Files.get_status(id) yield f\u0026#34;data: {json.dumps({\u0026#39;status\u0026#39;: status})}\\n\\n\u0026#34; if status in (\u0026#34;completed\u0026#34;, \u0026#34;failed\u0026#34;): break await asyncio.sleep(1) return StreamingResponse(event_stream(), media_type=\u0026#34;text/event-stream\u0026#34;) return {\u0026#34;status\u0026#34;: file.data.get(\u0026#34;status\u0026#34;, \u0026#34;pending\u0026#34;)} ğŸ’» å¯è¿è¡Œç¤ºä¾‹ å‰ç«¯è½®è¯¢ï¼š async function checkStatus(fileId) { let status = \u0026#39;pending\u0026#39;; while (status === \u0026#39;pending\u0026#39; || status === \u0026#39;processing\u0026#39;) { const res = await fetch(`/api/files/${fileId}/process/status`); const data = await res.json(); status = data.status; console.log(\u0026#34;å½“å‰çŠ¶æ€:\u0026#34;, status); await new Promise(r =\u0026gt; setTimeout(r, 1000)); } if (status === \u0026#39;completed\u0026#39;) alert(\u0026#34;è§£æå®Œæˆï¼\u0026#34;); } å‰ç«¯ SSE å®æ—¶ç›‘å¬ï¼š const evtSource = new EventSource(`/api/files/${fileId}/process/status?stream=true`); evtSource.onmessage = (e) =\u0026gt; { const { status } = JSON.parse(e.data); console.log(\u0026#34;æ–‡ä»¶çŠ¶æ€:\u0026#34;, status); if (status === \u0026#34;completed\u0026#34;) evtSource.close(); }; ğŸ§  åŸç†è§£é‡Šä¸å–èˆ æ¨¡å¼ ç‰¹ç‚¹ é€‚ç”¨åœºæ™¯ åŒæ­¥ä¸Šä¼ +å¤„ç† å®ç°ç®€å•ï¼Œä½†é˜»å¡ä¸»çº¿ç¨‹ å°æ–‡ä»¶ã€ä½å¹¶å‘ã€ç¦»çº¿è„šæœ¬ å¼‚æ­¥ä¸Šä¼ +çŠ¶æ€æŸ¥è¯¢ï¼ˆæ¨èï¼‰ éé˜»å¡ã€å¯æ¢å¤ã€å¯æ‰©å±• Web åº”ç”¨ã€åå°ä»»åŠ¡ æ¶ˆæ¯é˜Ÿåˆ—é©±åŠ¨ æ”¯æŒåˆ†å¸ƒå¼ä»»åŠ¡ã€é‡è¯•æœºåˆ¶ å¤§è§„æ¨¡ç³»ç»Ÿã€å¾®æœåŠ¡æ¶æ„ å–èˆåŸåˆ™ï¼š\nè‹¥ä»»åŠ¡è€—æ—¶ \u0026gt; 1 ç§’ï¼Œåº”è€ƒè™‘å¼‚æ­¥ï¼› è‹¥éœ€è¦ä»»åŠ¡å¯ç›‘æ§ / å¯æ¢å¤ï¼Œå¿…é¡»çŠ¶æ€æŒä¹…åŒ–ï¼› è‹¥ç³»ç»Ÿä¸ºåˆ†å¸ƒå¼ï¼Œåº”å¼•å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚ âš ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ è¯´æ˜ä¸å»ºè®® âŒ ä¸Šä¼ åç›´æ¥è¿”å›è§£æç»“æœ æ˜“è¶…æ—¶ã€éš¾æ‰©å±• âš™ï¸ çŠ¶æ€å­—æ®µæ›´æ–°ä¸åŒæ­¥ ä½¿ç”¨æ•°æ®åº“æˆ– Redis å­˜å‚¨çŠ¶æ€ ğŸ§µ Worker å´©æºƒåä»»åŠ¡ä¸¢å¤± åŠ å…¥é‡è¯•æœºåˆ¶ ğŸ”’ å¤šç”¨æˆ·è®¿é—®åŒä¸€ä»»åŠ¡ åŠ æƒé™æ£€æŸ¥ï¼ˆuser_id / ACLï¼‰ ğŸ§© å‰ç«¯é•¿æ—¶é—´ç­‰å¾… ä½¿ç”¨ SSE æˆ–è½®è¯¢åé¦ˆè¿›åº¦ ğŸ† æœ€ä½³å®è·µä¸å»ºè®® ä¸Šä¼ æ¥å£å¿«è¿”å›ï¼šå“åº”åº”åªåŒ…å« file_idã€‚ ä»»åŠ¡çŠ¶æ€å¿…é¡»æŒä¹…åŒ–ï¼šæ•°æ®åº“æ˜¯çŠ¶æ€çœŸç›¸æºã€‚ Worker ç‹¬ç«‹è¿›ç¨‹è¿è¡Œï¼šé¿å…é˜»å¡ä¸» APIã€‚ ä½¿ç”¨ SSE/WebSocket æ¨é€çŠ¶æ€ï¼šæ”¹å–„ç”¨æˆ·ä½“éªŒã€‚ è®°å½•å¤±è´¥åŸå› ä¸é‡è¯•æ¬¡æ•°ï¼šä¾¿äºè°ƒè¯•ä¸æ¢å¤ã€‚ å¯è§†åŒ–ä»»åŠ¡ç›‘æ§ï¼šä¾‹å¦‚ Celery Flowerã€RQ Dashboardã€‚ ğŸ“˜ å°ç»“ / ç»“è®º å‰ç«¯å¯ä»¥ç­‰å¾…ï¼Œåç«¯ä¸è¯¥é˜»å¡ã€‚ ä¸Šä¼ æ¥å£è´Ÿè´£å¯åŠ¨ä»»åŠ¡ï¼ŒçŠ¶æ€æ¥å£è´Ÿè´£æ±‡æŠ¥è¿›åº¦ã€‚\nè¿™ç§â€œå¼‚æ­¥ä»»åŠ¡ + çŠ¶æ€è·Ÿè¸ªâ€æ¶æ„æ˜¯ç°ä»£ç³»ç»Ÿçš„æ ‡å‡†åšæ³•ï¼Œæ—¢èƒ½æé«˜ç”¨æˆ·ä½“éªŒï¼Œåˆä¿è¯ç³»ç»Ÿé«˜å¯ç”¨å’Œå¯æ‰©å±•ã€‚\nä¸‹ä¸€æ­¥ä½ å¯ä»¥ï¼š\nå¼•å…¥ Celery / Redis å®ç°çœŸæ­£çš„åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ï¼› åŠ ä¸Š SSE å®æ—¶è¿›åº¦åé¦ˆï¼› ç”¨ Grafana / Prometheus ç›‘æ§ä»»åŠ¡æŒ‡æ ‡ã€‚ ğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯» ğŸ“˜ The Art of Scalability â€” Martin L. Abbott ğŸ“— Foundations of Scalable Systems â€” Ian Gorton ğŸ“„ Azure Background Jobs Guide ğŸ§© Celery å®˜æ–¹æ–‡æ¡£ ğŸ“ FastAPI Background Tasks ğŸ§  Temporal.io - Workflow Engine ğŸ§¾ å…ƒä¿¡æ¯ é˜…è¯»æ—¶é•¿ï¼š8 åˆ†é’Ÿ æ ‡ç­¾ï¼šFastAPI å¼‚æ­¥ä»»åŠ¡ æ¶æ„è®¾è®¡ æ–‡ä»¶ä¸Šä¼  SSE SEO å…³é”®è¯ï¼šå¼‚æ­¥ä»»åŠ¡ã€æ–‡ä»¶ä¸Šä¼ ã€FastAPIã€çŠ¶æ€è·Ÿè¸ªã€Celeryã€Server-Sent Events å…ƒæè¿°ï¼šä¸ºä»€ä¹ˆä¸Šä¼ æ¥å£ä¸åº”è¯¥ç­‰å¾…æ–‡ä»¶è§£æå®Œæˆï¼Ÿæœ¬æ–‡æ·±å…¥è®²è§£å¼‚æ­¥ä»»åŠ¡ä¸çŠ¶æ€è·Ÿè¸ªçš„è®¾è®¡ç†å¿µä¸å®è·µï¼Œé€‚åˆå¸Œæœ›æ„å»ºé«˜æ€§èƒ½åå°ç³»ç»Ÿçš„å¼€å‘è€…ã€‚ ğŸ‘‰ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ’¡ åŠ¨æ‰‹è¯•è¯•ï¼šç”¨ FastAPI + Celery å®ç°ä¸€ä¸ªå¼‚æ­¥æ–‡ä»¶è§£æä»»åŠ¡ã€‚ ğŸ“¦ æŸ¥çœ‹ç¤ºä¾‹ä»“åº“ï¼ˆä½ å¯ä»¥æ”¾è‡ªå·±çš„ GitHub é“¾æ¥ï¼‰ ğŸ—¨ï¸ æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„å¼‚æ­¥ä»»åŠ¡è®¾è®¡ç»éªŒï¼\n","permalink":"http://localhost:1313/jeanblog/posts/%E4%BB%8E%E5%A0%B5%E5%A1%9E%E5%88%B0%E5%BC%82%E6%AD%A5%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3%E4%B8%8D%E8%AF%A5%E7%AD%89%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E5%AE%8C/","summary":"\u003ch1 id=\"-ä»é˜»å¡åˆ°å¼‚æ­¥ä¸ºä»€ä¹ˆä¸Šä¼ æ¥å£ä¸è¯¥ç­‰æ–‡ä»¶å¤„ç†å®Œ\"\u003eğŸš€ ä»é˜»å¡åˆ°å¼‚æ­¥ï¼šä¸ºä»€ä¹ˆä¸Šä¼ æ¥å£ä¸è¯¥ç­‰æ–‡ä»¶å¤„ç†å®Œï¼Ÿ\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eâ€”â€” ç”¨å¼‚æ­¥ä»»åŠ¡å’ŒçŠ¶æ€è·Ÿè¸ªæ„å»ºé«˜æ€§èƒ½æ–‡ä»¶å¤„ç†ç³»ç»Ÿ\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å‰¯æ ‡é¢˜--æ‘˜è¦\"\u003eğŸ§­ å‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/h2\u003e\n\u003cp\u003eåœ¨ç°ä»£ Web ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶ä¸Šä¼ åªæ˜¯èµ·ç‚¹ï¼ŒçœŸæ­£çš„æŒ‘æˆ˜åœ¨äºåç»­çš„è§£æã€ç´¢å¼•å’Œå¤„ç†ã€‚æœ¬æ–‡å¸¦ä½ ç†è§£ä¸ºä»€ä¹ˆâ€œä¸Šä¼ æ¥å£ä¸ç­‰å¾…å¤„ç†å®Œæˆâ€æ˜¯ç°ä»£æ¶æ„çš„æ ¸å¿ƒç†å¿µï¼Œä»¥åŠå¦‚ä½•é€šè¿‡å¼‚æ­¥ä»»åŠ¡ + çŠ¶æ€æŸ¥è¯¢å®ç°ç¨³å®šã€å¯æ‰©å±•çš„åå°å¤„ç†ç³»ç»Ÿã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ç›®æ ‡è¯»è€…\"\u003eğŸ‘¥ ç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eæœ‰ä¸€å®š Web å¼€å‘ç»éªŒçš„å·¥ç¨‹å¸ˆï¼ˆPython/FastAPI/Node.js ç­‰ï¼‰\u003c/li\u003e\n\u003cli\u003eæƒ³ä¼˜åŒ–åç«¯æ€§èƒ½ã€æé«˜å¯æ‰©å±•æ€§çš„ä¸­çº§å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eå¯¹æ¶æ„è®¾è®¡ã€å¼‚æ­¥ç³»ç»Ÿæ„Ÿå…´è¶£çš„å·¥ç¨‹å¸ˆæˆ–æŠ€æœ¯è´Ÿè´£äºº\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯--åŠ¨æœº\"\u003eğŸ¯ èƒŒæ™¯ / åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eå¾ˆå¤šåˆå­¦è€…å†™ä¸Šä¼ æ¥å£æ—¶ä¼šè¿™æ ·åšï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@app.post\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/upload\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eupload_file\u003c/span\u003e(file: UploadFile):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    parse_and_store(file)  \u003cspan style=\"color:#75715e\"\u003e# é˜»å¡æ“ä½œ\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e {\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;status\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;completed\u0026#34;\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¡¨é¢ç®€å•ï¼Œå®åˆ™éšè—é—®é¢˜ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eâ± è¶…æ—¶é£é™©é«˜ï¼ˆè§£æ/embedding/OCRå¯èƒ½å‡ åˆ†é’Ÿï¼‰\u003c/li\u003e\n\u003cli\u003eğŸ§µ é˜»å¡ä¸»çº¿ç¨‹ï¼Œæ‹–æ…¢æ•´ä¸ª API æœåŠ¡\u003c/li\u003e\n\u003cli\u003eğŸ’¥ è¯·æ±‚ä¸­æ–­å³ä»»åŠ¡ä¸¢å¤±\u003c/li\u003e\n\u003cli\u003eğŸ˜• ç”¨æˆ·åªèƒ½å¹²ç­‰ç€ï¼Œæ— æ³•çœ‹åˆ°è¿›åº¦\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè§£å†³æ–¹æ¡ˆå°±æ˜¯ï¼š\u003cstrong\u003eä¸Šä¼ ä¸å¤„ç†åˆ†ç¦»\u003c/strong\u003eã€‚ä¸Šä¼ åªè´Ÿè´£â€œæŠ•é€’ä»»åŠ¡â€ï¼Œå¤„ç†ç”±åå° worker å¼‚æ­¥æ‰§è¡Œï¼ŒçŠ¶æ€å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ä¾›å‰ç«¯æŸ¥è¯¢ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µ\"\u003eğŸ” æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ¦‚å¿µ\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eå¼‚æ­¥ä»»åŠ¡ï¼ˆAsync Jobï¼‰\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæ–‡ä»¶è§£æã€OCRã€embedding ç­‰è€—æ—¶æ“ä½œç‹¬ç«‹è¿è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸´æ—¶å­˜æ”¾å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚ Redisã€RabbitMQã€Celeryã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eçŠ¶æ€æŒä¹…åŒ–ï¼ˆState Persistenceï¼‰\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå°†ä»»åŠ¡çŠ¶æ€ï¼ˆpending / processing / completed / failedï¼‰å†™å…¥æ•°æ®åº“ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eSSEï¼ˆServer-Sent Eventsï¼‰\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸€ç§è½»é‡çš„å®æ—¶æ¨é€æœºåˆ¶ï¼Œå‰ç«¯å¯å®æ—¶æ¥æ”¶çŠ¶æ€æ›´æ–°ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæŒ‡å—--å®ç°æ­¥éª¤\"\u003eâš™ï¸ å®è·µæŒ‡å— / å®ç°æ­¥éª¤\u003c/h2\u003e\n\u003ch3 id=\"1-ä¸Šä¼ æ–‡ä»¶æ¥å£åªè´Ÿè´£å…¥é˜Ÿ\"\u003e1ï¸âƒ£ ä¸Šä¼ æ–‡ä»¶æ¥å£ï¼ˆåªè´Ÿè´£å…¥é˜Ÿï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@router.post\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/upload\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eupload\u003c/span\u003e(file: UploadFile, user\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eDepends(get_verified_user)):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    file_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Files\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecreate(file, user\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eid)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# å¼‚æ­¥æäº¤ä»»åŠ¡ï¼ˆCeleryã€RQã€çº¿ç¨‹æ± ç­‰ï¼‰\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    background_tasks\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eadd_task(process_file, file_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e {\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;file_id\u0026#34;\u003c/span\u003e: file_id, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;status\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;pending\u0026#34;\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"2-å¼‚æ­¥ä»»åŠ¡åå°-worker-æ‰§è¡Œ\"\u003e2ï¸âƒ£ å¼‚æ­¥ä»»åŠ¡ï¼ˆåå° worker æ‰§è¡Œï¼‰\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprocess_file\u003c/span\u003e(file_id: str):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    file \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Files\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(file_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Files\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eupdate_status(file_id, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;processing\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        parse_and_vectorize(file)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Files\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eupdate_status(file_id, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;completed\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eexcept\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eException\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Files\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eupdate_status(file_id, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;failed\u0026#34;\u003c/span\u003e, error\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003estr(e))\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"3-çŠ¶æ€æŸ¥è¯¢æ¥å£\"\u003e3ï¸âƒ£ çŠ¶æ€æŸ¥è¯¢æ¥å£\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@router.get\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{id}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/process/status\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eget_status\u003c/span\u003e(id: str, stream: bool \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    file \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Files\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e stream:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eevent_stream\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                status \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Files\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget_status(id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eyield\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;data: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{\u003c/span\u003ejson\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edumps({\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;status\u0026#39;\u003c/span\u003e: status})\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e\\n\\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e status \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e (\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;completed\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;failed\u0026#34;\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#66d9ef\"\u003ebreak\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e asyncio\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esleep(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e StreamingResponse(event_stream(), media_type\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;text/event-stream\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e {\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;status\u0026#34;\u003c/span\u003e: file\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edata\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;status\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;pending\u0026#34;\u003c/span\u003e)}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-å¯è¿è¡Œç¤ºä¾‹\"\u003eğŸ’» å¯è¿è¡Œç¤ºä¾‹\u003c/h2\u003e\n\u003ch3 id=\"å‰ç«¯è½®è¯¢\"\u003eå‰ç«¯è½®è¯¢ï¼š\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003echeckStatus\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003efileId\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003elet\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;pending\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e===\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;pending\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e===\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;processing\u0026#39;\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eres\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efetch\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e`/api/files/\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003efileId\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/process/status`\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eres\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003econsole\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;å½“å‰çŠ¶æ€:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e Promise(\u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e =\u0026gt; \u003cspan style=\"color:#a6e22e\"\u003esetTimeout\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1000\u003c/span\u003e));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e===\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;completed\u0026#39;\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003ealert\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;è§£æå®Œæˆï¼\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"å‰ç«¯-sse-å®æ—¶ç›‘å¬\"\u003eå‰ç«¯ SSE å®æ—¶ç›‘å¬ï¼š\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eevtSource\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eEventSource\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e`/api/files/\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003efileId\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/process/status?stream=true`\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eevtSource\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eonmessage\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ee\u003c/span\u003e) =\u0026gt; {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e { \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e } \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eJSON\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eparse\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ee\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003econsole\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;æ–‡ä»¶çŠ¶æ€:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e===\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;completed\u0026#34;\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eevtSource\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eclose\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e};\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-åŸç†è§£é‡Šä¸å–èˆ\"\u003eğŸ§  åŸç†è§£é‡Šä¸å–èˆ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ¨¡å¼\u003c/th\u003e\n          \u003cth\u003eç‰¹ç‚¹\u003c/th\u003e\n          \u003cth\u003eé€‚ç”¨åœºæ™¯\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eåŒæ­¥ä¸Šä¼ +å¤„ç†\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå®ç°ç®€å•ï¼Œä½†é˜»å¡ä¸»çº¿ç¨‹\u003c/td\u003e\n          \u003ctd\u003eå°æ–‡ä»¶ã€ä½å¹¶å‘ã€ç¦»çº¿è„šæœ¬\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eå¼‚æ­¥ä¸Šä¼ +çŠ¶æ€æŸ¥è¯¢ï¼ˆæ¨èï¼‰\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eéé˜»å¡ã€å¯æ¢å¤ã€å¯æ‰©å±•\u003c/td\u003e\n          \u003ctd\u003eWeb åº”ç”¨ã€åå°ä»»åŠ¡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eæ¶ˆæ¯é˜Ÿåˆ—é©±åŠ¨\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæ”¯æŒåˆ†å¸ƒå¼ä»»åŠ¡ã€é‡è¯•æœºåˆ¶\u003c/td\u003e\n          \u003ctd\u003eå¤§è§„æ¨¡ç³»ç»Ÿã€å¾®æœåŠ¡æ¶æ„\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eå–èˆåŸåˆ™ï¼š\u003c/p\u003e","title":"ä»å µå¡åˆ°å¼‚æ­¥:ä¸ºä»€ä¹ˆä¸Šä¼ æ–‡ä»¶æ¥å£ä¸è¯¥ç­‰æ–‡ä»¶å¤„ç†å®Œ"},{"content":"ğŸ›°ï¸ WebSocket æ·±å…¥ç†è§£ï¼šä¸ºä»€ä¹ˆè¦ä¿æŒä¸€ä¸ªâ€œæ°¸è¿œåœ¨çº¿â€çš„è¿æ¥ï¼Ÿ âœ¨ å‰¯æ ‡é¢˜ / æ‘˜è¦ è¿™ç¯‡æ–‡ç« å¸¦ä½ å½»åº•ææ‡‚ WebSocketï¼š å®ƒå’Œ HTTP çš„æ ¹æœ¬åŒºåˆ«ã€ä¸ºä»€ä¹ˆéœ€è¦â€œé•¿è¿æ¥â€ã€è¿æ¥æ˜¯å¦‚ä½•å»ºç«‹å’Œä¿æŒçš„ã€ä»¥åŠå®ƒåœ¨å®æ—¶åº”ç”¨ä¸­çš„æ„ä¹‰ã€‚ é€‚åˆæƒ³ä»â€œçŸ¥é“æ˜¯ä»€ä¹ˆâ€åˆ°â€œç†è§£ä¸ºä»€ä¹ˆâ€çš„å¼€å‘è€…ã€‚\nğŸ‘©â€ğŸ’» ç›®æ ‡è¯»è€… Web å‰åç«¯åˆçº§åˆ°ä¸­çº§å¼€å‘è€… æƒ³å®ç°å®æ—¶èŠå¤©ã€AI æµå¼è¾“å‡ºã€åä½œç³»ç»Ÿçš„å·¥ç¨‹å¸ˆ æƒ³ä» HTTP æ¨¡å‹è¿‡æ¸¡åˆ°å®æ—¶æ¶æ„æ€ç»´çš„å­¦ä¹ è€… ğŸ§­ èƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜é‡è¦ï¼Ÿ å‡ ä¹æ¯ä¸ªç°ä»£ Web åº”ç”¨éƒ½æ¶‰åŠâ€œå®æ—¶â€åŠŸèƒ½ï¼š\nèŠå¤©å¯¹è¯ï¼ˆChatGPTã€Slackï¼‰ å®æ—¶é€šçŸ¥ï¼ˆé‚®ç®±ã€æ¶ˆæ¯æé†’ï¼‰ åœ¨çº¿åä½œï¼ˆNotionã€Google Docsï¼‰ æ•°æ®çœ‹æ¿ï¼ˆå®æ—¶æŒ‡æ ‡ã€ç›‘æ§ï¼‰ ç„¶è€Œï¼Œä¼ ç»Ÿçš„ HTTP æ˜¯â€œä¸€é—®ä¸€ç­”â€çš„åè®®ï¼Œ æ— æ³•æ»¡è¶³æœåŠ¡å™¨ä¸»åŠ¨é€šçŸ¥å®¢æˆ·ç«¯ã€ä½å»¶è¿ŸåŒå‘é€šä¿¡çš„éœ€æ±‚ã€‚\nWebSocket çš„å‡ºç°ï¼Œå½»åº•æ”¹å˜äº†è¿™ç§å•å‘å…³ç³»ï¼Œ è®© Web åº”ç”¨ç¬¬ä¸€æ¬¡çœŸæ­£æ‹¥æœ‰äº†â€œå®æ—¶å¯¹è¯â€çš„èƒ½åŠ›ã€‚\nğŸ§  æ ¸å¿ƒæ¦‚å¿µä¸æœ¯è¯­è§£é‡Š åç§° è¯´æ˜ HTTP ä¸€é—®ä¸€ç­”å‹åè®®ã€‚å®¢æˆ·ç«¯å‘è¯·æ±‚ï¼ŒæœåŠ¡å™¨å›å“åº”ï¼Œç„¶åæ–­å¼€ã€‚ é•¿è¿æ¥ ä¸€æ¡ä¿æŒä¸å…³é—­çš„ TCP è¿æ¥ï¼Œå¯åå¤æ”¶å‘æ•°æ®ã€‚ WebSocket ä¸€ç§åŸºäº TCP çš„åŒå‘é€šä¿¡åè®®ï¼Œèƒ½è®©æœåŠ¡å™¨ä¸»åŠ¨æ¨é€æ¶ˆæ¯ã€‚ æ¡æ‰‹ (Handshake) å®¢æˆ·ç«¯é€šè¿‡ HTTP è¯·æ±‚å‘Šè¯‰æœåŠ¡å™¨ï¼šâ€œæˆ‘æƒ³å‡çº§ä¸º WebSocket åè®®â€ã€‚ å¸§ (Frame) WebSocket ä¼ è¾“çš„æœ€å°æ•°æ®å•å…ƒï¼Œæ¯” HTTP header æ›´è½»é‡ã€‚ å¿ƒè·³ (Ping/Pong) å®šæœŸå‘é€çš„å°æ•°æ®åŒ…ï¼Œé˜²æ­¢è¿æ¥è¶…æ—¶æ–­å¼€ã€‚ ğŸªœ å®è·µæŒ‡å—ï¼šWebSocket å»ºç«‹çš„å…¨è¿‡ç¨‹ 1ï¸âƒ£ æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ˆHTTP é˜¶æ®µï¼‰\nGET /chat HTTP/1.1 Host: example.com Upgrade: websocket Connection: Upgrade Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw== è¡¨ç¤ºæƒ³æŠŠè¿™æ¬¡ HTTP é€šä¿¡â€œå‡çº§â€æˆ WebSocketã€‚\n2ï¸âƒ£ æœåŠ¡å™¨åŒæ„å¹¶è¿”å› 101 çŠ¶æ€ç \nHTTP/1.1 101 Switching Protocols Upgrade: websocket Connection: Upgrade Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk= 3ï¸âƒ£ è¿æ¥å‡çº§æˆåŠŸï¼ æ­¤åï¼Œè¿™æ¡ TCP é€šé“ä¸å†èµ° HTTPï¼Œè€Œæ˜¯è¿›å…¥ WebSocket æ¨¡å¼ã€‚ åŒæ–¹éƒ½èƒ½éšæ—¶å‘é€å¸§ï¼ˆFrameï¼‰æ¶ˆæ¯ï¼Œä¸å†éœ€è¦é‡å»ºè¿æ¥ã€‚\nğŸ’» å¯è¿è¡Œç¤ºä¾‹ï¼šFastAPI + åŸç”Ÿ WebSocket from fastapi import FastAPI, WebSocket app = FastAPI() @app.websocket(\u0026#34;/ws\u0026#34;) async def websocket_endpoint(websocket: WebSocket): await websocket.accept() await websocket.send_text(\u0026#34;âœ… WebSocket å·²è¿æ¥\u0026#34;) while True: msg = await websocket.receive_text() await websocket.send_text(f\u0026#34;ä½ å‘é€äº†ï¼š{msg}\u0026#34;) å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼š\nconst ws = new WebSocket(\u0026#34;ws://localhost:8000/ws\u0026#34;); ws.onopen = () =\u0026gt; ws.send(\u0026#34;Hello Server\u0026#34;); ws.onmessage = e =\u0026gt; console.log(\u0026#34;æ”¶åˆ°ï¼š\u0026#34;, e.data); ğŸ” è§£é‡Šä¸åŸç†ï¼šä¸ºä»€ä¹ˆ WebSocket èƒ½â€œä¿æŒè¿æ¥â€ï¼Ÿ 1ï¸âƒ£ åº•å±‚æ˜¯ TCP é•¿è¿æ¥ åªè¦åŒæ–¹ä¸ä¸»åŠ¨æ–­å¼€ï¼ŒTCP å°±èƒ½ä¸€ç›´ç»´æŒé€šé“ã€‚\n2ï¸âƒ£ å¿ƒè·³æœºåˆ¶é˜²æ­¢ä¸­é€”æ–­çº¿ å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¼šå®šæœŸäº’å‘ ping/pong åŒ…ï¼Œå‘Šè¯‰å¯¹æ–¹â€œæˆ‘è¿˜æ´»ç€â€ã€‚\n3ï¸âƒ£ åè®®è½»é‡ã€å¯æŒç»­é€šä¿¡ WebSocket æ•°æ®åŒ…æ ¼å¼æå°ï¼Œä¸”æ˜¯å…¨åŒå·¥ä¼ è¾“ï¼Œ å¯åŒæ—¶è¿›è¡Œè¯»å–ä¸å†™å…¥ï¼Œä¸ä¼šé˜»å¡ã€‚\n4ï¸âƒ£ æœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨æ¨é€ è¿™æ˜¯æœ€é©å‘½æ€§çš„å˜åŒ–ï¼šHTTP ä¸è¡Œï¼ŒWebSocket å¯ä»¥ã€‚\nğŸ§© æ›¿ä»£æ–¹æ¡ˆä¸å–èˆ æ–¹æ¡ˆ ä¼˜ç‚¹ ç¼ºç‚¹ é€‚ç”¨åœºæ™¯ HTTP è½®è¯¢ ç®€å•ã€é€šç”¨ å»¶è¿Ÿé«˜ã€æµªè´¹èµ„æº å°æµé‡ã€ä½å®æ—¶æ€§ Long Polling å®ç°ç®€å• ä»éœ€é¢‘ç¹è¯·æ±‚ ä¸´æ—¶å…¼å®¹ SSE (Server-Sent Events) æœåŠ¡å™¨å•å‘æ¨é€ ä»…æ”¯æŒæ–‡æœ¬ã€æ— åŒå‘ é€šçŸ¥ã€æ—¥å¿—æµ WebSocket åŒå‘å®æ—¶é€šä¿¡ éœ€ç»´æŠ¤çŠ¶æ€ã€å¤æ‚åº¦é«˜ èŠå¤©ã€AIæµå¼è¾“å‡ºã€æ¸¸æˆ Socket.IO WebSocket å°è£… + è‡ªåŠ¨é‡è¿ + æˆ¿é—´ è¾ƒé‡ å¤§è§„æ¨¡å®æ—¶ç³»ç»Ÿ âš ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ è¯´æ˜ è¿æ¥æ–­å¼€ ç½‘ç»œæ³¢åŠ¨ã€ä»£ç†è¶…æ—¶ã€æœåŠ¡å™¨é‡å¯éƒ½ä¼šæ–­ï¼Œéœ€è¦é‡è¿é€»è¾‘ã€‚ å¿ƒè·³ç¼ºå¤± è‹¥é•¿æ—¶é—´æ—  ping/pongï¼Œè¿æ¥å¯èƒ½è¢«æ¸…ç†ã€‚ æ¶ˆæ¯ä¸¢å¤± é‡è¿åè¦åšæ¶ˆæ¯ ID å»é‡ã€è¡¥å‘æœºåˆ¶ã€‚ å®‰å…¨æ€§ ä½¿ç”¨ wss://ï¼ˆTLS åŠ å¯†ï¼‰é˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚ è´Ÿè½½å‡è¡¡ å¤šå®ä¾‹éƒ¨ç½²éœ€ç”¨ Redisã€Kafka ç­‰å¹¿æ’­æ¶ˆæ¯ã€‚ ğŸ’¡ æœ€ä½³å®è·µä¸å»ºè®® 1ï¸âƒ£ ä½¿ç”¨ wss://ï¼ˆåŠ å¯†è¿æ¥ï¼‰ 2ï¸âƒ£ è®¾ç½® ping/pong å¿ƒè·³ï¼Œ3~5 åˆ†é’Ÿå‘é€ä¸€æ¬¡ 3ï¸âƒ£ å»ºç«‹è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼ˆSocket.IO å·²å†…ç½®ï¼‰ 4ï¸âƒ£ åˆ†ç¦»â€œæ¡æ‰‹é‰´æƒâ€ä¸â€œæ¶ˆæ¯é€šé“â€ 5ï¸âƒ£ éœ€è¦å¤šå®ä¾‹æ‰©å®¹æ—¶ï¼Œé…åˆ Redis Pub/Sub å®ç°è·¨èŠ‚ç‚¹å¹¿æ’­ 6ï¸âƒ£ ä¸è¦ç”¨ WebSocket ä¼ å¤§æ–‡ä»¶ï¼ˆæ”¹ç”¨ HTTP ä¸Šä¼ ï¼‰\nğŸ“˜ å°ç»“ / ç»“è®º WebSocket ä¸åªæ˜¯â€œèŠ‚çœè¿æ¥å¼€é”€â€ï¼Œ å®ƒè®© Web åº”ç”¨ç¬¬ä¸€æ¬¡å…·å¤‡äº†ï¼š\nåŒå‘é€šä¿¡ï¼› å®æ—¶æ¨é€ï¼› æµå¼ä¼ è¾“ï¼› çŠ¶æ€åŒæ­¥ã€‚ ä» HTTP çš„â€œä¸€é—®ä¸€ç­”â€ï¼Œ åˆ° WebSocket çš„â€œéšæ—¶å¯¹è¯â€ï¼Œ æˆ‘ä»¬æ­£åœ¨è¿ˆå‘çœŸæ­£çš„â€œå®æ—¶äº’è”ç½‘â€ã€‚\nğŸ’¡ ä¸€å¥è¯æ€»ç»“ï¼š HTTP æ˜¯é—®ç­”ï¼ŒWebSocket æ˜¯é€šè¯ã€‚\nğŸ“š å‚è€ƒä¸å»¶ä¼¸é˜…è¯» MDN: WebSocket API RFC 6455 - The WebSocket Protocol FastAPI WebSocket å®˜æ–¹æ–‡æ¡£ Socket.IO å®˜æ–¹æ–‡æ¡£ Real-Time Applications with Redis Pub/Sub ğŸ·ï¸ å…ƒä¿¡æ¯ â±ï¸ é˜…è¯»æ—¶é•¿ï¼šçº¦ 15 åˆ†é’Ÿ ğŸ“š æ ‡ç­¾ï¼šWebSocketã€HTTPã€å®æ—¶é€šä¿¡ã€FastAPIã€Socket.IO ğŸ” SEO å…³é”®è¯ï¼šWebSocket æ•™ç¨‹ã€HTTP vs WebSocketã€é•¿è¿æ¥åŸç†ã€å®æ—¶èŠå¤© ğŸ“ å…ƒæè¿°ï¼šå…¨é¢è®²è§£ WebSocket çš„å·¥ä½œæœºåˆ¶ã€æ¡æ‰‹è¿‡ç¨‹ã€å¿ƒè·³ä¿æ´»ä¸å®é™…åº”ç”¨ï¼Œé€‚åˆå¸Œæœ›æŒæ¡å®æ—¶é€šä¿¡åŸç†çš„å¼€å‘è€…ã€‚ ğŸš€ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ æƒ³äº²æ‰‹è¯•è¯•ï¼Ÿ ğŸ‘‰ ç”¨ä¸Šé¢çš„ä»£ç ç¤ºä¾‹æ­ä¸€ä¸ªæœ€å° WebSocket èŠå¤©æœåŠ¡ï¼ æœ‰é—®é¢˜æˆ–æƒ³æ·±å…¥åˆ° Socket.IO + Redis åˆ†å¸ƒå¼æ¶æ„ï¼Ÿ æ¬¢è¿ç•™è¨€è¯„è®ºæˆ–è®¢é˜…åç»­æ–‡ç« ã€Šä»å•æœºåˆ°é›†ç¾¤ï¼šæ„å»ºå¯æ‰©å±•çš„å®æ—¶é€šä¿¡ç³»ç»Ÿã€‹ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/websocket%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BF%9D%E6%8C%81%E4%B8%80%E4%B8%AA%E6%B0%B8%E8%BF%9C%E5%9C%A8%E7%BA%BF%E7%9A%84%E8%BF%9E%E6%8E%A5/","summary":"\u003ch1 id=\"-websocket-æ·±å…¥ç†è§£ä¸ºä»€ä¹ˆè¦ä¿æŒä¸€ä¸ªæ°¸è¿œåœ¨çº¿çš„è¿æ¥\"\u003eğŸ›°ï¸ WebSocket æ·±å…¥ç†è§£ï¼šä¸ºä»€ä¹ˆè¦ä¿æŒä¸€ä¸ªâ€œæ°¸è¿œåœ¨çº¿â€çš„è¿æ¥ï¼Ÿ\u003c/h1\u003e\n\u003ch2 id=\"-å‰¯æ ‡é¢˜--æ‘˜è¦\"\u003eâœ¨ å‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/h2\u003e\n\u003cp\u003eè¿™ç¯‡æ–‡ç« å¸¦ä½ å½»åº•ææ‡‚ WebSocketï¼š\nå®ƒå’Œ HTTP çš„æ ¹æœ¬åŒºåˆ«ã€ä¸ºä»€ä¹ˆéœ€è¦â€œé•¿è¿æ¥â€ã€è¿æ¥æ˜¯å¦‚ä½•å»ºç«‹å’Œä¿æŒçš„ã€ä»¥åŠå®ƒåœ¨å®æ—¶åº”ç”¨ä¸­çš„æ„ä¹‰ã€‚\né€‚åˆæƒ³ä»â€œçŸ¥é“æ˜¯ä»€ä¹ˆâ€åˆ°â€œç†è§£ä¸ºä»€ä¹ˆâ€çš„å¼€å‘è€…ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ç›®æ ‡è¯»è€…\"\u003eğŸ‘©â€ğŸ’» ç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eWeb å‰åç«¯åˆçº§åˆ°ä¸­çº§å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eæƒ³å®ç°å®æ—¶èŠå¤©ã€AI æµå¼è¾“å‡ºã€åä½œç³»ç»Ÿçš„å·¥ç¨‹å¸ˆ\u003c/li\u003e\n\u003cli\u003eæƒ³ä» HTTP æ¨¡å‹è¿‡æ¸¡åˆ°å®æ—¶æ¶æ„æ€ç»´çš„å­¦ä¹ è€…\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯--åŠ¨æœºä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜é‡è¦\"\u003eğŸ§­ èƒŒæ™¯ / åŠ¨æœºï¼šä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜é‡è¦ï¼Ÿ\u003c/h2\u003e\n\u003cp\u003eå‡ ä¹æ¯ä¸ªç°ä»£ Web åº”ç”¨éƒ½æ¶‰åŠâ€œå®æ—¶â€åŠŸèƒ½ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eèŠå¤©å¯¹è¯ï¼ˆChatGPTã€Slackï¼‰\u003c/li\u003e\n\u003cli\u003eå®æ—¶é€šçŸ¥ï¼ˆé‚®ç®±ã€æ¶ˆæ¯æé†’ï¼‰\u003c/li\u003e\n\u003cli\u003eåœ¨çº¿åä½œï¼ˆNotionã€Google Docsï¼‰\u003c/li\u003e\n\u003cli\u003eæ•°æ®çœ‹æ¿ï¼ˆå®æ—¶æŒ‡æ ‡ã€ç›‘æ§ï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç„¶è€Œï¼Œä¼ ç»Ÿçš„ HTTP æ˜¯â€œä¸€é—®ä¸€ç­”â€çš„åè®®ï¼Œ\næ— æ³•æ»¡è¶³\u003cstrong\u003eæœåŠ¡å™¨ä¸»åŠ¨é€šçŸ¥å®¢æˆ·ç«¯\u003c/strong\u003eã€\u003cstrong\u003eä½å»¶è¿ŸåŒå‘é€šä¿¡\u003c/strong\u003eçš„éœ€æ±‚ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eWebSocket çš„å‡ºç°\u003c/strong\u003eï¼Œå½»åº•æ”¹å˜äº†è¿™ç§å•å‘å…³ç³»ï¼Œ\nè®© Web åº”ç”¨ç¬¬ä¸€æ¬¡çœŸæ­£æ‹¥æœ‰äº†â€œå®æ—¶å¯¹è¯â€çš„èƒ½åŠ›ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µä¸æœ¯è¯­è§£é‡Š\"\u003eğŸ§  æ ¸å¿ƒæ¦‚å¿µä¸æœ¯è¯­è§£é‡Š\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eåç§°\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eHTTP\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸€é—®ä¸€ç­”å‹åè®®ã€‚å®¢æˆ·ç«¯å‘è¯·æ±‚ï¼ŒæœåŠ¡å™¨å›å“åº”ï¼Œç„¶åæ–­å¼€ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eé•¿è¿æ¥\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸€æ¡ä¿æŒä¸å…³é—­çš„ TCP è¿æ¥ï¼Œå¯åå¤æ”¶å‘æ•°æ®ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eWebSocket\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸€ç§åŸºäº TCP çš„åŒå‘é€šä¿¡åè®®ï¼Œèƒ½è®©æœåŠ¡å™¨ä¸»åŠ¨æ¨é€æ¶ˆæ¯ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eæ¡æ‰‹ (Handshake)\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå®¢æˆ·ç«¯é€šè¿‡ HTTP è¯·æ±‚å‘Šè¯‰æœåŠ¡å™¨ï¼šâ€œæˆ‘æƒ³å‡çº§ä¸º WebSocket åè®®â€ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eå¸§ (Frame)\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eWebSocket ä¼ è¾“çš„æœ€å°æ•°æ®å•å…ƒï¼Œæ¯” HTTP header æ›´è½»é‡ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eå¿ƒè·³ (Ping/Pong)\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå®šæœŸå‘é€çš„å°æ•°æ®åŒ…ï¼Œé˜²æ­¢è¿æ¥è¶…æ—¶æ–­å¼€ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæŒ‡å—websocket-å»ºç«‹çš„å…¨è¿‡ç¨‹\"\u003eğŸªœ å®è·µæŒ‡å—ï¼šWebSocket å»ºç«‹çš„å…¨è¿‡ç¨‹\u003c/h2\u003e\n\u003cp\u003e1ï¸âƒ£ \u003cstrong\u003eæµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ˆHTTP é˜¶æ®µï¼‰\u003c/strong\u003e\u003c/p\u003e","title":"webSocketæ·±å…¥ç†è§£:ä¸ºä»€ä¹ˆè¦ä¿æŒä¸€ä¸ªæ°¸è¿œåœ¨çº¿çš„è¿æ¥"},{"content":"ğŸš€ ä» Pip åˆ° UVï¼šä¸€ç«™å¼ Python åŒ…ç®¡ç†ä¸ä¾èµ–åŒæ­¥æŒ‡å— ğŸ’¡ å‰¯æ ‡é¢˜ / æ‘˜è¦ æƒ³è®©ä½ çš„ Python ç¯å¢ƒæ›´å¹²å‡€ã€æ›´å¿«ã€æ›´å¯é ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»ä¼ ç»Ÿçš„ pip + venv + requirements.txt è¿ç§»åˆ°ç°ä»£çš„ uv åŒ…ç®¡ç†ç³»ç»Ÿï¼Œå¹¶æ•™ä½ å¦‚ä½•åœ¨ä¸¤è€…ä¹‹é—´æ— ç¼åŒæ­¥ã€‚\nğŸ¯ ç›®æ ‡è¯»è€… é€‚åˆ Python å¼€å‘è€…ï¼ˆåˆå­¦è€…åˆ°ä¸­çº§ï¼‰ã€æ•°æ®ç§‘å­¦å®¶ã€åç«¯å·¥ç¨‹å¸ˆï¼Œä»¥åŠå¸Œæœ›æå‡å¼€å‘ç¯å¢ƒä¸€è‡´æ€§ã€å‡å°‘ä¾èµ–åœ°ç‹±çš„è¯»è€…ã€‚\nğŸ”¥ èƒŒæ™¯ / åŠ¨æœº åœ¨æ—¥å¸¸ Python å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸‹ç—›ç‚¹ï¼š\nç¯å¢ƒæ··ä¹±ã€åŒ…å†²çªï¼› pip install å¤ªæ…¢ï¼› ä¸åŒæœºå™¨ã€å›¢é˜Ÿæˆå‘˜ç¯å¢ƒä¸ä¸€è‡´ï¼› requirements.txt æ‰‹åŠ¨ç»´æŠ¤éº»çƒ¦ã€‚ è€Œ uv æ˜¯ä¸€ä¸ªç”± Astral å›¢é˜Ÿæ¨å‡ºçš„æ–°ä¸€ä»£åŒ…ç®¡ç†å·¥å…·ï¼Œ ç”¨ Rust ç¼–å†™ï¼Œé›†æˆäº†ï¼š\nåŒ…å®‰è£…ï¼ˆæ¯” pip å¿«æ•°å€ï¼‰ï¼› è™šæ‹Ÿç¯å¢ƒç®¡ç†ï¼› é”æ–‡ä»¶æœºåˆ¶ï¼ˆå¯å¤ç°ç¯å¢ƒï¼‰ï¼› ä¸ PyPI å®Œå…¨å…¼å®¹ã€‚ ä¸€å¥è¯ï¼šuv = pip + virtualenv + pip-tools + poetry çš„èåˆä½“ã€‚\nğŸ§© æ ¸å¿ƒæ¦‚å¿µ æ¦‚å¿µ è¯´æ˜ pyproject.toml ç°ä»£ Python é¡¹ç›®çš„ä¾èµ–ä¸å…ƒä¿¡æ¯æ–‡ä»¶ uv.lock é”æ–‡ä»¶ï¼Œè®°å½•æ‰€æœ‰ä¾èµ–çš„ç²¾ç¡®ç‰ˆæœ¬ï¼Œä¿è¯å¯å¤ç° uv sync æ ¹æ®é”æ–‡ä»¶åŒæ­¥ç¯å¢ƒï¼ˆè‡ªåŠ¨åˆ›å»º/æ›´æ–°è™šæ‹Ÿç¯å¢ƒï¼‰ uv add / remove æ·»åŠ æˆ–åˆ é™¤ä¾èµ–ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°é”æ–‡ä»¶ uv export å¯¼å‡ºä¸º requirements.txtï¼Œå…¼å®¹ä¼ ç»Ÿ pip æµç¨‹ ğŸ›  å®è·µæŒ‡å— / æ­¥éª¤ ä¸€ã€ä» pip é¡¹ç›®è¿ç§»åˆ° uv å‡è®¾ä½ å·²æœ‰ä¸€ä¸ªé¡¹ç›®ï¼š\nmyproject/ â”œâ”€â”€ requirements.txt â”œâ”€â”€ venv/ â””â”€â”€ main.py 1ï¸âƒ£ å®‰è£… uv curl -LsSf https://astral.sh/uv/install.sh | sh 2ï¸âƒ£ åˆå§‹åŒ–é¡¹ç›® cd myproject uv init ç”Ÿæˆ pyproject.tomlã€‚\n3ï¸âƒ£ å¯¼å…¥æ—§ä¾èµ– uv add --requirements requirements.txt è¿™ä¸€æ­¥ä¼šè‡ªåŠ¨å†™å…¥ä¾èµ–å¹¶ç”Ÿæˆ uv.lockã€‚\n4ï¸âƒ£ åŒæ­¥ç¯å¢ƒ uv sync è‡ªåŠ¨åˆ›å»º .venv å¹¶å®‰è£…æ‰€æœ‰ä¾èµ–ã€‚\n5ï¸âƒ£ éªŒè¯è¿ç§»æˆåŠŸ uv tree æŸ¥çœ‹å®Œæ•´ä¾èµ–æ ‘ã€‚\näºŒã€ä» uv å¯¼å‡ºå› requirements.txt æœ‰æ—¶éƒ¨ç½²ç¯å¢ƒä¸æ”¯æŒ uvï¼Œå¯ä»¥è¿™æ ·å¯¼å‡ºï¼š\nuv export --format requirements.txt \u0026gt; requirements.txt å¯¼å‡ºçš„æ–‡ä»¶å¯ç›´æ¥ç”¨äºï¼š\npip install -r requirements.txt ğŸ§ª å¯è¿è¡Œç¤ºä¾‹ # åˆå§‹åŒ– uv é¡¹ç›® uv init myproject cd myproject # æ·»åŠ ä¾èµ– uv add fastapi requests # é”å®šç‰ˆæœ¬ uv lock # å®‰è£…ä¾èµ– uv sync # å¯¼å‡ºä¸º requirements.txt uv export --format requirements.txt \u0026gt; requirements.txt âš™ï¸ è§£é‡Šä¸åŸç† uv lockï¼šè§£æ pyproject.tomlï¼Œç”Ÿæˆç²¾ç¡®ç‰ˆæœ¬çš„ uv.lockï¼› uv syncï¼šå®‰è£…ä¾èµ–ï¼Œå¹¶åˆ é™¤æœªå£°æ˜åŒ…ï¼Œä¿æŒç¯å¢ƒä¸€è‡´ï¼› uv exportï¼šå°†é”å®šç‰ˆæœ¬å¯¼å‡ºä¸º pip å¯è¯»æ ¼å¼ï¼› uv ä½¿ç”¨ Rust å®ç°ï¼Œé€Ÿåº¦è¿œè¶… pipï¼› æ”¯æŒ PyPI ä¸ç§æœ‰é•œåƒæºï¼› å®Œå…¨å…¼å®¹ä¼ ç»Ÿè™šæ‹Ÿç¯å¢ƒ .venvã€‚ âš ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ è§£å†³ No pyproject.toml found åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ uv init ä¾èµ–å†²çª æ‰‹åŠ¨ç¼–è¾‘ pyproject.toml åé‡æ–°è¿è¡Œ uv lock --upgrade CI/CD æ„å»ºå¤±è´¥ åœ¨æµæ°´çº¿ä¸­ä½¿ç”¨ uv sync --frozen å¯¼å‡ºåç‰ˆæœ¬ä¸åŒæ­¥ ç¡®ä¿å…ˆè¿è¡Œ uv lock å†å¯¼å‡º .venv ä¸ç”Ÿæ•ˆ æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼šsource .venv/bin/activate ğŸŒŸ æœ€ä½³å®è·µä¸å»ºè®® æäº¤ pyproject.toml ä¸ uv.lock åˆ° Gitï¼Œåˆ«æäº¤ .venv/ã€‚\nåœ¨ CI ç¯å¢ƒä¸­ä½¿ç”¨ï¼š\nuv sync --frozen æœ¬åœ°æ·»åŠ ä¾èµ–ç”¨ï¼š\nuv add \u0026lt;åŒ…å\u0026gt; æ›´æ–°ä¾èµ–ç”¨ï¼š\nuv lock --upgrade å¯¼å‡ºéƒ¨ç½²ç”¨ï¼š\nuv export --format requirements.txt \u0026gt; requirements.txt ğŸ“š å°ç»“ / ç»“è®º ä½¿ç”¨ uvï¼Œä½ å¯ä»¥ï¼š\nå¿«é€Ÿå®‰è£…ä¾èµ–ï¼› è‡ªåŠ¨ç®¡ç†è™šæ‹Ÿç¯å¢ƒï¼› ä¿è¯å›¢é˜Ÿç¯å¢ƒä¸€è‡´ï¼› æ— ç¼å…¼å®¹ requirements.txtã€‚ ä» pip è¿ç§»åˆ° uvï¼Œå‡ ä¹é›¶å­¦ä¹ æˆæœ¬ï¼Œå´èƒ½è·å¾—æ•°å€é€Ÿåº¦ä¸ç¨³å®šæ€§ã€‚\nğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯» å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.astral.sh/uv GitHub é¡¹ç›®ï¼šhttps://github.com/astral-sh/uv Poetry vs UV å¯¹æ¯”åˆ†æï¼šReal Python Blog PEP 621: Project metadata in pyproject.toml ğŸ·ï¸ å…ƒä¿¡æ¯ é˜…è¯»æ—¶é•¿ï¼š8 åˆ†é’Ÿ æ ‡ç­¾ï¼šPythonï¼ŒåŒ…ç®¡ç†ï¼Œuvï¼Œpipï¼Œä¾èµ–ç®¡ç†ï¼Œè™šæ‹Ÿç¯å¢ƒ SEO å…³é”®è¯ï¼šPython uvï¼Œuv syncï¼Œpip è¿ç§»ï¼ŒPython åŒ…ç®¡ç†å·¥å…· å…ƒæè¿°ï¼šè¿™æ˜¯ä¸€ç¯‡è¯¦ç»†è®²è§£å¦‚ä½•ä» pip è¿ç§»åˆ° uv çš„æ•™ç¨‹ï¼Œæ¶µç›–ä¾èµ–é”å®šã€åŒæ­¥ã€å¯¼å‡ºå’Œæœ€ä½³å®è·µï¼Œé€‚åˆæƒ³ä¼˜åŒ– Python å¼€å‘ä½“éªŒçš„å·¥ç¨‹å¸ˆã€‚ ğŸš€ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ’¥ ç°åœ¨å°±è¯•è¯•å§ï¼š\ncurl -LsSf https://astral.sh/uv/install.sh | sh uv init myproject uv add fastapi uv sync ğŸ‘‰ æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿ç§»ç»éªŒï¼Œæˆ– Star ä¸€ä¸‹ UV é¡¹ç›® æ”¯æŒä½œè€…ï¼\n","permalink":"http://localhost:1313/jeanblog/posts/%E4%BB%8E-pip-%E5%88%B0-uv%E4%B8%80%E7%AB%99%E5%BC%8F-python-%E5%8C%85%E7%AE%A1%E7%90%86%E4%B8%8E%E4%BE%9D%E8%B5%96%E5%90%8C%E6%AD%A5%E6%8C%87%E5%8D%97/","summary":"\u003ch1 id=\"-ä»-pip-åˆ°-uvä¸€ç«™å¼-python-åŒ…ç®¡ç†ä¸ä¾èµ–åŒæ­¥æŒ‡å—\"\u003eğŸš€ ä» Pip åˆ° UVï¼šä¸€ç«™å¼ Python åŒ…ç®¡ç†ä¸ä¾èµ–åŒæ­¥æŒ‡å—\u003c/h1\u003e\n\u003ch2 id=\"-å‰¯æ ‡é¢˜--æ‘˜è¦\"\u003eğŸ’¡ å‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/h2\u003e\n\u003cp\u003eæƒ³è®©ä½ çš„ Python ç¯å¢ƒæ›´å¹²å‡€ã€æ›´å¿«ã€æ›´å¯é ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»ä¼ ç»Ÿçš„ \u003ccode\u003epip + venv + requirements.txt\u003c/code\u003e è¿ç§»åˆ°ç°ä»£çš„ \u003ccode\u003euv\u003c/code\u003e åŒ…ç®¡ç†ç³»ç»Ÿï¼Œå¹¶æ•™ä½ å¦‚ä½•åœ¨ä¸¤è€…ä¹‹é—´æ— ç¼åŒæ­¥ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ç›®æ ‡è¯»è€…\"\u003eğŸ¯ ç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cp\u003eé€‚åˆ \u003cstrong\u003ePython å¼€å‘è€…\u003c/strong\u003eï¼ˆåˆå­¦è€…åˆ°ä¸­çº§ï¼‰ã€\u003cstrong\u003eæ•°æ®ç§‘å­¦å®¶\u003c/strong\u003eã€\u003cstrong\u003eåç«¯å·¥ç¨‹å¸ˆ\u003c/strong\u003eï¼Œä»¥åŠå¸Œæœ›æå‡å¼€å‘ç¯å¢ƒä¸€è‡´æ€§ã€å‡å°‘ä¾èµ–åœ°ç‹±çš„è¯»è€…ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯--åŠ¨æœº\"\u003eğŸ”¥ èƒŒæ™¯ / åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eåœ¨æ—¥å¸¸ Python å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸‹ç—›ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eç¯å¢ƒæ··ä¹±ã€åŒ…å†²çªï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003epip install\u003c/code\u003e å¤ªæ…¢ï¼›\u003c/li\u003e\n\u003cli\u003eä¸åŒæœºå™¨ã€å›¢é˜Ÿæˆå‘˜ç¯å¢ƒä¸ä¸€è‡´ï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003erequirements.txt\u003c/code\u003e æ‰‹åŠ¨ç»´æŠ¤éº»çƒ¦ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè€Œ \u003cstrong\u003euv\u003c/strong\u003e æ˜¯ä¸€ä¸ªç”± Astral å›¢é˜Ÿæ¨å‡ºçš„æ–°ä¸€ä»£åŒ…ç®¡ç†å·¥å…·ï¼Œ\nç”¨ Rust ç¼–å†™ï¼Œé›†æˆäº†ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåŒ…å®‰è£…ï¼ˆæ¯” pip å¿«æ•°å€ï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eè™šæ‹Ÿç¯å¢ƒç®¡ç†ï¼›\u003c/li\u003e\n\u003cli\u003eé”æ–‡ä»¶æœºåˆ¶ï¼ˆå¯å¤ç°ç¯å¢ƒï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eä¸ PyPI å®Œå…¨å…¼å®¹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸€å¥è¯ï¼š\u003cstrong\u003euv = pip + virtualenv + pip-tools + poetry çš„èåˆä½“\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µ\"\u003eğŸ§© æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ¦‚å¿µ\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003epyproject.toml\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eç°ä»£ Python é¡¹ç›®çš„ä¾èµ–ä¸å…ƒä¿¡æ¯æ–‡ä»¶\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003euv.lock\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eé”æ–‡ä»¶ï¼Œè®°å½•æ‰€æœ‰ä¾èµ–çš„ç²¾ç¡®ç‰ˆæœ¬ï¼Œä¿è¯å¯å¤ç°\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003euv sync\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæ ¹æ®é”æ–‡ä»¶åŒæ­¥ç¯å¢ƒï¼ˆè‡ªåŠ¨åˆ›å»º/æ›´æ–°è™šæ‹Ÿç¯å¢ƒï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003euv add / remove\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæ·»åŠ æˆ–åˆ é™¤ä¾èµ–ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°é”æ–‡ä»¶\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003euv export\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå¯¼å‡ºä¸º \u003ccode\u003erequirements.txt\u003c/code\u003eï¼Œå…¼å®¹ä¼ ç»Ÿ pip æµç¨‹\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæŒ‡å—--æ­¥éª¤\"\u003eğŸ›  å®è·µæŒ‡å— / æ­¥éª¤\u003c/h2\u003e\n\u003ch3 id=\"ä¸€ä»-pip-é¡¹ç›®è¿ç§»åˆ°-uv\"\u003eä¸€ã€ä» pip é¡¹ç›®è¿ç§»åˆ° uv\u003c/h3\u003e\n\u003cp\u003eå‡è®¾ä½ å·²æœ‰ä¸€ä¸ªé¡¹ç›®ï¼š\u003c/p\u003e","title":"ä» Pip åˆ° UVï¼šä¸€ç«™å¼ Python åŒ…ç®¡ç†ä¸ä¾èµ–åŒæ­¥æŒ‡å—"},{"content":"å¯¹äºä¸€ä¸ªç³»ç»Ÿæ¥è¯´ï¼Œå•çº¿ç¨‹å°±åº”è¯¥æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œæˆ‘ä»¬åº”è¯¥ç»™æ¯ä¸ªç”¨æˆ·å°±å•çº¯æä¾›ä¸€ä¸ªåŠ©æ‰‹ï¼Œæˆ‘ä»¬æ‰€éœ€è¦åšçš„å°±æ˜¯ä¼˜åŒ–è¿™ä¸€ä¸ªåŠ©æ‰‹ï¼Œ\nç»å¯¹ä¸æ˜¯å‘ä¸€ä¸ªç”¨æˆ·å¯ä»¥æä¾›å¾ˆå¤šä¸ªçº¿ç¨‹çš„å¤„ç†æ–¹å¼ï¼Œæˆæœ¬å¤ªé«˜\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%AF%B9%E4%BA%8Eai%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%80%9D%E8%80%83/","summary":"\u003cp\u003eå¯¹äºä¸€ä¸ªç³»ç»Ÿæ¥è¯´ï¼Œå•çº¿ç¨‹å°±åº”è¯¥æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œæˆ‘ä»¬åº”è¯¥ç»™æ¯ä¸ªç”¨æˆ·å°±å•çº¯æä¾›ä¸€ä¸ªåŠ©æ‰‹ï¼Œæˆ‘ä»¬æ‰€éœ€è¦åšçš„å°±æ˜¯ä¼˜åŒ–è¿™ä¸€ä¸ªåŠ©æ‰‹ï¼Œ\u003c/p\u003e\n\u003cp\u003eç»å¯¹ä¸æ˜¯å‘ä¸€ä¸ªç”¨æˆ·å¯ä»¥æä¾›å¾ˆå¤šä¸ªçº¿ç¨‹çš„å¤„ç†æ–¹å¼ï¼Œæˆæœ¬å¤ªé«˜\u003c/p\u003e","title":"å¯¹äºaiç³»ç»Ÿçš„æ€è€ƒ"},{"content":"ğŸ§© å¦‚ä½•é«˜æ•ˆå®¡æ ¸ FastAPI åç«¯é¡¹ç›®çš„ Pull Requestï¼ˆPRï¼‰ å‰¯æ ‡é¢˜ / æ‘˜è¦ï¼š æœ¬æ–‡ä¸ºä½ ç³»ç»Ÿæ¢³ç†äº†åœ¨ Python FastAPI é¡¹ç›®ä¸­å¦‚ä½•è¿›è¡Œä¸“ä¸šçš„ä»£ç å®¡æ ¸æµç¨‹ï¼Œä»é€»è¾‘æ­£ç¡®æ€§åˆ°å®‰å…¨ã€æ€§èƒ½ä¸æ¶æ„ä¸€è‡´æ€§ï¼Œé™„å¸¦å®ç”¨å®¡æŸ¥æ¸…å•ä¸ç¤ºä¾‹ï¼ŒåŠ©ä½ æˆä¸ºå›¢é˜Ÿä¸­æ›´é«˜æ•ˆçš„ Reviewerã€‚\nğŸ‘¥ ç›®æ ‡è¯»è€… ä½¿ç”¨ Python + FastAPI çš„ä¸­é«˜çº§åç«¯å¼€å‘è€… åˆå…¥å›¢é˜Ÿã€éœ€è¦å­¦ä¹ ä»£ç å®¡æŸ¥æµç¨‹çš„å·¥ç¨‹å¸ˆ è´Ÿè´£ä»£ç è´¨é‡ä¸åˆå¹¶å†³ç­–çš„ Tech Lead / Reviewer ğŸ’¡ èƒŒæ™¯ä¸åŠ¨æœº åœ¨å¤šäººåä½œçš„åç«¯é¡¹ç›®ä¸­ï¼Œä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰ æ˜¯ä¿éšœç³»ç»Ÿç¨³å®šã€æå‡å›¢é˜Ÿä»£ç è´¨é‡çš„å…³é”®ç¯èŠ‚ã€‚ ä½†è®¸å¤šå·¥ç¨‹å¸ˆåœ¨é¢å¯¹ PR æ—¶å¾€å¾€åªâ€œæµè§ˆä¸€ä¸‹æ”¹åŠ¨â€ï¼Œå¿½ç•¥äº†é€»è¾‘ã€æ€§èƒ½å’Œå®‰å…¨çš„éšæ‚£ã€‚\nå°¤å…¶åœ¨ FastAPI é¡¹ç›®ä¸­ï¼Œæ¥å£ç»“æ„ç®€æ´ã€å¼‚æ­¥ç‰¹æ€§çªå‡ºï¼Œä½†ä¹Ÿå› æ­¤å®¹æ˜“å‡ºç°ï¼š\nä¸å½“çš„ async/await ç”¨æ³•å¯¼è‡´é˜»å¡ï¼› ä¸å®‰å…¨çš„è¾“å…¥æ ¡éªŒï¼› ä¸ä¸€è‡´çš„ Schema ä¸è¿”å›æ¨¡å‹ï¼› éš¾ä»¥ç»´æŠ¤çš„ä¸šåŠ¡é€»è¾‘ã€‚ å› æ­¤ï¼Œæœ¬æ–‡å°†æ•™ä½ å¦‚ä½• ç³»ç»ŸåŒ–ã€æ ‡å‡†åŒ–åœ°å®¡æŸ¥ FastAPI PRã€‚\nğŸ§  æ ¸å¿ƒæ¦‚å¿µ æ¦‚å¿µ è¯´æ˜ PR (Pull Request) åœ¨ Git å¹³å°ä¸Šå‘èµ·ä»£ç åˆå¹¶è¯·æ±‚ï¼Œç­‰å¾…ä»–äººå®¡æ ¸ååˆå¹¶åˆ°ä¸»åˆ†æ”¯ã€‚ Code Review åŒäº‹é—´å¯¹ä»£ç è¿›è¡Œè´¨é‡å’Œè®¾è®¡å®¡æŸ¥çš„è¿‡ç¨‹ã€‚ FastAPI é«˜æ€§èƒ½ã€å¼‚æ­¥çš„ Python Web æ¡†æ¶ï¼ŒåŸºäº Pydantic å’Œ Starletteã€‚ Pydantic Schema FastAPI çš„æ•°æ®éªŒè¯ä¸åºåˆ—åŒ–æ¨¡å‹ç³»ç»Ÿã€‚ Depends() FastAPI çš„ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œç”¨äºæ•°æ®åº“è¿æ¥ã€è®¤è¯ç­‰ã€‚ ğŸ§­ å®è·µæŒ‡å—ï¼šPR å®¡æ ¸æµç¨‹ 1ï¸âƒ£ é˜…è¯» PR æè¿° æ˜ç¡®æ”¹åŠ¨ç›®çš„ã€åŠŸèƒ½èŒƒå›´ã€å¯¹åº” issueã€‚ åˆ¤æ–­æ˜¯å¦ä¸ºä¿®å¤ã€åŠŸèƒ½æ–°å¢ã€é‡æ„æˆ–ä¼˜åŒ–ã€‚ 2ï¸âƒ£ æµè§ˆæ”¹åŠ¨æ–‡ä»¶ æ³¨æ„æ ¸å¿ƒç›®å½•ï¼šrouters/, schemas/, models/, services/, core/ã€‚ æ£€æŸ¥æ˜¯å¦åŒ…å«ä¾èµ–å˜æ›´ã€é…ç½®ä¿®æ”¹æˆ–å¤šä½™æ–‡ä»¶ã€‚ 3ï¸âƒ£ æ·±å…¥é€»è¾‘ä»£ç  é‡ç‚¹å®¡æŸ¥ï¼š\nå‚æ•°ç±»å‹ä¸éªŒè¯ï¼› å¼‚å¸¸å¤„ç†ï¼› æ•°æ®åº“äº‹åŠ¡ä¸ä¼šè¯ç®¡ç†ï¼› ä¸šåŠ¡é€»è¾‘ä¸è¾¹ç•Œæ¡ä»¶ã€‚ 4ï¸âƒ£ æœ¬åœ°éªŒè¯ï¼ˆæ¨èï¼‰ git fetch origin pull/123/head:pr123 git checkout pr123 uvicorn app.main:app --reload é€šè¿‡ Postman / curl è°ƒç”¨æ–°å¢æ¥å£ï¼Œæ£€æŸ¥æ˜¯å¦æŒ‰é¢„æœŸè¿è¡Œã€‚\n5ï¸âƒ£ æŸ¥çœ‹æµ‹è¯•ç»“æœ ç¡®è®¤ CI è‡ªåŠ¨æµ‹è¯•ä¸ lint æ£€æŸ¥é€šè¿‡ï¼ˆpytestã€ruffã€blackã€flake8ï¼‰ã€‚\nğŸ’» å¯è¿è¡Œç¤ºä¾‹ # routers/users.py from fastapi import APIRouter, HTTPException, Depends from sqlalchemy.orm import Session from app.schemas import UserIn, UserOut from app.models import User from app.db import get_db router = APIRouter() @router.post(\u0026#34;/users\u0026#34;, response_model=UserOut) async def create_user(user: UserIn, db: Session = Depends(get_db)): if db.query(User).filter(User.email == user.email).first(): raise HTTPException(status_code=400, detail=\u0026#34;Email already registered\u0026#34;) new_user = User(**user.dict()) db.add(new_user) db.commit() db.refresh(new_user) return new_user å®¡æŸ¥è¦ç‚¹ï¼š\næ˜¯å¦æ­£ç¡®ä½¿ç”¨ response_modelï¼› æ˜¯å¦é¿å…é‡å¤æ³¨å†Œï¼› æ˜¯å¦æœ‰äº‹åŠ¡æäº¤ä¸åˆ·æ–°ï¼› æ˜¯å¦ä½¿ç”¨ Depends(get_db) ç®¡ç†ä¾èµ–ã€‚ ğŸ” è§£é‡Šä¸åŸç† FastAPI çš„ä¾èµ–æ³¨å…¥ä¸æ•°æ®éªŒè¯ç‰¹æ€§ä½¿å…¶æå…·çµæ´»æ€§ï¼Œä½†ä¹Ÿæ„å‘³ç€ï¼š\nä¸æ­£ç¡®çš„å¼‚æ­¥æ“ä½œä¼šé˜»å¡äº‹ä»¶å¾ªç¯ï¼› æœªå°è£…çš„ä¸šåŠ¡é€»è¾‘ä¼šç ´åæ¶æ„å±‚æ¬¡ï¼› è¿‡åº¦ä¿¡ä»»è¾“å…¥æ•°æ®å®¹æ˜“é€ æˆå®‰å…¨æ¼æ´ã€‚ ä¸ Flaskã€Django ç›¸æ¯”ï¼ŒFastAPI æ›´å¼ºè°ƒï¼š\nç±»å‹å®‰å…¨ä¸æ•°æ®å£°æ˜ï¼› å¼‚æ­¥ I/O æ€§èƒ½ï¼› å¯æµ‹è¯•æ€§ä¸è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆã€‚ âš ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ç±»å‹ å…¸å‹é£é™© å¼‚æ­¥é˜»å¡ åœ¨ async def ä¸­ä½¿ç”¨åŒæ­¥ ORM SQL æ³¨å…¥ æ‹¼æ¥ SQL å­—ç¬¦ä¸²è€Œéä½¿ç”¨ ORM æƒé™ç»•è¿‡ æœªéªŒè¯å½“å‰ç”¨æˆ·èº«ä»½ äº‹åŠ¡é—®é¢˜ æœªæ•è·å¼‚å¸¸å¯¼è‡´ session æ‚¬æŒ‚ æ•°æ®æ³„éœ² response_model ä¸­åŒ…å«å¯†ç å“ˆå¸Œ æ— æµ‹è¯• æ–°åŠŸèƒ½æœªè¦†ç›–å•æµ‹ã€ç ´å CI æ„å»º ğŸ§© æœ€ä½³å®è·µä¸å»ºè®® ä¿æŒ PR å°è€Œé›†ä¸­ï¼ˆ\u0026lt;500 è¡Œï¼‰ã€‚ æ‰€æœ‰æ¥å£å¿…é¡»å®šä¹‰ response_modelã€‚ æ•°æ®å±‚ä¸é€»è¾‘å±‚è§£è€¦ï¼Œé¿å…â€œèƒ–è·¯ç”±â€ã€‚ æµ‹è¯•è¦†ç›–æ ¸å¿ƒè·¯å¾„ã€‚ å¯ç”¨ pre-commitï¼ˆlintã€formatã€testï¼‰ã€‚ å®¡æŸ¥é‡ç‚¹ï¼šé€»è¾‘ â†’ æ¶æ„ â†’ å®‰å…¨ â†’ æ€§èƒ½ â†’ æµ‹è¯•ã€‚ ğŸ§¾ å°ç»“ / ç»“è®º ä¸€ä¸ªé«˜è´¨é‡çš„ FastAPI PR å®¡æŸ¥ä¸åªæ˜¯â€œçœ‹ä»£ç â€ï¼Œ è€Œæ˜¯ä¸€æ¬¡ è´¨é‡ä¸æ¶æ„çš„å¤æŸ¥ã€‚\nä½ éœ€è¦å…³æ³¨ï¼š\nåŠŸèƒ½æ˜¯å¦æ­£ç¡®ï¼› å¼‚å¸¸æ˜¯å¦å¤„ç†ï¼› ç»“æ„æ˜¯å¦æ¸…æ™°ï¼› å®‰å…¨ä¸æ€§èƒ½æ˜¯å¦è¾¾æ ‡ï¼› æµ‹è¯•æ˜¯å¦å®Œå–„ã€‚ ä»£ç å®¡æŸ¥çš„ç›®æ ‡ä¸æ˜¯â€œæŒ‘é”™â€ï¼Œè€Œæ˜¯å¸®åŠ©å›¢é˜Ÿå†™å‡ºæ›´æ˜“ç»´æŠ¤ã€æ›´å®‰å…¨çš„åç«¯ç³»ç»Ÿã€‚\nğŸ“š å‚è€ƒä¸å»¶ä¼¸é˜…è¯» FastAPI å®˜æ–¹æ–‡æ¡£ Pydantic å®˜æ–¹æ–‡æ¡£ SQLAlchemy ORM æŒ‡å— pytest æµ‹è¯•æ¡†æ¶ GitHub Code Review æŒ‡å— ğŸ§¾ å…ƒä¿¡æ¯ é¢„è®¡é˜…è¯»æ—¶é•¿ï¼š 10 åˆ†é’Ÿ æ ‡ç­¾ï¼š FastAPI / Python / Code Review / åç«¯å¼€å‘ / å›¢é˜Ÿåä½œ SEO å…³é”®è¯ï¼š FastAPI ä»£ç å®¡æŸ¥, FastAPI PR å®¡æ ¸, FastAPI Code Review, Python åç«¯æœ€ä½³å®è·µ å…ƒæè¿°ï¼š å­¦ä¹ å¦‚ä½•ç³»ç»ŸåŒ–åœ°å®¡æŸ¥ FastAPI é¡¹ç›®ä¸­çš„ PRï¼Œç¡®ä¿é€»è¾‘æ­£ç¡®ã€å®‰å…¨ã€æ€§èƒ½ä¼˜è‰¯ï¼Œå¹¶æä¾›å¯æ‰§è¡Œçš„å®¡æ ¸æ¸…å•ä¸æœ€ä½³å®è·µã€‚ ğŸš€ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ‘‰ æƒ³è®©ä½ çš„å›¢é˜Ÿ Code Review æ›´é«˜æ•ˆï¼Ÿ ä½ å¯ä»¥ï¼š\nâ­ æ”¶è—æœ¬æ–‡å¹¶åœ¨ä¸‹æ¬¡ PR å®¡æŸ¥ä¸­å®è·µï¼› ğŸ’¬ åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ FastAPI å®¡æŸ¥ç»éªŒï¼› ğŸ“¦ å…³æ³¨åç»­æ–‡ç« ï¼šã€Šå¦‚ä½•ç”¨ GitHub Actions è‡ªåŠ¨åŒ– FastAPI æµ‹è¯•ä¸éƒ¨ç½²ã€‹ã€‚ ","permalink":"http://localhost:1313/jeanblog/posts/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%AE%A1%E6%A0%B8%E5%90%8E%E7%AB%AFfastapi%E4%BB%A3%E7%A0%81/","summary":"\u003ch1 id=\"-å¦‚ä½•é«˜æ•ˆå®¡æ ¸-fastapi-åç«¯é¡¹ç›®çš„-pull-requestpr\"\u003eğŸ§© å¦‚ä½•é«˜æ•ˆå®¡æ ¸ FastAPI åç«¯é¡¹ç›®çš„ Pull Requestï¼ˆPRï¼‰\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦ï¼š\u003c/strong\u003e\næœ¬æ–‡ä¸ºä½ ç³»ç»Ÿæ¢³ç†äº†åœ¨ Python FastAPI é¡¹ç›®ä¸­å¦‚ä½•è¿›è¡Œä¸“ä¸šçš„ä»£ç å®¡æ ¸æµç¨‹ï¼Œä»é€»è¾‘æ­£ç¡®æ€§åˆ°å®‰å…¨ã€æ€§èƒ½ä¸æ¶æ„ä¸€è‡´æ€§ï¼Œé™„å¸¦å®ç”¨å®¡æŸ¥æ¸…å•ä¸ç¤ºä¾‹ï¼ŒåŠ©ä½ æˆä¸ºå›¢é˜Ÿä¸­æ›´é«˜æ•ˆçš„ Reviewerã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ç›®æ ‡è¯»è€…\"\u003eğŸ‘¥ ç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨ \u003cstrong\u003ePython + FastAPI\u003c/strong\u003e çš„ä¸­é«˜çº§åç«¯å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eåˆå…¥å›¢é˜Ÿã€éœ€è¦å­¦ä¹ ä»£ç å®¡æŸ¥æµç¨‹çš„å·¥ç¨‹å¸ˆ\u003c/li\u003e\n\u003cli\u003eè´Ÿè´£ä»£ç è´¨é‡ä¸åˆå¹¶å†³ç­–çš„ Tech Lead / Reviewer\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯ä¸åŠ¨æœº\"\u003eğŸ’¡ èƒŒæ™¯ä¸åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eåœ¨å¤šäººåä½œçš„åç«¯é¡¹ç›®ä¸­ï¼Œ\u003cstrong\u003eä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰\u003c/strong\u003e æ˜¯ä¿éšœç³»ç»Ÿç¨³å®šã€æå‡å›¢é˜Ÿä»£ç è´¨é‡çš„å…³é”®ç¯èŠ‚ã€‚\nä½†è®¸å¤šå·¥ç¨‹å¸ˆåœ¨é¢å¯¹ PR æ—¶å¾€å¾€åªâ€œæµè§ˆä¸€ä¸‹æ”¹åŠ¨â€ï¼Œå¿½ç•¥äº†é€»è¾‘ã€æ€§èƒ½å’Œå®‰å…¨çš„éšæ‚£ã€‚\u003c/p\u003e\n\u003cp\u003eå°¤å…¶åœ¨ \u003cstrong\u003eFastAPI\u003c/strong\u003e é¡¹ç›®ä¸­ï¼Œæ¥å£ç»“æ„ç®€æ´ã€å¼‚æ­¥ç‰¹æ€§çªå‡ºï¼Œä½†ä¹Ÿå› æ­¤å®¹æ˜“å‡ºç°ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä¸å½“çš„ \u003ccode\u003easync\u003c/code\u003e/\u003ccode\u003eawait\u003c/code\u003e ç”¨æ³•å¯¼è‡´é˜»å¡ï¼›\u003c/li\u003e\n\u003cli\u003eä¸å®‰å…¨çš„è¾“å…¥æ ¡éªŒï¼›\u003c/li\u003e\n\u003cli\u003eä¸ä¸€è‡´çš„ Schema ä¸è¿”å›æ¨¡å‹ï¼›\u003c/li\u003e\n\u003cli\u003eéš¾ä»¥ç»´æŠ¤çš„ä¸šåŠ¡é€»è¾‘ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå› æ­¤ï¼Œæœ¬æ–‡å°†æ•™ä½ å¦‚ä½• \u003cstrong\u003eç³»ç»ŸåŒ–ã€æ ‡å‡†åŒ–åœ°å®¡æŸ¥ FastAPI PR\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µ\"\u003eğŸ§  æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ¦‚å¿µ\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003ePR (Pull Request)\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eåœ¨ Git å¹³å°ä¸Šå‘èµ·ä»£ç åˆå¹¶è¯·æ±‚ï¼Œç­‰å¾…ä»–äººå®¡æ ¸ååˆå¹¶åˆ°ä¸»åˆ†æ”¯ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eCode Review\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eåŒäº‹é—´å¯¹ä»£ç è¿›è¡Œè´¨é‡å’Œè®¾è®¡å®¡æŸ¥çš„è¿‡ç¨‹ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eFastAPI\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eé«˜æ€§èƒ½ã€å¼‚æ­¥çš„ Python Web æ¡†æ¶ï¼ŒåŸºäº Pydantic å’Œ Starletteã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003ePydantic Schema\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eFastAPI çš„æ•°æ®éªŒè¯ä¸åºåˆ—åŒ–æ¨¡å‹ç³»ç»Ÿã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eDepends()\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eFastAPI çš„ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œç”¨äºæ•°æ®åº“è¿æ¥ã€è®¤è¯ç­‰ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæŒ‡å—pr-å®¡æ ¸æµç¨‹\"\u003eğŸ§­ å®è·µæŒ‡å—ï¼šPR å®¡æ ¸æµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"1-é˜…è¯»-pr-æè¿°\"\u003e1ï¸âƒ£ é˜…è¯» PR æè¿°\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eæ˜ç¡®æ”¹åŠ¨ç›®çš„ã€åŠŸèƒ½èŒƒå›´ã€å¯¹åº” issueã€‚\u003c/li\u003e\n\u003cli\u003eåˆ¤æ–­æ˜¯å¦ä¸ºä¿®å¤ã€åŠŸèƒ½æ–°å¢ã€é‡æ„æˆ–ä¼˜åŒ–ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"2-æµè§ˆæ”¹åŠ¨æ–‡ä»¶\"\u003e2ï¸âƒ£ æµè§ˆæ”¹åŠ¨æ–‡ä»¶\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eæ³¨æ„æ ¸å¿ƒç›®å½•ï¼š\u003ccode\u003erouters/\u003c/code\u003e, \u003ccode\u003eschemas/\u003c/code\u003e, \u003ccode\u003emodels/\u003c/code\u003e, \u003ccode\u003eservices/\u003c/code\u003e, \u003ccode\u003ecore/\u003c/code\u003eã€‚\u003c/li\u003e\n\u003cli\u003eæ£€æŸ¥æ˜¯å¦åŒ…å«ä¾èµ–å˜æ›´ã€é…ç½®ä¿®æ”¹æˆ–å¤šä½™æ–‡ä»¶ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"3-æ·±å…¥é€»è¾‘ä»£ç \"\u003e3ï¸âƒ£ æ·±å…¥é€»è¾‘ä»£ç \u003c/h3\u003e\n\u003cp\u003eé‡ç‚¹å®¡æŸ¥ï¼š\u003c/p\u003e","title":"å¦‚ä½•é«˜æ•ˆå®¡æ ¸åç«¯fastapiä»£ç "},{"content":"ğŸš€ æœ¬åœ°æ­å»º Giteaï¼šæ‰“é€ ä½ çš„ç§äºº GitHubï¼ˆå«å·²æœ‰ä»“åº“å¯¼å…¥æŒ‡å—ï¼‰ å‰¯æ ‡é¢˜ / æ‘˜è¦ï¼š æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æœ¬åœ°ç”µè„‘ä¸Šå®‰è£…è½»é‡çº§ Git æœåŠ¡å™¨ â€”â€” Giteaã€‚ æ— éœ€ rootã€ä¸ä¼šå½±å“ç³»ç»Ÿç¯å¢ƒï¼Œè®©ä½ åƒåœ¨ GitHub ä¸€æ ·ç®¡ç†ã€æŸ¥çœ‹å’Œæ¨é€é¡¹ç›®ï¼Œè¿˜èƒ½å¯¼å…¥å·²æœ‰ä»“åº“ã€‚\nç›®æ ‡è¯»è€…ï¼š ğŸ‘‰ é€‚åˆä¸ªäººå¼€å‘è€…ã€ç‹¬ç«‹å·¥ç¨‹å¸ˆã€å°å‹å›¢é˜ŸæŠ€æœ¯è´Ÿè´£äººã€‚ é€‚ç”¨äºåˆä¸­çº§å¼€å‘è€…ï¼Œæœ‰ Git åŸºç¡€å³å¯ä¸Šæ‰‹ã€‚\nğŸ§  èƒŒæ™¯ / åŠ¨æœº å¾ˆå¤šå¼€å‘è€…å¸Œæœ›ï¼š\nåœ¨å…¬å¸ç”µè„‘æˆ–å†…ç½‘ç¯å¢ƒä¸‹æ‰˜ç®¡ä»£ç ï¼› ä¸æƒ³ä½¿ç”¨äº‘ç«¯ï¼ˆå¦‚ GitHubã€Giteeï¼‰ï¼› åˆå¸Œæœ›æœ‰ Web ç•Œé¢ã€Pull Requestã€ä»£ç æµè§ˆä½“éªŒã€‚ ä½† GitLab å¤ªé‡ï¼ˆåŠ¨è¾„å ç”¨æ•° GB å†…å­˜ï¼‰ï¼Œè€Œ Gitea åˆ™ï¼š\nğŸŒ± è½»é‡çº§ã€å•å¯æ‰§è¡Œæ–‡ä»¶ã€æ”¯æŒ PRã€Wikiã€Issueã€CI/CDã€‚\nåªéœ€å‡ åˆ†é’Ÿï¼Œä½ å°±èƒ½æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨å±äºè‡ªå·±çš„â€œå°å‹ GitHubâ€ã€‚\nğŸ“˜ æ ¸å¿ƒæ¦‚å¿µ åç§° è¯´æ˜ GitLab åŠŸèƒ½æœ€å¼ºå¤§çš„å¼€æº Git å¹³å°ï¼Œä½†èµ„æºå ç”¨é«˜ Gitea è½»é‡çº§è‡ªæ‰˜ç®¡ Git æœåŠ¡ï¼Œç•Œé¢ç±»ä¼¼ GitHub Bare ä»“åº“ åªä¿å­˜ç‰ˆæœ¬æ•°æ®ã€ä¸åŒ…å«å·¥ä½œåŒºçš„çº¯ä»“åº“ Pull Request ä¸€ä¸ªåˆ†æ”¯å‘å¦ä¸€ä¸ªåˆ†æ”¯å‘èµ·çš„åˆå¹¶è¯·æ±‚ SQLite Gitea é»˜è®¤ä½¿ç”¨çš„è½»é‡æ•°æ®åº“ï¼Œæ— éœ€é¢å¤–é…ç½® ğŸ§© å®è·µæŒ‡å— / å®‰è£…æ­¥éª¤ 1ï¸âƒ£ å‡†å¤‡ç¯å¢ƒ ç³»ç»Ÿè¦æ±‚ï¼šLinux / macOS / Windows å‡å¯ æ¨èé…ç½®ï¼šå†…å­˜ â‰¥ 512MBï¼Œç£ç›˜ â‰¥ 1GB\n2ï¸âƒ£ åˆ›å»ºç›®å½•å¹¶ä¸‹è½½ Gitea mkdir -p ~/gitea cd ~/gitea wget -O gitea https://dl.gitea.io/gitea/1.22.0/gitea-1.22.0-linux-amd64 chmod +x gitea 3ï¸âƒ£ å¯åŠ¨ Gitea ./gitea web --port 3000 æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000\n4ï¸âƒ£ å®‰è£…å¼•å¯¼ åœ¨é¡µé¢ä¸­å¡«å†™ï¼š\næ•°æ®åº“ç±»å‹ï¼šSQLite3 ä»“åº“æ ¹è·¯å¾„ï¼š/home/\u0026lt;username\u0026gt;/gitea/repos Gitea Base URLï¼šhttp://localhost:3000 åˆ›å»ºç®¡ç†å‘˜è´¦å· ğŸ’» å¯è¿è¡Œç¤ºä¾‹ï¼šæ¨é€å·²æœ‰ä»“åº“ å‡è®¾ä½ çš„æœ¬åœ°é¡¹ç›®ä½äº /home/gong/projects/scrapyï¼š\n1ï¸âƒ£ åœ¨ Gitea ä¸Šåˆ›å»ºæ–°ä»“åº“ scrapy 2ï¸âƒ£ åœ¨é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œï¼š\ncd ~/projects/scrapy git remote set-url origin http://localhost:3000/JeanphiloGong/scrapy.git git push -u origin --all git push -u origin --tags åˆ·æ–°ç½‘é¡µï¼Œä½ ä¼šçœ‹åˆ°å®Œæ•´çš„é¡¹ç›®å†å²å‡ºç°åœ¨ Gitea ç•Œé¢ã€‚\næ€ä¹ˆæ³¨å†Œåˆ°ç³»ç»ŸæœåŠ¡ 1.å‰æå‡†å¤‡ å‡è®¾å®‰è£…åœ¨\n/home/gong/gitea å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„åœ¨:\n/home/gong/gitea/gitea è¿è¡Œç”¨æˆ· gong ä¸è¦ä½¿ç”¨rootç”¨æˆ·è¿è¡Œgitea\nâš™ï¸ äºŒã€åˆ›å»º Gitea çš„ systemd æœåŠ¡æ–‡ä»¶ 1ï¸âƒ£ æ‰“å¼€æˆ–åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š\nsudo nano /etc/systemd/system/gitea.service 2ï¸âƒ£ ç²˜è´´ä»¥ä¸‹é…ç½®å†…å®¹ï¼ˆé€‚ç”¨äºå•ç”¨æˆ·æœ¬åœ°éƒ¨ç½²ï¼‰ï¼š\n[Unit] Description=Gitea (Self-hosted Git Service) After=network.target [Service] # è¿è¡Œç”¨æˆ·å’Œç»„ User=gong Group=gong # Gitea å·¥ä½œç›®å½•ï¼ˆä½ çš„ gitea ç¨‹åºæ‰€åœ¨ç›®å½•ï¼‰ WorkingDirectory=/home/gong/gitea # å¯åŠ¨å‘½ä»¤ ExecStart=/home/gong/gitea/gitea web --config /home/gong/gitea/custom/conf/app.ini # è‡ªåŠ¨é‡å¯ç­–ç•¥ Restart=always RestartSec=10s # ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰ Environment=USER=gong HOME=/home/gong GITEA_WORK_DIR=/home/gong/gitea # é™åˆ¶æƒé™ï¼ˆå®‰å…¨ï¼‰ PrivateTmp=true ProtectSystem=full NoNewPrivileges=true [Install] WantedBy=multi-user.target âœ… è¯´æ˜ï¼š\nWorkingDirectory æ˜¯ä½ è¿è¡Œ Gitea çš„ç›®å½•ï¼›\nExecStart æŒ‡å®šå¯åŠ¨å‘½ä»¤ï¼›\nRestart=always ç¡®ä¿æ„å¤–ä¸­æ–­åè‡ªåŠ¨é‡å¯ã€‚\nğŸ” ä¸‰ã€åŠ è½½å¹¶å¯ç”¨æœåŠ¡ # é‡æ–°åŠ è½½ systemd é…ç½® sudo systemctl daemon-reload # è®¾ç½®å¼€æœºè‡ªå¯ sudo systemctl enable gitea # å¯åŠ¨æœåŠ¡ sudo systemctl start gitea # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ sudo systemctl status gitea ä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š\nActive: active (running)\nğŸ§  å››ã€æ—¥å¿—æŸ¥çœ‹å‘½ä»¤ æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š\nsudo journalctl -u gitea -f\næŸ¥çœ‹å†å²æ—¥å¿—ï¼š\nsudo journalctl -u gitea \u0026ndash;since \u0026ldquo;1 hour ago\u0026rdquo;\nâš™ï¸ è§£é‡Šä¸åŸç† Gitea æ˜¯ä¸€ä¸ªåŸºäº Go è¯­è¨€å¼€å‘çš„ è‡ªæ‰˜ç®¡ Git æœåŠ¡ã€‚ å®ƒçš„æ ¸å¿ƒåŸç†æ˜¯ç›´æ¥ç®¡ç†æœ¬åœ°çš„ Git ä»“åº“ç›®å½•ï¼ˆ~/gitea/reposï¼‰ï¼Œ é€šè¿‡ HTTP/SSH åè®®æä¾›ä¸ GitHub ç›¸åŒçš„æ“ä½œæ¥å£ã€‚\nç›¸æ¯”ä¹‹ä¸‹ï¼š\ngit init --bare æ˜¯æœ€åŸå§‹çš„ Git æœåŠ¡å™¨ï¼Œåªèƒ½å­˜ä»£ç ï¼› Gitea åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº† Web ç•Œé¢ã€ç”¨æˆ·ç³»ç»Ÿã€PRã€Wiki ç­‰ã€‚ âš ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ åŸå›  è§£å†³æ–¹æ¡ˆ ç«¯å£è¢«å ç”¨ï¼ˆ3000ï¼‰ ç³»ç»Ÿå·²æœ‰æœåŠ¡å ç”¨ æ”¹ç”¨ ./gitea web --port 8080 è®¿é—®æç¤ºæƒé™é—®é¢˜ Gitea ä»¥å½“å‰ç”¨æˆ·è¿è¡Œ æ£€æŸ¥ä»“åº“ç›®å½•æƒé™ æ— æ³•æ¨é€ ä»“åº“åˆå§‹åŒ–å†²çª ä¸è¦å‹¾é€‰ â€œInitialize with READMEâ€ æ¨é€æ…¢æˆ–è¶…æ—¶ ä½¿ç”¨ HTTP è€Œé SSH é…ç½® SSH key åæ¨é€æ›´å¿« ğŸŒŸ æœ€ä½³å®è·µä¸å»ºè®® ä½¿ç”¨ SQLite è¶³å¤Ÿä¸ªäººæˆ–å°å›¢é˜Ÿä½¿ç”¨ï¼›\nç”¨ nohup ./gitea web \u0026amp; åå°è¿è¡Œï¼›\nå®šæœŸå¤‡ä»½ç›®å½•ï¼š\n~/gitea/repos/ ~/gitea/data/gitea.db ~/gitea/custom/conf/app.ini è‹¥å°†æ¥æ‰©å±•å›¢é˜Ÿï¼Œå¯æ— ç¼è¿ç§»è‡³å…¬å¸æœåŠ¡å™¨æˆ– Dockerã€‚\nğŸ§¾ å°ç»“ / ç»“è®º æœ¬æ–‡å¸¦ä½ ä»é›¶å¼€å§‹å®Œæˆï¼š\nåœ¨æœ¬åœ°ç”µè„‘éƒ¨ç½² Gitea ä¿®æ”¹ç«¯å£è¿è¡Œä¸å†²çª å°†å·²æœ‰ Git ä»“åº“æ¨é€åˆ° Gitea æ‹¥æœ‰è‡ªå·±çš„ Web ç•Œé¢ã€PRã€å†å²è®°å½• ğŸ‰ æ­å–œï¼ä½ ç°åœ¨å·²ç»æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨å±äºè‡ªå·±çš„ã€Œç§äºº GitHubã€ã€‚\nğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯» Gitea å®˜æ–¹æ–‡æ¡£ Gitea Releases ä¸‹è½½é¡µ Git å®˜æ–¹ Pro Book Forgejo - ç¤¾åŒºç»´æŠ¤çš„ Gitea åˆ†æ”¯ ğŸ§­ å…ƒä¿¡æ¯ é˜…è¯»æ—¶é•¿ï¼š 8 åˆ†é’Ÿ æ ‡ç­¾ï¼š Git, Gitea, è‡ªå»ºæœåŠ¡, DevOps, ç‰ˆæœ¬æ§åˆ¶ SEO å…³é”®è¯ï¼š Gitea æœ¬åœ°å®‰è£…, è‡ªå»º Git æœåŠ¡å™¨, ç§äºº GitHub, å¯¼å…¥æœ¬åœ°ä»“åº“ å…ƒæè¿°ï¼š åœ¨æœ¬åœ°ç”µè„‘ä¸Šæ­å»ºè½»é‡çº§ Git æœåŠ¡å™¨ Giteaï¼Œæ”¯æŒ PRã€Web æµè§ˆä¸ä»“åº“ç®¡ç†ï¼Œä¸ä¿®æ”¹ç³»ç»Ÿç¯å¢ƒã€‚ ğŸ’¬ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ è¯•è¯•çœ‹å§ ğŸ‘‰\næ‰“å¼€ç»ˆç«¯è¿è¡Œå®‰è£…å‘½ä»¤ï¼› è®¿é—® http://localhost:3000ï¼› åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªä»“åº“ï¼› æŠŠé¡¹ç›®æ¨é€ä¸Šå»ï¼ ğŸ’¡ å¦‚æœä½ æƒ³äº†è§£ å¦‚ä½•è‡ªåŠ¨åŒ–å¯åŠ¨ Gitea + å¤‡ä»½è„šæœ¬ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä¼šåˆ†äº«ä¸‹ä¸€ç¯‡è¿›é˜¶æ–‡ç« ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEgitea/","summary":"\u003ch1 id=\"-æœ¬åœ°æ­å»º-giteaæ‰“é€ ä½ çš„ç§äºº-githubå«å·²æœ‰ä»“åº“å¯¼å…¥æŒ‡å—\"\u003eğŸš€ æœ¬åœ°æ­å»º Giteaï¼šæ‰“é€ ä½ çš„ç§äºº GitHubï¼ˆå«å·²æœ‰ä»“åº“å¯¼å…¥æŒ‡å—ï¼‰\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦ï¼š\u003c/strong\u003e\næœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æœ¬åœ°ç”µè„‘ä¸Šå®‰è£…è½»é‡çº§ Git æœåŠ¡å™¨ â€”â€” Giteaã€‚\næ— éœ€ rootã€ä¸ä¼šå½±å“ç³»ç»Ÿç¯å¢ƒï¼Œè®©ä½ åƒåœ¨ GitHub ä¸€æ ·ç®¡ç†ã€æŸ¥çœ‹å’Œæ¨é€é¡¹ç›®ï¼Œè¿˜èƒ½å¯¼å…¥å·²æœ‰ä»“åº“ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eç›®æ ‡è¯»è€…ï¼š\u003c/strong\u003e\nğŸ‘‰ é€‚åˆä¸ªäººå¼€å‘è€…ã€ç‹¬ç«‹å·¥ç¨‹å¸ˆã€å°å‹å›¢é˜ŸæŠ€æœ¯è´Ÿè´£äººã€‚\né€‚ç”¨äºåˆä¸­çº§å¼€å‘è€…ï¼Œæœ‰ Git åŸºç¡€å³å¯ä¸Šæ‰‹ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯--åŠ¨æœº\"\u003eğŸ§  èƒŒæ™¯ / åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eå¾ˆå¤šå¼€å‘è€…å¸Œæœ›ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨å…¬å¸ç”µè„‘æˆ–å†…ç½‘ç¯å¢ƒä¸‹æ‰˜ç®¡ä»£ç ï¼›\u003c/li\u003e\n\u003cli\u003eä¸æƒ³ä½¿ç”¨äº‘ç«¯ï¼ˆå¦‚ GitHubã€Giteeï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eåˆå¸Œæœ›æœ‰ Web ç•Œé¢ã€Pull Requestã€ä»£ç æµè§ˆä½“éªŒã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä½† \u003cstrong\u003eGitLab å¤ªé‡\u003c/strong\u003eï¼ˆåŠ¨è¾„å ç”¨æ•° GB å†…å­˜ï¼‰ï¼Œè€Œ Gitea åˆ™ï¼š\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eğŸŒ± è½»é‡çº§ã€å•å¯æ‰§è¡Œæ–‡ä»¶ã€æ”¯æŒ PRã€Wikiã€Issueã€CI/CDã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eåªéœ€å‡ åˆ†é’Ÿï¼Œä½ å°±èƒ½æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨å±äºè‡ªå·±çš„â€œå°å‹ GitHubâ€ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µ\"\u003eğŸ“˜ æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eåç§°\u003c/th\u003e\n          \u003cth\u003eè¯´æ˜\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eGitLab\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eåŠŸèƒ½æœ€å¼ºå¤§çš„å¼€æº Git å¹³å°ï¼Œä½†èµ„æºå ç”¨é«˜\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eGitea\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eè½»é‡çº§è‡ªæ‰˜ç®¡ Git æœåŠ¡ï¼Œç•Œé¢ç±»ä¼¼ GitHub\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eBare ä»“åº“\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eåªä¿å­˜ç‰ˆæœ¬æ•°æ®ã€ä¸åŒ…å«å·¥ä½œåŒºçš„çº¯ä»“åº“\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003ePull Request\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸€ä¸ªåˆ†æ”¯å‘å¦ä¸€ä¸ªåˆ†æ”¯å‘èµ·çš„åˆå¹¶è¯·æ±‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eSQLite\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eGitea é»˜è®¤ä½¿ç”¨çš„è½»é‡æ•°æ®åº“ï¼Œæ— éœ€é¢å¤–é…ç½®\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæŒ‡å—--å®‰è£…æ­¥éª¤\"\u003eğŸ§© å®è·µæŒ‡å— / å®‰è£…æ­¥éª¤\u003c/h2\u003e\n\u003ch3 id=\"1-å‡†å¤‡ç¯å¢ƒ\"\u003e1ï¸âƒ£ å‡†å¤‡ç¯å¢ƒ\u003c/h3\u003e\n\u003cp\u003eç³»ç»Ÿè¦æ±‚ï¼šLinux / macOS / Windows å‡å¯\næ¨èé…ç½®ï¼šå†…å­˜ â‰¥ 512MBï¼Œç£ç›˜ â‰¥ 1GB\u003c/p\u003e","title":"å¦‚ä½•é…ç½®gitea"},{"content":"æ ‡é¢˜ ğŸš€ ä»ã€Œfeatã€åˆ°ã€Œfixã€ï¼šæŒæ¡ Git æäº¤è§„èŒƒï¼Œè®©å›¢é˜Ÿåä½œä¸è‡ªåŠ¨åŒ–æ›´é«˜æ•ˆ\nå‰¯æ ‡é¢˜ / æ‘˜è¦ ä¸€ç¯‡ä¸ºå¼€å‘è€…å‡†å¤‡çš„å®ç”¨æŒ‡å—ï¼Œå¸¦ä½ ç†è§£å¹¶æŒæ¡ä¸šç•Œé€šè¡Œçš„ Git æäº¤ä¿¡æ¯æ ‡å‡†ï¼ˆConventional Commitsï¼‰ï¼Œ ä» commit æ ‡ç­¾ï¼ˆå¦‚ feat:ã€fix:ï¼‰åˆ°è‡ªåŠ¨ç”Ÿæˆ changelogï¼Œä¸€æ¬¡å­¦ä¼šå†™å‡ºé«˜è´¨é‡çš„æäº¤è®°å½•ã€‚\nç›®æ ‡è¯»è€… åˆå­¦è€…ï¼šåˆšå¼€å§‹ä½¿ç”¨ Gitï¼Œæƒ³å…»æˆè§„èŒƒæäº¤çš„ä¹ æƒ¯ã€‚ ä¸­çº§å¼€å‘è€…ï¼šå¸Œæœ›è®©æäº¤ä¿¡æ¯å¯¹å›¢é˜Ÿå’Œ CI å·¥å…·æ›´å‹å¥½ã€‚ å›¢é˜Ÿè´Ÿè´£äºº / æ¶æ„å¸ˆï¼šæƒ³å»ºç«‹ç»Ÿä¸€çš„ä»£ç æäº¤æ ‡å‡†ï¼Œæå‡åä½œä¸ç‰ˆæœ¬ç®¡ç†æ•ˆç‡ã€‚ èƒŒæ™¯ / åŠ¨æœº å¤§å¤šæ•°å¼€å‘è€…å†™æäº¤ä¿¡æ¯çš„æ–¹å¼éƒ½æ˜¯è¿™æ ·çš„ï¼š\nâ€œupdate codeâ€ â€œfix bugâ€ â€œä¿®æ”¹ä¸œè¥¿â€\nè¿™ç±»ä¿¡æ¯çŸ­æœŸå¯è¯»ï¼Œé•¿æœŸæ— ç”¨ã€‚ å½“å›¢é˜Ÿäººæ•°å¢å¤šã€é¡¹ç›®å¤æ‚æ—¶ï¼Œæ— æ³•è¿½è¸ªæ”¹åŠ¨æ„å›¾ï¼Œä¹Ÿæ— æ³•è®©è‡ªåŠ¨åŒ–å·¥å…·æ­£ç¡®è¯†åˆ«å˜æ›´ç±»å‹ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸šç•Œæ¨å‡ºäº† Conventional Commitsï¼š ä¸€ä¸ªç®€æ´ç»Ÿä¸€çš„ commit è¯­æ³•æ ‡å‡†ï¼Œè®© Git æäº¤å¯è¯»ã€å¯è¿½è¸ªã€å¯è‡ªåŠ¨åŒ–ã€‚\næ ¸å¿ƒæ¦‚å¿µ Conventional Commits æ˜¯ä¸€ç§æäº¤ä¿¡æ¯æ ¼å¼çº¦å®šï¼Œå®ƒè§„å®šäº†æäº¤æ¶ˆæ¯çš„ç»“æ„ï¼š\n\u0026lt;type\u0026gt;(\u0026lt;scope\u0026gt;): \u0026lt;subject\u0026gt; \u0026lt;body\u0026gt; \u0026lt;footer\u0026gt; typeï¼šæäº¤ç±»å‹ï¼Œå¦‚ featã€fixã€docs scopeï¼šä½œç”¨èŒƒå›´ï¼Œå¯é€‰ï¼ˆå¦‚ uiã€apiï¼‰ subjectï¼šç®€çŸ­æè¿°ï¼ˆä¸è¶…è¿‡ 50 å­—ï¼‰ bodyï¼šè¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰ footerï¼šå¤‡æ³¨ï¼ˆå¦‚ BREAKING CHANGEï¼‰ å®è·µæŒ‡å— / æ­¥éª¤ 1ï¸âƒ£ è®¾ç½® Git ç¼–è¾‘å™¨ä¸º Neovimï¼ˆå¯é€‰ï¼‰\ngit config --global core.editor \u0026#34;nvim\u0026#34; 2ï¸âƒ£ ç¼–å†™æ ‡å‡†åŒ–çš„æäº¤ä¿¡æ¯\ngit commit -m \u0026#34;feat(lsp): é€‚é…æ–°ç‰ˆ nvim-lspconfig æ¥å£\u0026#34; 3ï¸âƒ£ æäº¤è§„èŒƒç»“æ„ç¤ºä¾‹\nfeat(lsp): æ›´æ–° LSP é…ç½®ä»¥é€‚é…æ–°ç‰ˆ nvim-lspconfig - åˆ é™¤æ—§å†™æ³• lspconfig[server].setup - æ”¹ç”¨æ–°å‡½æ•°è°ƒç”¨å½¢å¼ lspconfig(server, {...}) 4ï¸âƒ£ ä½¿ç”¨å·¥å…·å¼ºåˆ¶æ£€æŸ¥è§„èŒƒï¼ˆå¯é€‰ï¼‰\nnpm install -g commitlint @commitlint/config-conventional æ·»åŠ é…ç½®æ–‡ä»¶ .commitlintrc.jsï¼š\nmodule.exports = { extends: [\u0026#34;@commitlint/config-conventional\u0026#34;] }; å¯è¿è¡Œç¤ºä¾‹ # æ–°åŠŸèƒ½æäº¤ git commit -m \u0026#34;feat(auth): æ”¯æŒåŒå› ç´ ç™»å½•\u0026#34; # ä¿®å¤ bug git commit -m \u0026#34;fix(ui): ä¿®å¤æš—è‰²æ¨¡å¼ä¸‹æ–‡å­—ä¸å¯è§\u0026#34; # æ›´æ–°æ–‡æ¡£ git commit -m \u0026#34;docs(readme): è¡¥å……ä½¿ç”¨è¯´æ˜\u0026#34; # é‡æ„ git commit -m \u0026#34;refactor(api): ä¼˜åŒ–ç”¨æˆ·è®¤è¯é€»è¾‘\u0026#34; # æ€§èƒ½ä¼˜åŒ– git commit -m \u0026#34;perf(db): æå‡æŸ¥è¯¢ç¼“å­˜æ•ˆç‡\u0026#34; è§£é‡Šä¸åŸç† è¿™å¥—è§„èŒƒæ¥è‡ª Angular å›¢é˜Ÿçš„ commit message æ ¼å¼ï¼Œ åè¢«å¹¿æ³›é‡‡çº³ä¸ºå¼€æºæ ‡å‡†ï¼ˆConventional Commitsï¼‰ã€‚\nä¼˜åŠ¿ï¼š\nç»“æ„æ¸…æ™°ï¼šä¸€çœ¼çœ‹å‡ºç±»å‹ä¸èŒƒå›´ æœºå™¨å¯è¯»ï¼šå¯è‡ªåŠ¨ç”Ÿæˆ changelog æ˜“äºé›†æˆï¼šé…åˆ semantic-release è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å· æ›¿ä»£æ–¹æ¡ˆï¼š\nGitmojiï¼ˆä½¿ç”¨ emoji æäº¤ï¼‰ Semantic Versioningï¼ˆé…åˆè‡ªåŠ¨å‘ç‰ˆï¼‰ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ è¯´æ˜ æˆ‘èƒ½æ··ç”¨ä¸­æ–‡å’Œè‹±æ–‡å—ï¼Ÿ å¯ä»¥ï¼Œæ¨èæ ‡é¢˜è‹±æ–‡ã€å†…å®¹ä¸­æ–‡ï¼Œä¿æŒä¸€è‡´æ€§ã€‚ ä¸€æ¬¡æäº¤å¤šä¸ªç±»å‹æ€ä¹ˆåŠï¼Ÿ æ‹†åˆ†ä¸ºå¤šæ¬¡æäº¤ï¼Œæ¯æ¬¡åªåšä¸€ç±»äº‹ã€‚ æäº¤å¤ªçŸ­æ²¡å†…å®¹æ€ä¹ˆåŠï¼Ÿ è‡³å°‘å†™æ¸…æ¥šã€Œä¸ºä»€ä¹ˆæ”¹ã€ã€‚ æ˜¯å¦å¿…é¡»å†™ scopeï¼Ÿ å¯é€‰ï¼Œä½†æ¨èåŠ ä¸Šæ¨¡å—åæˆ–åŠŸèƒ½åŸŸã€‚ æœ€ä½³å®è·µä¸å»ºè®® âœ… ä¿æŒä¸€æ¡æäº¤åªåšâ€œä¸€ä»¶äº‹â€ âœ… æ ‡é¢˜é¦–å­—æ¯å°å†™ï¼Œä¸åŠ å¥å· âœ… ç¬¬ä¸€è¡Œ â‰¤ 50 å­— âœ… ç¬¬äºŒè¡Œç©ºä¸€è¡Œï¼Œç¬¬ä¸‰è¡Œå¼€å§‹å†™è¯¦ç»†æè¿° âœ… ä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼ˆå¦‚ addã€fixã€updateï¼‰\nå°ç»“ / ç»“è®º è§„èŒƒåŒ– commit ä¿¡æ¯æ˜¯ä¸€ç§å°æŠ•å…¥ã€å¤§å›æŠ¥çš„ä¹ æƒ¯ã€‚ å®ƒè®©é¡¹ç›®æ›´å¯ç»´æŠ¤ã€è®©å›¢é˜Ÿæ²Ÿé€šæ›´é¡ºç•…ã€è®©è‡ªåŠ¨åŒ–å·¥å…·å¸®ä½ èŠ‚çœæ—¶é—´ã€‚ å†™å¥½ commit message = å†™ç»™æœªæ¥çš„è‡ªå·±å’Œé˜Ÿå‹çœ‹çš„ changelogã€‚\nå‚è€ƒä¸å»¶ä¼¸é˜…è¯» ğŸ“˜ Conventional Commits å®˜æ–¹è§„èŒƒ ğŸ“— Angular Commit Message Guidelines ğŸ§© semantic-release ğŸ§  Gitmoji å…ƒä¿¡æ¯ é˜…è¯»æ—¶é•¿ï¼šçº¦ 6 åˆ†é’Ÿ æ ‡ç­¾ï¼šGitã€å¼€å‘è§„èŒƒã€Conventional Commitsã€å›¢é˜Ÿåä½œ SEO å…³é”®è¯ï¼šGit æäº¤è§„èŒƒã€Conventional Commitsã€feat fix refactorã€æäº¤ä¿¡æ¯æœ€ä½³å®è·µ å…ƒæè¿°ï¼šä¸€ç¯‡ä¸ºå¼€å‘è€…å‡†å¤‡çš„ Git æäº¤è§„èŒƒæŒ‡å—ï¼Œæ•™ä½ ç”¨ feat:ã€fix: ç­‰æ ‡å‡†åŒ–æ ¼å¼å†™å‡ºæ¸…æ™°ã€å¯ç»´æŠ¤çš„ commit messageã€‚ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ’ª å°è¯•ä¸ºä½ ä¸‹ä¸€ä¸ªæäº¤åŠ ä¸Šæ­£ç¡®çš„æ ‡ç­¾å§ï¼š\ngit commit -m \u0026#34;feat: åˆæ¬¡ä½¿ç”¨æäº¤è§„èŒƒ ğŸš€\u0026#34; ğŸ‘‰ æˆ–è€…åœ¨è¯„è®ºåŒºåˆ†äº«ä½ å›¢é˜Ÿçš„æäº¤é£æ ¼ï¼Œè®©æ›´å¤šäººå°‘èµ°å¼¯è·¯ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E6%8E%8C%E6%8F%A1git%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83%E8%AE%A9%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C%E6%9B%B4%E9%AB%98%E6%95%88%E7%8E%87/","summary":"\u003ch3 id=\"æ ‡é¢˜\"\u003e\u003cstrong\u003eæ ‡é¢˜\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003eğŸš€ ä»ã€Œfeatã€åˆ°ã€Œfixã€ï¼šæŒæ¡ Git æäº¤è§„èŒƒï¼Œè®©å›¢é˜Ÿåä½œä¸è‡ªåŠ¨åŒ–æ›´é«˜æ•ˆ\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"å‰¯æ ‡é¢˜--æ‘˜è¦\"\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003eä¸€ç¯‡ä¸ºå¼€å‘è€…å‡†å¤‡çš„å®ç”¨æŒ‡å—ï¼Œå¸¦ä½ ç†è§£å¹¶æŒæ¡ä¸šç•Œé€šè¡Œçš„ Git æäº¤ä¿¡æ¯æ ‡å‡†ï¼ˆConventional Commitsï¼‰ï¼Œ\nä» commit æ ‡ç­¾ï¼ˆå¦‚ \u003ccode\u003efeat:\u003c/code\u003eã€\u003ccode\u003efix:\u003c/code\u003eï¼‰åˆ°è‡ªåŠ¨ç”Ÿæˆ changelogï¼Œä¸€æ¬¡å­¦ä¼šå†™å‡ºé«˜è´¨é‡çš„æäº¤è®°å½•ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"ç›®æ ‡è¯»è€…\"\u003e\u003cstrong\u003eç›®æ ‡è¯»è€…\u003c/strong\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eåˆå­¦è€…\u003c/strong\u003eï¼šåˆšå¼€å§‹ä½¿ç”¨ Gitï¼Œæƒ³å…»æˆè§„èŒƒæäº¤çš„ä¹ æƒ¯ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eä¸­çº§å¼€å‘è€…\u003c/strong\u003eï¼šå¸Œæœ›è®©æäº¤ä¿¡æ¯å¯¹å›¢é˜Ÿå’Œ CI å·¥å…·æ›´å‹å¥½ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå›¢é˜Ÿè´Ÿè´£äºº / æ¶æ„å¸ˆ\u003c/strong\u003eï¼šæƒ³å»ºç«‹ç»Ÿä¸€çš„ä»£ç æäº¤æ ‡å‡†ï¼Œæå‡åä½œä¸ç‰ˆæœ¬ç®¡ç†æ•ˆç‡ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"èƒŒæ™¯--åŠ¨æœº\"\u003e\u003cstrong\u003eèƒŒæ™¯ / åŠ¨æœº\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003eå¤§å¤šæ•°å¼€å‘è€…å†™æäº¤ä¿¡æ¯çš„æ–¹å¼éƒ½æ˜¯è¿™æ ·çš„ï¼š\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eâ€œupdate codeâ€\nâ€œfix bugâ€\nâ€œä¿®æ”¹ä¸œè¥¿â€\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eè¿™ç±»ä¿¡æ¯çŸ­æœŸå¯è¯»ï¼Œé•¿æœŸæ— ç”¨ã€‚\nå½“å›¢é˜Ÿäººæ•°å¢å¤šã€é¡¹ç›®å¤æ‚æ—¶ï¼Œ\u003cstrong\u003eæ— æ³•è¿½è¸ªæ”¹åŠ¨æ„å›¾\u003c/strong\u003eï¼Œä¹Ÿæ— æ³•è®©è‡ªåŠ¨åŒ–å·¥å…·æ­£ç¡®è¯†åˆ«å˜æ›´ç±»å‹ã€‚\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸šç•Œæ¨å‡ºäº† \u003cstrong\u003eConventional Commits\u003c/strong\u003eï¼š\nä¸€ä¸ªç®€æ´ç»Ÿä¸€çš„ commit è¯­æ³•æ ‡å‡†ï¼Œè®© Git æäº¤\u003cstrong\u003eå¯è¯»ã€å¯è¿½è¸ªã€å¯è‡ªåŠ¨åŒ–\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"æ ¸å¿ƒæ¦‚å¿µ\"\u003e\u003cstrong\u003eæ ¸å¿ƒæ¦‚å¿µ\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eConventional Commits\u003c/strong\u003e æ˜¯ä¸€ç§æäº¤ä¿¡æ¯æ ¼å¼çº¦å®šï¼Œå®ƒè§„å®šäº†æäº¤æ¶ˆæ¯çš„ç»“æ„ï¼š\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u0026lt;type\u0026gt;(\u0026lt;scope\u0026gt;): \u0026lt;subject\u0026gt;\n\n\u0026lt;body\u0026gt;\n\n\u0026lt;footer\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003etype\u003c/code\u003eï¼šæäº¤ç±»å‹ï¼Œå¦‚ \u003ccode\u003efeat\u003c/code\u003eã€\u003ccode\u003efix\u003c/code\u003eã€\u003ccode\u003edocs\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003escope\u003c/code\u003eï¼šä½œç”¨èŒƒå›´ï¼Œå¯é€‰ï¼ˆå¦‚ \u003ccode\u003eui\u003c/code\u003eã€\u003ccode\u003eapi\u003c/code\u003eï¼‰\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esubject\u003c/code\u003eï¼šç®€çŸ­æè¿°ï¼ˆä¸è¶…è¿‡ 50 å­—ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebody\u003c/code\u003eï¼šè¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003efooter\u003c/code\u003eï¼šå¤‡æ³¨ï¼ˆå¦‚ BREAKING CHANGEï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"å®è·µæŒ‡å—--æ­¥éª¤\"\u003e\u003cstrong\u003eå®è·µæŒ‡å— / æ­¥éª¤\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003e1ï¸âƒ£ \u003cstrong\u003eè®¾ç½® Git ç¼–è¾‘å™¨ä¸º Neovimï¼ˆå¯é€‰ï¼‰\u003c/strong\u003e\u003c/p\u003e","title":"æŒæ¡gitæäº¤è§„èŒƒ,è®©å›¢é˜Ÿåä½œæ›´é«˜æ•ˆç‡"},{"content":"ä¸ºä»€ä¹ˆèƒ½ Ping é€šå´ SSH ä¸é€šï¼Ÿä¸€æ¬¡â€œå‡ SSH çœŸ VNCâ€ çš„æ’æŸ¥è¿‡ç¨‹ å‰¯æ ‡é¢˜ï¼š ä»è¿æ¥è¢«æ‹’åˆ°åè®®è¯†åˆ«ï¼Œå¸¦ä½ å½»åº•ç†è§£ TCPã€SSH ä¸ VNC çš„åŒºåˆ« é˜…è¯»æ—¶é•¿ï¼š 7 åˆ†é’Ÿ æ ‡ç­¾ï¼š ç½‘ç»œæ’æŸ¥ã€SSHã€VNCã€Linuxã€è¿œç¨‹è¿æ¥ SEO å…³é”®è¯ï¼š SSHè¿æ¥å¤±è´¥ã€kex_exchange_identificationã€VNCç«¯å£5905ã€RFB 003.008ã€SSH vs VNC\nğŸ¯ ç›®æ ‡è¯»è€… Linux ä½¿ç”¨è€…ã€å¼€å‘è€…ã€æœåŠ¡å™¨ç»´æŠ¤äººå‘˜ æƒ³å­¦ä¹ ç½‘ç»œæ’é”™æ€è·¯çš„ä¸­çº§å·¥ç¨‹å¸ˆ å¯¹ SSH/VNC åè®®æœºåˆ¶æœ‰å…´è¶£çš„è¯»è€… ğŸ’¡ èƒŒæ™¯ä¸åŠ¨æœº ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼š\nâ€œæœåŠ¡å™¨èƒ½ ping é€šï¼Œä½† SSH è¿ä¸ä¸Šï¼Ÿâ€\nè¿™ç±»é—®é¢˜å¾ˆå¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨å¤šæœåŠ¡ï¼ˆSSHã€VNCã€HTTPï¼‰æ··è·‘çš„è¿œç¨‹ä¸»æœºä¸Šã€‚ æœ¬æ–‡é€šè¿‡ä¸€æ¬¡çœŸå®æ¡ˆä¾‹ï¼Œå±•ç¤ºä»â€œSSH è¿æ¥å¤±è´¥â€åˆ°â€œå‘ç°ç«¯å£è·‘çš„æ˜¯ VNCâ€çš„å®Œæ•´åˆ†æè¿‡ç¨‹ã€‚\nğŸ” é—®é¢˜ç°è±¡ æ‰§è¡Œå‘½ä»¤ï¼š\nssh chenhm@101.6.142.82 -p 5905 è¾“å‡ºï¼š\nkex_exchange_identification: Connection closed by remote host Connection closed by 101.6.142.82 port 5905 å°è¯• pingï¼š\nping 101.6.142.82 èƒ½é€šï¼Œæ²¡æœ‰ä¸¢åŒ…ã€‚\näºæ˜¯æˆ‘ä»¬çŸ¥é“ï¼š\nä¸»æœºåœ¨çº¿ï¼› ç½‘ç»œè¿é€šï¼› ä½† SSH æ¡æ‰‹é˜¶æ®µå¤±è´¥ã€‚ ğŸ§  æ ¸å¿ƒæ¦‚å¿µè§£æ æ¦‚å¿µ è§£é‡Š Ping ä½¿ç”¨ ICMP åè®®ï¼Œåªæµ‹è¯•ç½‘ç»œè¿é€šæ€§ã€‚ TCP ä¼ è¾“å±‚åè®®ï¼Œè´Ÿè´£å»ºç«‹è¿æ¥ï¼ˆå¦‚ä¸‰æ¬¡æ¡æ‰‹ï¼‰ã€‚ SSH åº”ç”¨å±‚åè®®ï¼ŒåŸºäº TCP æä¾›åŠ å¯†è¿œç¨‹ç™»å½•ã€‚ VNC / RFB å›¾å½¢è¿œç¨‹æ¡Œé¢åè®®ï¼ˆRemote Frame Bufferï¼‰ã€‚ æ¢å¥è¯è¯´ï¼šPing é€š â‰  SSH é€šï¼Œå› ä¸ºå®ƒä»¬è¿è¡Œåœ¨ä¸åŒåè®®å±‚ã€‚\nâš™ï¸ å®è·µæ’æŸ¥æ­¥éª¤ Step 1. æµ‹è¯• TCP æ˜¯å¦è¿é€š telnet 101.6.142.82 5905 è¾“å‡ºï¼š\nTrying 101.6.142.82... Connected to 101.6.142.82. Escape character is \u0026#39;^]\u0026#39;. RFB 003.008 ğŸš¨ å…³é”®çº¿ç´¢ï¼š RFB 003.008 æ˜¯ VNC åè®®çš„æ¡æ‰‹å­—ç¬¦ä¸²ï¼ˆRemote Frame Buffer version 3.8ï¼‰ã€‚\nè¿™è¯´æ˜ï¼š\n5905 ç«¯å£ç¡®å®å¼€æ”¾ï¼› ä½†è¿è¡Œçš„æ˜¯ VNC æœåŠ¡ï¼Œè€Œä¸æ˜¯ SSHã€‚ ğŸ§© åŸç†è§£é‡Š SSH å®¢æˆ·ç«¯åœ¨ TCP å±‚è¿ä¸Šåï¼Œä¼šå‘å‡ºåŠ å¯†æ¡æ‰‹è¯·æ±‚ï¼ˆSSH-2.0-OpenSSH_8.xï¼‰ã€‚ è€Œ VNC æœåŠ¡å™¨åœ¨ç›¸åŒé˜¶æ®µè¿”å› RFB 003.008ã€‚ åè®®ä¸åŒ¹é… â†’ SSH å®¢æˆ·ç«¯ç›´æ¥å…³é—­è¿æ¥ã€‚\nè¿™æ­£æ˜¯ kex_exchange_identification é”™è¯¯çš„æœ¬è´¨åŸå› ã€‚\nğŸ§° éªŒè¯ä¸ç¡®è®¤ 1ï¸âƒ£ æŸ¥çœ‹ç«¯å£æœåŠ¡\nsudo ss -tlnp | grep 5905 å¯èƒ½è¾“å‡ºï¼š\nLISTEN 0 5 0.0.0.0:5905 ... /usr/bin/Xvnc è¯´æ˜è¯¥ç«¯å£å±äº VNC æœåŠ¡ã€‚\n2ï¸âƒ£ æŸ¥çœ‹ SSH ç›‘å¬ç«¯å£\nsudo grep ^Port /etc/ssh/sshd_config å¦‚æœè¿”å› Port 22ï¼Œé‚£ SSH ä»åœ¨é»˜è®¤ç«¯å£ã€‚\nğŸ§­ æ­£ç¡®çš„è¿æ¥æ–¹å¼ âœ… è‹¥ä½ æƒ³è¿æ¥å›¾å½¢ç•Œé¢ ä½¿ç”¨ VNC å®¢æˆ·ç«¯ï¼š\nvncviewer 101.6.142.82:5905 æˆ–ä½¿ç”¨å·¥å…·ï¼š\nRealVNC TigerVNC TightVNC âœ… è‹¥ä½ æƒ³è¿æ¥ç»ˆç«¯ ä½¿ç”¨ SSHï¼ˆé»˜è®¤ç«¯å£ï¼‰ï¼š\nssh chenhm@101.6.142.82 -p 22 ğŸ› ï¸ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ å¯èƒ½åŸå›  è§£å†³æ–¹å¼ Connection closed by remote host åè®®ä¸åŒ¹é…ï¼ˆSSHâ†’VNCï¼‰ ä½¿ç”¨æ­£ç¡®åè®®è¿æ¥ SSH æ— æ³•è¿æ¥ä»»ä½•ç«¯å£ SSH æœåŠ¡æœªå¯åŠ¨ sudo systemctl start sshd VNC è¿æ¥æ‹’ç» é˜²ç«å¢™æœªæ”¾è¡Œç«¯å£ firewall-cmd --add-port=5905/tcp --permanent SSH è¢«æ–­å¼€ fail2ban å°ç¦ æ£€æŸ¥ /var/log/auth.log ğŸ§© æœ€ä½³å®è·µä¸å»ºè®® åŒºåˆ†ç«¯å£ä¸åè®®ï¼šä»…å‡­ç«¯å£å·ä¸èƒ½åˆ¤æ–­æœåŠ¡ç±»å‹ã€‚\nä½¿ç”¨ telnet / nc æ¢æµ‹åè®®æ ‡è¯†ï¼Œæ˜¯å¿«é€Ÿåˆ¤æ–­æœåŠ¡ç±»å‹çš„æŠ€å·§ã€‚\nå…»æˆæŸ¥çœ‹æ—¥å¿—çš„ä¹ æƒ¯ï¼šjournalctl -u sshã€/var/log/auth.logã€‚\nä¸ºå¤šæœåŠ¡ä¸»æœºè®¾ç½®æ¸…æ™°ç«¯å£è§„åˆ’ï¼Œä¾‹å¦‚ï¼š\nSSH â†’ 22 VNC â†’ 5900+ HTTP â†’ 80/8080 HTTPS â†’ 443 ğŸ§¾ å°ç»“ æœ¬æ–‡é€šè¿‡ä¸€ä¸ªâ€œèƒ½ ping é€šä½† ssh ä¸é€šâ€çš„æ¡ˆä¾‹ï¼Œå±•ç¤ºäº†ï¼š\nå¦‚ä½•åŒºåˆ†ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ä¸åº”ç”¨å±‚é—®é¢˜ï¼› å¦‚ä½•è¯†åˆ«åè®®ï¼ˆRFB vs SSHï¼‰ï¼› å¦‚ä½•å¿«é€Ÿå®šä½çœŸæ­£è¿è¡Œçš„æœåŠ¡ã€‚ ä¸€å¥è¯æ€»ç»“ï¼š ä¸æ˜¯ SSH åäº†ï¼Œè€Œæ˜¯ä½ è¿é”™äº†æœåŠ¡ã€‚\nğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯» OpenSSH å®˜æ–¹æ–‡æ¡£ TigerVNC GitHub [Linux man pages: ssh, telnet, ss, netstat] RFC 6143: The Remote Framebuffer Protocol (RFB) ğŸš€ è¡ŒåŠ¨å·å¬ ğŸ‘‰ è¯•è¯•çœ‹ï¼ åœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼š\nnc \u0026lt;server_ip\u0026gt; \u0026lt;port\u0026gt; çœ‹çœ‹å®ƒè¿”å›ä»€ä¹ˆåè®®å¤´ï¼Œä¹Ÿè®¸ä½ ä¼šå‘ç°æ›´å¤šâ€œéšè—æœåŠ¡â€ã€‚\nğŸ’¬ æœ‰è¶£çš„ç½‘ç»œæ’æŸ¥æ¡ˆä¾‹ï¼Ÿ æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ•…äº‹æˆ–é—®é¢˜ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%AF%E4%BB%A5ping%E9%80%9A%E5%8D%B4ssh%E4%B8%8D%E9%80%9A%E4%B8%80%E6%AC%A1%E5%81%87ssh%E7%9C%9Fvnc%E7%9A%84%E6%8E%92%E6%9F%A5%E8%BF%87%E7%A8%8B/","summary":"\u003ch1 id=\"ä¸ºä»€ä¹ˆèƒ½-ping-é€šå´-ssh-ä¸é€šä¸€æ¬¡å‡-ssh-çœŸ-vnc-çš„æ’æŸ¥è¿‡ç¨‹\"\u003e\u003cstrong\u003eä¸ºä»€ä¹ˆèƒ½ Ping é€šå´ SSH ä¸é€šï¼Ÿä¸€æ¬¡â€œå‡ SSH çœŸ VNCâ€ çš„æ’æŸ¥è¿‡ç¨‹\u003c/strong\u003e\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ï¼š\u003c/strong\u003e ä»è¿æ¥è¢«æ‹’åˆ°åè®®è¯†åˆ«ï¼Œå¸¦ä½ å½»åº•ç†è§£ TCPã€SSH ä¸ VNC çš„åŒºåˆ«\n\u003cstrong\u003eé˜…è¯»æ—¶é•¿ï¼š\u003c/strong\u003e 7 åˆ†é’Ÿ\n\u003cstrong\u003eæ ‡ç­¾ï¼š\u003c/strong\u003e ç½‘ç»œæ’æŸ¥ã€SSHã€VNCã€Linuxã€è¿œç¨‹è¿æ¥\n\u003cstrong\u003eSEO å…³é”®è¯ï¼š\u003c/strong\u003e SSHè¿æ¥å¤±è´¥ã€kex_exchange_identificationã€VNCç«¯å£5905ã€RFB 003.008ã€SSH vs VNC\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ç›®æ ‡è¯»è€…\"\u003eğŸ¯ ç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eLinux ä½¿ç”¨è€…ã€å¼€å‘è€…ã€æœåŠ¡å™¨ç»´æŠ¤äººå‘˜\u003c/li\u003e\n\u003cli\u003eæƒ³å­¦ä¹ ç½‘ç»œæ’é”™æ€è·¯çš„ä¸­çº§å·¥ç¨‹å¸ˆ\u003c/li\u003e\n\u003cli\u003eå¯¹ SSH/VNC åè®®æœºåˆ¶æœ‰å…´è¶£çš„è¯»è€…\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯ä¸åŠ¨æœº\"\u003eğŸ’¡ èƒŒæ™¯ä¸åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼š\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eâ€œæœåŠ¡å™¨èƒ½ ping é€šï¼Œä½† SSH è¿ä¸ä¸Šï¼Ÿâ€\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eè¿™ç±»é—®é¢˜å¾ˆå¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨å¤šæœåŠ¡ï¼ˆSSHã€VNCã€HTTPï¼‰æ··è·‘çš„è¿œç¨‹ä¸»æœºä¸Šã€‚\næœ¬æ–‡é€šè¿‡ä¸€æ¬¡çœŸå®æ¡ˆä¾‹ï¼Œå±•ç¤ºä»â€œSSH è¿æ¥å¤±è´¥â€åˆ°â€œå‘ç°ç«¯å£è·‘çš„æ˜¯ VNCâ€çš„å®Œæ•´åˆ†æè¿‡ç¨‹ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-é—®é¢˜ç°è±¡\"\u003eğŸ” é—®é¢˜ç°è±¡\u003c/h2\u003e\n\u003cp\u003eæ‰§è¡Œå‘½ä»¤ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003essh chenhm@101.6.142.82 -p \u003cspan style=\"color:#ae81ff\"\u003e5905\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¾“å‡ºï¼š\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ekex_exchange_identification: Connection closed by remote host\nConnection closed by 101.6.142.82 port 5905\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eå°è¯• \u003ccode\u003eping\u003c/code\u003eï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eping 101.6.142.82\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eèƒ½é€šï¼Œæ²¡æœ‰ä¸¢åŒ…ã€‚\u003c/p\u003e\n\u003cp\u003eäºæ˜¯æˆ‘ä»¬çŸ¥é“ï¼š\u003c/p\u003e","title":"ä¸ºä»€ä¹ˆå¯ä»¥Pingé€šå´sshä¸é€š?ä¸€æ¬¡å‡sshçœŸvncçš„æ’æŸ¥è¿‡ç¨‹"},{"content":"æ ‡é¢˜ï¼š ğŸš€ åœ¨æ—  sudo ç¯å¢ƒä¸‹è®© sshd å¸¸é©»è¿è¡Œï¼šä»é”™è¯¯æ’æŸ¥åˆ° nohup ä¸ systemd åŒæ–¹æ¡ˆå®æˆ˜\nå‰¯æ ‡é¢˜ / æ‘˜è¦ï¼š æœ¬æ–‡è®²è¿°å¦‚ä½•åœ¨æ™®é€šç”¨æˆ·æƒé™ä¸‹è¿è¡Œ OpenSSH æœåŠ¡ï¼Œé€æ­¥è§£å†³â€œè¿æ¥è¢«æ‹’ç»â€â€œå¯†ç è®¤è¯å¤±è´¥â€â€œsystemd start-limit-hitâ€ç­‰å…¸å‹é—®é¢˜ï¼Œå¹¶æœ€ç»ˆç”¨ nohup ä¸ systemd å®ç°æŒä¹…è¿è¡Œã€‚\nç›®æ ‡è¯»è€…ï¼š Linux ä¸­çº§ç”¨æˆ·ã€ç§‘ç ”æˆ–ä¼ä¸šå¤šç”¨æˆ·æœåŠ¡å™¨ä½¿ç”¨è€…ã€æ—  root æƒé™çš„ SSH è‡ªéƒ¨ç½²è€…ã€‚\nä¸€ã€èƒŒæ™¯ / åŠ¨æœº åœ¨éƒ¨åˆ†é«˜æ ¡å®éªŒå®¤æˆ–äº‘ä¸»æœºç¯å¢ƒä¸­ï¼Œæ™®é€šè´¦æˆ·æ²¡æœ‰ sudo æƒé™ï¼Œé»˜è®¤ sshd æœåŠ¡æ— æ³•å¯åŠ¨ã€‚ å½“æˆ‘ä»¬éœ€è¦ï¼š\nè¿œç¨‹è®¿é—®è‡ªå·±çš„ Linux ä¸»æœºï¼› ä½¿ç”¨ VS Code Remote æˆ– SCP ä¼ æ–‡ä»¶ï¼› ä½†åˆæ— æ³•ä¿®æ”¹ç³»ç»Ÿçº§é…ç½®ï¼› å°±å¿…é¡»åœ¨ç”¨æˆ·æ€è‡ªè¡Œè¿è¡Œ sshdã€‚ ç„¶è€Œè¿™ä¼šå¼•å‘ä¸€ç³»åˆ—é—®é¢˜ï¼šç«¯å£å†²çªã€é˜²ç«å¢™ã€è®¤è¯å¤±è´¥ã€start-limit-hit ç­‰ã€‚ äºŒã€æ ¸å¿ƒæ¦‚å¿µ åç§° å«ä¹‰ sshd OpenSSH å®ˆæŠ¤è¿›ç¨‹ï¼Œè´Ÿè´£å¤„ç† SSH ç™»å½•è¯·æ±‚ ç”¨æˆ·æ€ sshd é root ç”¨æˆ·æ‰‹åŠ¨å¯åŠ¨çš„ sshd å®ä¾‹ï¼Œä»…æœ‰ç”¨æˆ·æƒé™ authorized_keys å­˜æ”¾å…è®¸ç™»å½•çš„å…¬é’¥ nohup è®©ç¨‹åºè„±ç¦»ç»ˆç«¯åå°è¿è¡Œ systemd \u0026ndash;user ç”¨æˆ·çº§ systemd å®ä¾‹ï¼Œå¯ç®¡ç†è‡ªå¯æœåŠ¡ start-limit-hit systemd æ£€æµ‹åˆ°æœåŠ¡é¢‘ç¹é€€å‡ºåè‡ªåŠ¨æš‚åœé‡å¯ ä¸‰ã€å®è·µæŒ‡å— / å…¨æµç¨‹æ­¥éª¤ 1ï¸âƒ£ ç”Ÿæˆå¹¶é…ç½® SSH å¯†é’¥ ssh-keygen -t ed25519 -C \u0026#34;\u0026#34; -f ~/.ssh/id_ed25519_noemail cat ~/.ssh/id_ed25519_noemail.pub \u0026gt;\u0026gt; ~/.ssh/authorized_keys chmod 700 ~/.ssh chmod 600 ~/.ssh/authorized_keys ç¡®ä¿ ~/.ssh/authorized_keys æƒé™æ­£ç¡®ã€‚\n2ï¸âƒ£ ç¼–å†™ç”¨æˆ·æ€ sshd é…ç½®æ–‡ä»¶ ~/.ssh/ssh_config_pub\nPort 2223 ListenAddress 0.0.0.0 HostKey /home/chenhm/.ssh/ssh_host_ed25519_key AuthorizedKeysFile /home/chenhm/.ssh/authorized_keys PasswordAuthentication no PubkeyAuthentication yes PidFile /home/chenhm/.ssh/sshd_pub.pid LogLevel INFO SyslogFacility AUTH ç”Ÿæˆ HostKeyï¼š\nssh-keygen -t ed25519 -f ~/.ssh/ssh_host_ed25519_key -N \u0026#34;\u0026#34; 3ï¸âƒ£ æ‰‹åŠ¨è°ƒè¯•å¯åŠ¨ /usr/bin/sshd -d -f ~/.ssh/ssh_config_pub çœ‹åˆ° Server listening on 0.0.0.0 port 2223 å³æˆåŠŸã€‚\nå››ã€ä¸¤ç§å¸¸é©»è¿è¡Œæ–¹æ¡ˆ âœ… æ–¹æ¡ˆ Aï¼šä½¿ç”¨ nohup åå°è¿è¡Œï¼ˆæœ€ç®€å•ï¼‰ nohup /usr/bin/sshd -f ~/.ssh/ssh_config_pub -E ~/.ssh/sshd_pub.log \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 \u0026amp; é€€å‡ºç»ˆç«¯åä¾æ—§è¿è¡Œï¼›\næŸ¥çœ‹è¿›ç¨‹ï¼š\nps -ef | grep \u0026#34;sshd -f\u0026#34; æŸ¥çœ‹æ—¥å¿—ï¼š\ntail -f ~/.ssh/sshd_pub.log åœæ­¢ï¼š\npkill -f \u0026#34;sshd -f /home/chenhm/.ssh/ssh_config_pub\u0026#34; ä¼˜ç‚¹ï¼š æ— ä¾èµ–ã€ç«‹å³å¯ç”¨ã€‚ ç¼ºç‚¹ï¼š ç³»ç»Ÿé‡å¯åä¸ä¼šè‡ªåŠ¨æ¢å¤ã€‚\nâœ… æ–¹æ¡ˆ Bï¼šä½¿ç”¨ systemd ç”¨æˆ·æœåŠ¡ï¼ˆè‡ªåŠ¨é‡å¯ / å¼€æœºè‡ªå¯ï¼‰ 1ï¸âƒ£ åˆ›å»ºæœåŠ¡æ–‡ä»¶ ~/.config/systemd/user/sshd-user.service\n[Unit] Description=User-level SSH server [Service] Type=forking ExecStart=/usr/bin/sshd -f /home/chenhm/.ssh/ssh_config_pub -E /home/chenhm/.ssh/sshd_pub.log PIDFile=/home/chenhm/.ssh/sshd_pub.pid Restart=on-failure RestartSec=5 [Install] WantedBy=default.target 2ï¸âƒ£ åŠ è½½å¹¶å¯åŠ¨ systemctl --user daemon-reload systemctl --user enable sshd-user systemctl --user start sshd-user 3ï¸âƒ£ éªŒè¯ systemctl --user status sshd-user ss -tlnp | grep sshd å‡ºç° Active: active (running) ä¸ 0.0.0.0:2223 å³ä¸ºæˆåŠŸã€‚\näº”ã€é”™è¯¯æ’æŸ¥ä¸è§£å†³å†ç¨‹ é”™è¯¯ åŸå›  è§£å†³æ–¹æ¡ˆ Connection refused sshd æœªç›‘å¬å…¬ç½‘ / ç«¯å£è¢«é˜²ç«å¢™æ‹¦æˆª æ”¹ ListenAddress 0.0.0.0ï¼Œæ£€æŸ¥ ss -tlnp Permission denied (password) é root æ— æ³•è®¿é—® /etc/shadow å¯†ç  ä½¿ç”¨ å…¬é’¥ç™»å½• Bind to port ... failed: Address already in use ç«¯å£è¢«æ—§ sshd å ç”¨ pkill -f \u0026quot;sshd -f\u0026quot; start-limit-hit systemd è®¤ä¸ºæœåŠ¡é¢‘ç¹é€€å‡º åœ¨ service æ–‡ä»¶ä¸­åŠ å…¥ Type=forking ä¸ PIDFile= æ— æ—¥å¿—è¾“å‡º è·¯å¾„é”™è¯¯æˆ–æƒé™ä¸å¤Ÿ ä½¿ç”¨ -E ~/.ssh/sshd.log è¾“å‡ºæ—¥å¿— å…­ã€ä¸ºä»€ä¹ˆè¿™æ ·åšå¯è¡Œ ç”¨æˆ·æ€ sshd ä¸éœ€è¦ root ï¼Œå› ä¸ºå®ƒåªç›‘å¬ç”¨æˆ·æœ‰æƒé™çš„ç«¯å£ï¼ˆâ‰¥1024ï¼‰ã€‚ å…¬é’¥è®¤è¯ ç»•è¿‡ /etc/shadow æƒé™é™åˆ¶ã€‚ Type=forking è®© systemd æ­£ç¡®è¯†åˆ«åå° daemonã€‚ PIDFile å¸®åŠ© systemd è¿½è¸ªè¿›ç¨‹ã€‚ ä¸ƒã€å¸¸è§æ³¨æ„äº‹é¡¹ ç«¯å£ \u0026gt; 1024ï¼šé root ç”¨æˆ·æ— æ³•ç»‘å®šä½ç«¯å£ã€‚ é˜²ç«å¢™ï¼šéœ€æ”¾è¡Œå¯¹åº”ç«¯å£ï¼Œå¦åˆ™å¤–éƒ¨è¿æ¥è¢«æ‹’ã€‚ æƒé™ä¸¥æ ¼ï¼š~/.ssh å¿…é¡» 700ï¼Œ authorized_keys å¿…é¡» 600ã€‚ é‡å¤å®ä¾‹ï¼šä¸åŒé…ç½®æ–‡ä»¶éœ€ç‹¬ç«‹ PidFile ä¸ æ—¥å¿—æ–‡ä»¶ã€‚ å¼€æœºè‡ªå¯ï¼šå¯ç”¨ systemctl --user enable sshd-user åå³å¯ã€‚ å…«ã€æœ€ä½³å®è·µä¸å»ºè®® ç”¨ nohup è°ƒè¯•ã€ä¸´æ—¶è¿è¡Œï¼› ç”¨ systemd \u0026ndash;user ç®¡ç†æ­£å¼å¸¸é©»ï¼› å…¬ç½‘æ¥å£å»ºè®®åªå¼€æ”¾å¯†é’¥ç™»å½•ï¼› ä¸åŒç«¯å£åŒºåˆ†å†…ç½‘ä¸å¤–ç½‘è®¿é—®ï¼› ç»“åˆ crontab @reboot å¯åœ¨ systemd ä¸å¯ç”¨æ—¶å…œåº•å¯åŠ¨ã€‚ ä¹ã€å°ç»“ / ç»“è®º æœ¬æ–‡ä»é›¶å¼€å§‹åœ¨æ—  sudo ç¯å¢ƒä¸‹éƒ¨ç½² SSH æœåŠ¡ï¼š\nç”Ÿæˆå¯†é’¥å¹¶å¯ç”¨å…¬é’¥è®¤è¯ï¼› ç¼–å†™ç”¨æˆ·æ€ sshd é…ç½®ï¼› å…ˆç”¨ nohup éªŒè¯ï¼Œå†ç”¨ systemd ç¨³å®šè‡ªå¯ï¼› æ’æŸ¥å¹¶ä¿®å¤äº† start-limit-hit ã€ç«¯å£å†²çªã€è®¤è¯å¤±è´¥ç­‰é—®é¢˜ã€‚ æœ€ç»ˆå®ç°äº†ï¼š\nå¤šç«¯å£å¤šå®ä¾‹ï¼› è‡ªåŠ¨é‡å¯ï¼› å¼€æœºè‡ªå¯ï¼› å®‰å…¨å¯é çš„è¿œç¨‹è®¿é—®ã€‚ åã€å‚è€ƒä¸å»¶ä¼¸é˜…è¯» OpenSSH å®˜æ–¹æ‰‹å†Œ systemd User Services æ–‡æ¡£ OpenSSH Key Management å…ƒä¿¡æ¯\né˜…è¯»æ—¶é•¿ï¼šçº¦ 10 åˆ†é’Ÿ æ ‡ç­¾ï¼šSSHã€Linuxã€systemdã€nohupã€æ— sudo SEO å…³é”®è¯ï¼šæ— sudo sshd systemd ç”¨æˆ·æ€ OpenSSH å¯åŠ¨å¤±è´¥ start-limit-hit å…ƒæè¿°ï¼šè§£å†³æ—  sudo æƒé™ä¸‹ OpenSSH å¯åŠ¨å¤±è´¥çš„å®Œæ•´å®æˆ˜æŒ‡å—ã€‚ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ’¡ è¯•è¯•åœ¨ä½ çš„å®éªŒå®¤æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªç”¨æˆ·çº§ sshd å§ï¼ å¦‚æœè§‰å¾—æœ¬æ–‡æœ‰å¸®åŠ©ï¼Œæ¬¢è¿æ”¶è—ã€åˆ†äº«æˆ–åœ¨è¯„è®ºåŒºäº¤æµä½ çš„å‘ä¸ç»éªŒ ğŸš€\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%BC%80%E5%90%AFsshsystem%E8%BF%9B%E7%A8%8B%E5%A4%B1%E8%B4%A5%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3/","summary":"\u003cp\u003e\u003cstrong\u003eæ ‡é¢˜ï¼š\u003c/strong\u003e\nğŸš€ åœ¨æ—  sudo ç¯å¢ƒä¸‹è®© sshd å¸¸é©»è¿è¡Œï¼šä»é”™è¯¯æ’æŸ¥åˆ° nohup ä¸ systemd åŒæ–¹æ¡ˆå®æˆ˜\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦ï¼š\u003c/strong\u003e\næœ¬æ–‡è®²è¿°å¦‚ä½•åœ¨æ™®é€šç”¨æˆ·æƒé™ä¸‹è¿è¡Œ OpenSSH æœåŠ¡ï¼Œé€æ­¥è§£å†³â€œè¿æ¥è¢«æ‹’ç»â€â€œå¯†ç è®¤è¯å¤±è´¥â€â€œsystemd start-limit-hitâ€ç­‰å…¸å‹é—®é¢˜ï¼Œå¹¶æœ€ç»ˆç”¨ nohup ä¸ systemd å®ç°æŒä¹…è¿è¡Œã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eç›®æ ‡è¯»è€…ï¼š\u003c/strong\u003e\nLinux ä¸­çº§ç”¨æˆ·ã€ç§‘ç ”æˆ–ä¼ä¸šå¤šç”¨æˆ·æœåŠ¡å™¨ä½¿ç”¨è€…ã€æ—  root æƒé™çš„ SSH è‡ªéƒ¨ç½²è€…ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¸€èƒŒæ™¯--åŠ¨æœº\"\u003eä¸€ã€èƒŒæ™¯ / åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eåœ¨éƒ¨åˆ†é«˜æ ¡å®éªŒå®¤æˆ–äº‘ä¸»æœºç¯å¢ƒä¸­ï¼Œæ™®é€šè´¦æˆ·æ²¡æœ‰ sudo æƒé™ï¼Œé»˜è®¤ sshd æœåŠ¡æ— æ³•å¯åŠ¨ã€‚\nå½“æˆ‘ä»¬éœ€è¦ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè¿œç¨‹è®¿é—®è‡ªå·±çš„ Linux ä¸»æœºï¼›\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ VS Code Remote æˆ– SCP ä¼ æ–‡ä»¶ï¼›\u003c/li\u003e\n\u003cli\u003eä½†åˆæ— æ³•ä¿®æ”¹ç³»ç»Ÿçº§é…ç½®ï¼›\nå°±å¿…é¡»åœ¨\u003cstrong\u003eç”¨æˆ·æ€\u003c/strong\u003eè‡ªè¡Œè¿è¡Œ sshdã€‚\nç„¶è€Œè¿™ä¼šå¼•å‘ä¸€ç³»åˆ—é—®é¢˜ï¼šç«¯å£å†²çªã€é˜²ç«å¢™ã€è®¤è¯å¤±è´¥ã€\u003ccode\u003estart-limit-hit\u003c/code\u003e ç­‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"äºŒæ ¸å¿ƒæ¦‚å¿µ\"\u003eäºŒã€æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eåç§°\u003c/th\u003e\n          \u003cth\u003eå«ä¹‰\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003esshd\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eOpenSSH å®ˆæŠ¤è¿›ç¨‹ï¼Œè´Ÿè´£å¤„ç† SSH ç™»å½•è¯·æ±‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eç”¨æˆ·æ€ sshd\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eé root ç”¨æˆ·æ‰‹åŠ¨å¯åŠ¨çš„ sshd å®ä¾‹ï¼Œä»…æœ‰ç”¨æˆ·æƒé™\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eauthorized_keys\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå­˜æ”¾å…è®¸ç™»å½•çš„å…¬é’¥\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003enohup\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eè®©ç¨‹åºè„±ç¦»ç»ˆç«¯åå°è¿è¡Œ\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003esystemd \u0026ndash;user\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eç”¨æˆ·çº§ systemd å®ä¾‹ï¼Œå¯ç®¡ç†è‡ªå¯æœåŠ¡\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003estart-limit-hit\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003esystemd æ£€æµ‹åˆ°æœåŠ¡é¢‘ç¹é€€å‡ºåè‡ªåŠ¨æš‚åœé‡å¯\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¸‰å®è·µæŒ‡å—--å…¨æµç¨‹æ­¥éª¤\"\u003eä¸‰ã€å®è·µæŒ‡å— / å…¨æµç¨‹æ­¥éª¤\u003c/h2\u003e\n\u003ch3 id=\"1-ç”Ÿæˆå¹¶é…ç½®-ssh-å¯†é’¥\"\u003e1ï¸âƒ£ ç”Ÿæˆå¹¶é…ç½® SSH å¯†é’¥\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003essh-keygen -t ed25519 -C \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e -f ~/.ssh/id_ed25519_noemail\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecat ~/.ssh/id_ed25519_noemail.pub \u0026gt;\u0026gt; ~/.ssh/authorized_keys\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003echmod \u003cspan style=\"color:#ae81ff\"\u003e700\u003c/span\u003e ~/.ssh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003echmod \u003cspan style=\"color:#ae81ff\"\u003e600\u003c/span\u003e ~/.ssh/authorized_keys\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eç¡®ä¿ \u003ccode\u003e~/.ssh/authorized_keys\u003c/code\u003e æƒé™æ­£ç¡®ã€‚\u003c/p\u003e","title":"å¼€å¯sshsystemè¿›ç¨‹å¤±è´¥æ€ä¹ˆè§£å†³"},{"content":"ğŸ§  Bengio é£æ ¼çš„æœºå™¨å­¦ä¹ ä»»åŠ¡è¯´æ˜æ–‡æ¡£ï¼šä»ç ”ç©¶åˆ°å·¥ç¨‹çš„æŠ€æœ¯è§„èŒƒæŒ‡å— å‰¯æ ‡é¢˜ï¼š å¦‚ä½•ç¼–å†™ä¸€ä»½å¯å¤ç°ã€å¯è§£é‡Šã€å¯æ¯”è¾ƒçš„æ¨¡å‹å¾®è°ƒä»»åŠ¡è¯´æ˜æ–‡æ¡£ â€”â€” æ¥è‡ª Yoshua Bengio çš„ç ”ç©¶æ–¹æ³•è®º é˜…è¯»æ—¶é•¿ï¼š 10 åˆ†é’Ÿ æ ‡ç­¾ï¼š æœºå™¨å­¦ä¹ æ–‡æ¡£ç»“æ„ æ¨¡å‹å¾®è°ƒ æŠ€æœ¯è§„èŒƒ æ·±åº¦å­¦ä¹ å®è·µ é€‚åˆè¯»è€…ï¼š ä¸­é«˜çº§ ML å·¥ç¨‹å¸ˆã€ç ”ç©¶å‘˜ã€æŠ€æœ¯å†™ä½œè€…\nä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·çš„æ–‡æ¡£ï¼Ÿ åœ¨æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼š å›¢é˜Ÿå®Œæˆäº†ä¸€ä¸ªæ¨¡å‹å¾®è°ƒå®éªŒï¼Œä½†å‡ ä¸ªæœˆåå†å›å¤´çœ‹ï¼Œæ²¡äººèƒ½å®Œå…¨å¤ç°ç»“æœï¼Œä¹Ÿä¸æ¸…æ¥šä¸ºä»€ä¹ˆè¦é‡‡ç”¨æŸä¸ªå­¦ä¹ ç‡æˆ– LoRA å±‚ã€‚\nYoshua Bengioï¼ˆæ·±åº¦å­¦ä¹ ä¸‰å·¨å¤´ä¹‹ä¸€ï¼‰æ—©åœ¨ MontrÃ©al Institute for Learning Algorithms (MILA) å°±æå‡ºäº†ä¸€ä¸ªç†å¿µï¼š\nâ€œä¸€ä¸ªæœºå™¨å­¦ä¹ ç ”ç©¶æˆ–å·¥ç¨‹ä»»åŠ¡çš„æ–‡æ¡£ï¼Œå¿…é¡»èƒ½è®©ä»–äººå®Œå…¨é‡ç°ç»“æœå¹¶ç†è§£èƒŒåçš„è®¾è®¡åŠ¨æœºã€‚â€\nè¿™å°±æ˜¯åæ¥è¢«ç§°ä¸º Bengio-style Machine Learning Project Report Structure çš„ç»å…¸æ¨¡æ¿ï¼Œè¢« Google Researchã€Meta AIã€OpenAI ç­‰å¹¿æ³›é‡‡ç”¨ã€‚\näºŒã€Bengio é£æ ¼æ¨¡æ¿çš„æ ¸å¿ƒæ€æƒ³ é¡¹ç›® å†…å®¹ æ¥æº Yoshua Bengioï¼Œã€ŠDeep Learning Research Practice Notesã€‹ ç›®æ ‡ ç¡®ä¿æœºå™¨å­¦ä¹ å®éªŒ å¯å¤ç°ã€å¯ç†è§£ã€å¯æ¯”è¾ƒ é€‚ç”¨åœºæ™¯ æ¨¡å‹å¾®è°ƒã€å¯¹æ¯”å®éªŒã€å­¦æœ¯ç ”ç©¶æŠ¥å‘Šã€å†…éƒ¨æŠ€æœ¯è¯´æ˜ ä¼˜åŠ¿ é€»è¾‘æ¸…æ™°ã€ç»“æ„ç»Ÿä¸€ã€å¯ç›´æ¥è½¬åŒ–ä¸ºè®ºæ–‡æˆ–å†…éƒ¨ç™½çš®ä¹¦ ä¸‰ã€æ ‡å‡†ç»“æ„ï¼ˆé€‚ç”¨äºå››ä¸ªæ¨¡å‹å¾®è°ƒä»»åŠ¡ï¼‰ ä»¥ä¸‹æ˜¯ Bengio é£æ ¼æ–‡æ¡£çš„ç»å…¸ä¹ä¸ªéƒ¨åˆ†ï¼š\n1ï¸âƒ£ æ ‡é¢˜é¡µï¼ˆTitle Pageï¼‰ æ–‡æ¡£æ ‡é¢˜ï¼šå¦‚ã€Šå››ä¸ªæ¨¡å‹å¾®è°ƒä»»åŠ¡è®¾è®¡ä¸å®æ–½æ–¹æ¡ˆã€‹ ä½œè€…ã€æ—¥æœŸã€ç‰ˆæœ¬å· é¡¹ç›®/ç»„ç»‡åç§° 2ï¸âƒ£ æ‘˜è¦ï¼ˆAbstractï¼‰ ç®€è¦æè¿°ä»»åŠ¡ç›®æ ‡ã€æ¨¡å‹æ–¹å‘ä¸é¢„æœŸæˆæœã€‚\næœ¬æ–‡æ¡£æè¿°äº†é’ˆå¯¹å››ä¸ªä¸åŒæ¶æ„çš„æ·±åº¦å­¦ä¹ æ¨¡å‹çš„å¾®è°ƒä»»åŠ¡è®¾è®¡ã€å®éªŒè®¡åˆ’ä¸è¯„ä¼°æ–¹æ¡ˆï¼Œæ—¨åœ¨æ¯”è¾ƒåœ¨ç‰¹å®šæ•°æ®é›†ä¸Šçš„æ€§èƒ½å·®å¼‚ï¼Œå¹¶æ€»ç»“æœ€ä¼˜å¾®è°ƒç­–ç•¥ã€‚\n3ï¸âƒ£ èƒŒæ™¯ä¸åŠ¨æœºï¼ˆBackground \u0026amp; Motivationï¼‰ è¯´æ˜ï¼š\nå½“å‰ç³»ç»Ÿçš„ä¸è¶³ ä¸ºä»€ä¹ˆè¦è¿›è¡Œå¾®è°ƒ å‚è€ƒçš„è®ºæ–‡ä¸ç°æœ‰æˆæœ ç§‘å­¦æˆ–ä¸šåŠ¡åŠ¨æœº ğŸ’¡ ç¤ºä¾‹ï¼š â€œç°æœ‰è¯­è¨€æ¨¡å‹åœ¨ä½èµ„æºé¢†åŸŸæ³›åŒ–æ€§èƒ½å·®ï¼Œå› æ­¤æˆ‘ä»¬æå‡ºé’ˆå¯¹å¤šè¯­ç§æ•°æ®è¿›è¡Œå‚æ•°é«˜æ•ˆå¾®è°ƒã€‚â€\n4ï¸âƒ£ é—®é¢˜å®šä¹‰ï¼ˆProblem Definitionï¼‰ å®šä¹‰ä»»åŠ¡è¾“å…¥è¾“å‡ºã€ç±»å‹ä¸æ€§èƒ½æŒ‡æ ‡ï¼š\nä»»åŠ¡ç±»å‹ï¼šåˆ†ç±» / ç”Ÿæˆ / å›å½’ è¾“å…¥è¾“å‡ºæ ¼å¼ï¼šæ–‡æœ¬ â†’ æ ‡ç­¾ / æ–‡æœ¬ â†’ æ–‡æœ¬ è¯„ä»·æŒ‡æ ‡ï¼šAccuracyã€F1ã€BLEUã€Loss çº¦æŸæ¡ä»¶ï¼šè®­ç»ƒèµ„æºã€æ—¶é—´ã€æ•°æ®éšç§ 5ï¸âƒ£ æ¨¡å‹ä¸æ–¹æ¡ˆï¼ˆModels \u0026amp; Approachï¼‰ å¯¹æ¯ä¸ªæ¨¡å‹åˆ†åˆ«è¯´æ˜ï¼š\næ¨¡å‹æ¶æ„ï¼ˆå¦‚ Llama-3ã€Phi-3ã€Gemma ç­‰ï¼‰ å¾®è°ƒæ–¹æ³•ï¼ˆFull Fine-tuningã€LoRAã€Adapterã€QLoRAï¼‰ å…³é”®è¶…å‚æ•°ï¼ˆBatch Sizeã€Epochã€LRï¼‰ æ¨¡å‹ æ–¹æ³• æ•°æ®é›† Epochs Learning Rate Model A LoRA Dataset X 5 3e-5 Model B Full Dataset X 3 2e-5 Model C Adapter Dataset Y 10 1e-4 Model D QLoRA Dataset Z 4 1e-5 6ï¸âƒ£ å®éªŒè®¾ç½®ï¼ˆExperimental Setupï¼‰ ç¯å¢ƒé…ç½®ï¼ˆGPU ç±»å‹ã€æ¡†æ¶ã€ç‰ˆæœ¬ï¼‰ æ•°æ®åˆ’åˆ†æ¯”ä¾‹ï¼ˆTrain / Val / Testï¼‰ éšæœºç§å­ä¸å¤ç°æ€§æ§åˆ¶ æ—¥å¿—ä¸ç›‘æ§å·¥å…·ï¼ˆå¦‚ Weights \u0026amp; Biasesï¼‰ 7ï¸âƒ£ å®éªŒç»“æœä¸åˆ†æï¼ˆResults \u0026amp; Analysisï¼‰ åŒ…å«ï¼š\næŒ‡æ ‡å¯¹æ¯”è¡¨ä¸å›¾è¡¨ï¼ˆAccuracyã€Loss æ›²çº¿ï¼‰ æ¨¡å‹å¤§å°ä¸æ€§èƒ½æƒè¡¡ æ„å¤–ç»“æœä¸è§£é‡Š ğŸ“Š å»ºè®®ï¼š\nç»“åˆ TensorBoard æ›²çº¿æˆ– matplotlib å›¾ï¼Œå±•ç¤ºæ”¶æ•›é€Ÿåº¦ã€éªŒè¯é›†æ€§èƒ½å˜åŒ–è¶‹åŠ¿ã€‚\n8ï¸âƒ£ ç»“è®ºä¸æœªæ¥å·¥ä½œï¼ˆConclusion \u0026amp; Future Workï¼‰ å“ªä¸ªæ¨¡å‹è¡¨ç°æœ€ä½³ï¼Ÿ åŸå› åˆ†æï¼ˆæ¶æ„å·®å¼‚ã€ä¼˜åŒ–ç­–ç•¥ï¼‰ æœªæ¥å¯æ‰©å±•æ–¹å‘ï¼ˆå¤šä»»åŠ¡å­¦ä¹ ã€é‡åŒ–éƒ¨ç½²ï¼‰ 9ï¸âƒ£ é™„å½•ä¸å‚è€ƒæ–‡çŒ®ï¼ˆAppendix \u0026amp; Referencesï¼‰ é™„åŠ å®éªŒæ—¥å¿—ã€ä»£ç è·¯å¾„ å¼•ç”¨è®ºæ–‡ä¸å¼€æºä»“åº“ å››ã€æœ€ä½³å®è·µä¸å†™ä½œå»ºè®® âœ… ä¿è¯å®éªŒçš„ å¯å¤ç°æ€§ï¼ˆç‰ˆæœ¬é”å®š + éšæœºç§å­ï¼‰ âœ… æ˜ç¡®è®°å½• æ¯ä¸ªæ¨¡å‹çš„åŠ¨æœºä¸å‡è®¾ âœ… ä½¿ç”¨è¡¨æ ¼ä¸å›¾è¡¨æé«˜ å¯¹æ¯”å¯è§†åŒ–æ€§ âœ… é‡‡ç”¨ç»“æ„åŒ–æ ‡é¢˜ï¼Œä¾¿äºå›¢é˜Ÿå…±äº«ä¸åç»­è®ºæ–‡æ’°å†™\näº”ã€å°ç»“ Bengio é£æ ¼çš„æœºå™¨å­¦ä¹ é¡¹ç›®æ–‡æ¡£ä¸ä»…æ˜¯ä¸€ç§å†™ä½œæ ¼å¼ï¼Œæ›´æ˜¯ä¸€ç§ ç ”ç©¶æ–‡åŒ–ã€‚ å®ƒè®©å›¢é˜Ÿåä½œæ›´åŠ é€æ˜ï¼Œè®©ç ”ç©¶æˆæœçœŸæ­£å…·å¤‡è¢«éªŒè¯å’Œå¤ç°çš„ä»·å€¼ã€‚\nğŸ“š å‚è€ƒä¸å»¶ä¼¸é˜…è¯» Yoshua Bengio, Deep Learning Research Practice Notes OpenAI Technical Reports: GPT Fine-tuning Guides Google Research: Effective ML Experiment Documentation Meta AI: Reproducibility Checklist for ML Models ğŸš€ è¡ŒåŠ¨å·å¬ï¼ˆCall To Actionï¼‰ ğŸ‘‰ è¯•ä¸€è¯•ï¼šç”¨ Bengio é£æ ¼æ’°å†™ä½ è‡ªå·±çš„æ¨¡å‹å¾®è°ƒæ–‡æ¡£ï¼ ğŸ’¾ å¯ä¸‹è½½æ¨¡æ¿ï¼šGitHub - ML Report Template (Bengio-style) ğŸ“© è®¢é˜…æ›´å¤šæŠ€æœ¯å†™ä½œä¸ ML å®è·µå†…å®¹ï¼ŒæŒæ¡å­¦æœ¯ä¸å·¥ç¨‹å…¼å…·çš„å†™ä½œèŒƒå¼ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E6%80%8E%E4%B9%88%E6%92%B0%E5%86%99%E4%B8%80%E7%AF%87%E5%AE%8C%E7%BE%8E%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3/","summary":"\u003ch1 id=\"-bengio-é£æ ¼çš„æœºå™¨å­¦ä¹ ä»»åŠ¡è¯´æ˜æ–‡æ¡£ä»ç ”ç©¶åˆ°å·¥ç¨‹çš„æŠ€æœ¯è§„èŒƒæŒ‡å—\"\u003eğŸ§  Bengio é£æ ¼çš„æœºå™¨å­¦ä¹ ä»»åŠ¡è¯´æ˜æ–‡æ¡£ï¼šä»ç ”ç©¶åˆ°å·¥ç¨‹çš„æŠ€æœ¯è§„èŒƒæŒ‡å—\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ï¼š\u003c/strong\u003e\nå¦‚ä½•ç¼–å†™ä¸€ä»½å¯å¤ç°ã€å¯è§£é‡Šã€å¯æ¯”è¾ƒçš„æ¨¡å‹å¾®è°ƒä»»åŠ¡è¯´æ˜æ–‡æ¡£ â€”â€” æ¥è‡ª Yoshua Bengio çš„ç ”ç©¶æ–¹æ³•è®º\n\u003cstrong\u003eé˜…è¯»æ—¶é•¿ï¼š\u003c/strong\u003e 10 åˆ†é’Ÿ\n\u003cstrong\u003eæ ‡ç­¾ï¼š\u003c/strong\u003e \u003ccode\u003eæœºå™¨å­¦ä¹ æ–‡æ¡£ç»“æ„\u003c/code\u003e \u003ccode\u003eæ¨¡å‹å¾®è°ƒ\u003c/code\u003e \u003ccode\u003eæŠ€æœ¯è§„èŒƒ\u003c/code\u003e \u003ccode\u003eæ·±åº¦å­¦ä¹ å®è·µ\u003c/code\u003e\n\u003cstrong\u003eé€‚åˆè¯»è€…ï¼š\u003c/strong\u003e ä¸­é«˜çº§ ML å·¥ç¨‹å¸ˆã€ç ”ç©¶å‘˜ã€æŠ€æœ¯å†™ä½œè€…\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¸€ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·çš„æ–‡æ¡£\"\u003eä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·çš„æ–‡æ¡£ï¼Ÿ\u003c/h2\u003e\n\u003cp\u003eåœ¨æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼š\nå›¢é˜Ÿå®Œæˆäº†ä¸€ä¸ªæ¨¡å‹å¾®è°ƒå®éªŒï¼Œä½†å‡ ä¸ªæœˆåå†å›å¤´çœ‹ï¼Œæ²¡äººèƒ½å®Œå…¨å¤ç°ç»“æœï¼Œä¹Ÿä¸æ¸…æ¥šä¸ºä»€ä¹ˆè¦é‡‡ç”¨æŸä¸ªå­¦ä¹ ç‡æˆ– LoRA å±‚ã€‚\u003c/p\u003e\n\u003cp\u003eYoshua Bengioï¼ˆæ·±åº¦å­¦ä¹ ä¸‰å·¨å¤´ä¹‹ä¸€ï¼‰æ—©åœ¨ \u003cem\u003eMontrÃ©al Institute for Learning Algorithms (MILA)\u003c/em\u003e å°±æå‡ºäº†ä¸€ä¸ªç†å¿µï¼š\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eâ€œä¸€ä¸ªæœºå™¨å­¦ä¹ ç ”ç©¶æˆ–å·¥ç¨‹ä»»åŠ¡çš„æ–‡æ¡£ï¼Œå¿…é¡»èƒ½è®©ä»–äººå®Œå…¨é‡ç°ç»“æœå¹¶ç†è§£èƒŒåçš„è®¾è®¡åŠ¨æœºã€‚â€\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eè¿™å°±æ˜¯åæ¥è¢«ç§°ä¸º \u003cstrong\u003eBengio-style Machine Learning Project Report Structure\u003c/strong\u003e çš„ç»å…¸æ¨¡æ¿ï¼Œè¢« Google Researchã€Meta AIã€OpenAI ç­‰å¹¿æ³›é‡‡ç”¨ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"äºŒbengio-é£æ ¼æ¨¡æ¿çš„æ ¸å¿ƒæ€æƒ³\"\u003eäºŒã€Bengio é£æ ¼æ¨¡æ¿çš„æ ¸å¿ƒæ€æƒ³\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eé¡¹ç›®\u003c/th\u003e\n          \u003cth\u003eå†…å®¹\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eæ¥æº\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eYoshua Bengioï¼Œã€ŠDeep Learning Research Practice Notesã€‹\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eç›®æ ‡\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eç¡®ä¿æœºå™¨å­¦ä¹ å®éªŒ \u003cstrong\u003eå¯å¤ç°\u003c/strong\u003eã€\u003cstrong\u003eå¯ç†è§£\u003c/strong\u003eã€\u003cstrong\u003eå¯æ¯”è¾ƒ\u003c/strong\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eé€‚ç”¨åœºæ™¯\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¨¡å‹å¾®è°ƒã€å¯¹æ¯”å®éªŒã€å­¦æœ¯ç ”ç©¶æŠ¥å‘Šã€å†…éƒ¨æŠ€æœ¯è¯´æ˜\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eä¼˜åŠ¿\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eé€»è¾‘æ¸…æ™°ã€ç»“æ„ç»Ÿä¸€ã€å¯ç›´æ¥è½¬åŒ–ä¸ºè®ºæ–‡æˆ–å†…éƒ¨ç™½çš®ä¹¦\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¸‰æ ‡å‡†ç»“æ„é€‚ç”¨äºå››ä¸ªæ¨¡å‹å¾®è°ƒä»»åŠ¡\"\u003eä¸‰ã€æ ‡å‡†ç»“æ„ï¼ˆé€‚ç”¨äºå››ä¸ªæ¨¡å‹å¾®è°ƒä»»åŠ¡ï¼‰\u003c/h2\u003e\n\u003cp\u003eä»¥ä¸‹æ˜¯ Bengio é£æ ¼æ–‡æ¡£çš„ç»å…¸ä¹ä¸ªéƒ¨åˆ†ï¼š\u003c/p\u003e","title":"æ€ä¹ˆæ’°å†™ä¸€ç¯‡å®Œç¾çš„æœºå™¨å­¦ä¹ æ–‡æ¡£"},{"content":"ä»¥ä¸‹æ˜¯ä¸€ç¯‡ç¬¦åˆä¼˜ç§€æŠ€æœ¯åšå®¢è§„èŒƒçš„å®Œæ•´æ–‡ç« è‰ç¨¿ï¼ŒåŸºäºä½ ä¸Šé¢å®Œæ•´çš„ SSH å¯åŠ¨ä¸è°ƒè¯•è¿‡ç¨‹æ•´ç†è€Œæˆï¼Œé€‚åˆå‘å¸ƒåˆ°æŠ€æœ¯åšå®¢ï¼ˆå¦‚æ˜é‡‘ã€çŸ¥ä¹ä¸“æ ã€Medium æˆ–ä¸ªäººåšå®¢ï¼‰ã€‚\nğŸ§  åœ¨æ—  sudo æƒé™çš„ Linux ç¯å¢ƒä¸‹å¯åŠ¨ SSH æœåŠ¡ï¼ˆç”¨æˆ·æ€ sshd å…¨æ”»ç•¥ï¼‰ å‰¯æ ‡é¢˜ / æ‘˜è¦ï¼š å½“ä½ åœ¨å­¦æ ¡æœºæˆ¿ã€è¿œç¨‹å®éªŒç¯å¢ƒæˆ–å—é™æœåŠ¡å™¨ä¸Šæ²¡æœ‰ root æƒé™æ—¶ï¼Œå¦‚ä½•å¼€å¯ SSH æœåŠ¡å¹¶è¿œç¨‹è®¿é—®ï¼Ÿæœ¬æ–‡ä»é›¶å¸¦ä½ åœ¨ç”¨æˆ·ç›®å½•ä¸‹è¿è¡Œå¯ç”¨çš„ sshdï¼Œæ”¯æŒå¯†é’¥ç™»å½•å¹¶å®ç°è¿œç¨‹è¿æ¥ã€‚\né˜…è¯»æ—¶é•¿ï¼š 10 åˆ†é’Ÿ ç›®æ ‡è¯»è€…ï¼š ä¸­çº§ Linux ç”¨æˆ·ã€ç§‘ç ”äººå‘˜ã€æœåŠ¡å™¨ä½¿ç”¨è€…ã€DevOps å­¦ä¹ è€… æ ‡ç­¾ï¼š SSHã€sshdã€Linuxã€è¿œç¨‹è¿æ¥ã€é rootã€ç³»ç»Ÿé…ç½® SEO å…³é”®è¯ï¼š SSH æ—  root æƒé™ã€ç”¨æˆ·æ€ sshdã€openssh é…ç½®ã€éç‰¹æƒç«¯å£ã€è¿œç¨‹ç™»å½•å¤±è´¥\nğŸ¯ èƒŒæ™¯ä¸åŠ¨æœº å¾ˆå¤šç§‘ç ”æœåŠ¡å™¨ã€å­¦æ ¡å®éªŒå®¤æˆ–å…±äº«ä¸»æœºéƒ½ä¸ç»™æ™®é€šç”¨æˆ· sudo æƒé™ã€‚ ç„¶è€Œæˆ‘ä»¬ä»å¸¸å¸¸éœ€è¦ï¼š\nè¿œç¨‹ç™»å½•è‡ªå·±çš„è´¦æˆ·ï¼› ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶ï¼› æˆ–ä»å¦ä¸€å°æœºå™¨è®¿é—®è‡ªå·±çš„è¿›ç¨‹ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œsshd æœåŠ¡éœ€è¦ root æ‰èƒ½è¿è¡Œï¼Œå› ä¸ºå®ƒé€šå¸¸ç»‘å®šåœ¨ 22 ç«¯å£å¹¶è®¿é—®ç³»ç»Ÿè®¤è¯ä¿¡æ¯ã€‚ä½†äº‹å®ä¸Šï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ ç”¨æˆ·ç›®å½• ä¸‹è¿è¡Œä¸€ä¸ªâ€œç”¨æˆ·æ€ SSH æœåŠ¡â€ï¼Œæ— éœ€ä¿®æ”¹ç³»ç»Ÿé…ç½®ã€‚\nğŸ§© æ ¸å¿ƒæ¦‚å¿µ åè¯ å«ä¹‰ sshd SSH æœåŠ¡ç«¯ç¨‹åºï¼Œè´Ÿè´£æ¥æ”¶å’ŒéªŒè¯ SSH è¿æ¥ã€‚ ç”¨æˆ·æ€ï¼ˆuser-spaceï¼‰sshd æ™®é€šç”¨æˆ·è‡ªè¡Œå¯åŠ¨çš„ sshd è¿›ç¨‹ï¼Œä¸ä½¿ç”¨ root æƒé™ã€‚ HostKey æœåŠ¡å™¨ç”¨äºåŠ å¯†è¿æ¥çš„å¯†é’¥å¯¹ã€‚ AuthorizedKeys è¢«å…è®¸ç™»å½•è¯¥è´¦æˆ·çš„å…¬é’¥åˆ—è¡¨ã€‚ /etc/shadow ç³»ç»Ÿå¯†ç å“ˆå¸Œå­˜å‚¨æ–‡ä»¶ï¼Œé root ç”¨æˆ·æ— æ³•è®¿é—®ã€‚ âš™ï¸ å®è·µæŒ‡å—ï¼šä»é›¶å¯åŠ¨ç”¨æˆ·æ€ SSH æœåŠ¡ ğŸªœ ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡é…ç½®æ–‡ä»¶ åˆ›å»ºé…ç½®ç›®å½•ï¼š\nmkdir -p ~/.ssh æ–°å»ºé…ç½®æ–‡ä»¶ ~/.ssh/ssh_configï¼š\nPort 2222 ListenAddress 0.0.0.0 HostKey /home/\u0026lt;username\u0026gt;/.ssh/ssh_host_ed25519_key AuthorizedKeysFile /home/\u0026lt;username\u0026gt;/.ssh/authorized_keys PasswordAuthentication yes PubkeyAuthentication yes ChallengeResponseAuthentication no PidFile /home/\u0026lt;username\u0026gt;/.ssh/sshd.pid æ³¨æ„ï¼šè·¯å¾„ä¸è¦å†™ ~ï¼ŒOpenSSH ä¸ä¼šè‡ªåŠ¨å±•å¼€ï¼\nğŸ”‘ ç¬¬äºŒæ­¥ï¼šç”ŸæˆæœåŠ¡å™¨ä¸»æœºå¯†é’¥ ssh-keygen -t ed25519 -f ~/.ssh/ssh_host_ed25519_key -N \u0026#34;\u0026#34; chmod 600 ~/.ssh/ssh_host_ed25519_key ğŸš€ ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨ç”¨æˆ·æ€ sshd /usr/bin/sshd -d -f ~/.ssh/ssh_config è‹¥å‡ºç°ï¼š\nServer listening on 0.0.0.0 port 2222. è¡¨ç¤º SSH æœåŠ¡å¯åŠ¨æˆåŠŸã€‚ ä½ ç°åœ¨å¯ä»¥åœ¨æœ¬æœºæµ‹è¯•ï¼š\nssh -p 2222 \u0026lt;username\u0026gt;@localhost ğŸ§  åŸç†ä¸è¯´æ˜ ä¸ºä»€ä¹ˆè¦ç”¨ 2222 ç«¯å£ï¼Ÿ 1024 ä»¥ä¸‹ç«¯å£å±äºâ€œç‰¹æƒç«¯å£â€ï¼Œéœ€è¦ root æƒé™æ‰èƒ½ç»‘å®šã€‚ é€‰æ‹©éç‰¹æƒç«¯å£ï¼ˆå¦‚ 2222ã€8022ï¼‰å³å¯ã€‚\nä¸ºä»€ä¹ˆç™»å½•æ—¶æŠ¥ Could not get shadow informationï¼Ÿ å› ä¸ºé root ç”¨æˆ·æ— æ³•è®¿é—® /etc/shadowï¼Œæ‰€ä»¥å¯†ç è®¤è¯ä¼šå¤±è´¥ã€‚ â†’ è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨å…¬é’¥ç™»å½•ï¼ˆè§ä¸‹èŠ‚ï¼‰ã€‚\nğŸ” ä½¿ç”¨ SSH å…¬é’¥ç™»å½•ï¼ˆæ¨èï¼‰ ç”Ÿæˆæœ¬åœ°å¯†é’¥ï¼ˆä¸å«é‚®ç®±æ³¨é‡Šï¼‰ï¼š\nssh-keygen -t ed25519 -C \u0026#34;\u0026#34; -f ~/.ssh/id_ed25519_noemail æŠŠå…¬é’¥åŠ å…¥æˆæƒåˆ—è¡¨ï¼š\ncat ~/.ssh/id_ed25519_noemail.pub \u0026gt;\u0026gt; ~/.ssh/authorized_keys chmod 700 ~/.ssh chmod 600 ~/.ssh/authorized_keys ç™»å½•æµ‹è¯•ï¼š\nssh -i ~/.ssh/id_ed25519_noemail -p 2222 \u0026lt;username\u0026gt;@localhost ğŸŒ è®©å¤–éƒ¨ä¸»æœºè®¿é—®ï¼ˆè¿œç¨‹è¿æ¥ï¼‰ ç¡®è®¤ sshd ç›‘å¬çš„æ˜¯æ‰€æœ‰åœ°å€\nss -tlnp | grep 2222 è‹¥è¾“å‡ºä¸º 127.0.0.1:2222ï¼Œè¡¨ç¤ºåªå…è®¸æœ¬åœ°è®¿é—®ã€‚ ä¿®æ”¹é…ç½®ä¸ºï¼š\nListenAddress 0.0.0.0 å¹¶é‡å¯ sshdã€‚\né˜²ç«å¢™å’Œ NAT\nè‹¥ç«¯å£å¤–éƒ¨è®¿é—®æç¤º â€œConnection refusedâ€ï¼Œè¯´æ˜ï¼š\né˜²ç«å¢™é˜»æ­¢äº†å¤–éƒ¨è¿æ¥ï¼› æˆ–ä½ æ‰€åœ¨ç¯å¢ƒçš„ NAT æœªæ˜ å°„è¯¥ç«¯å£ã€‚ è‹¥ localhost å¯è¿ï¼Œå…¬ç½‘IP ä¸é€šï¼Œåˆ™éœ€æ”¾è¡Œæˆ–é…ç½®ç«¯å£è½¬å‘ã€‚\nåå°è¿è¡Œ sshd\nnohup /usr/bin/sshd -f ~/.ssh/ssh_config -E ~/.ssh/sshd.log \u0026amp; tail -f ~/.ssh/sshd.log ğŸ§© å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ é—®é¢˜ åŸå›  è§£å†³åŠæ³• Permission denied (password) é root æ— æ³•è¯»å– /etc/shadow ä½¿ç”¨å…¬é’¥ç™»å½• Address already in use ç«¯å£è¢«å ç”¨ kill æ—§è¿›ç¨‹æˆ–æ¢ç«¯å£ Bind to port failed å°è¯•ç»‘å®š 22 ä½¿ç”¨ \u0026gt;1024 çš„ç«¯å£å· Connection refused é˜²ç«å¢™ / NAT æ‹¦æˆª æ£€æŸ¥ç›‘å¬åœ°å€ä¸å®‰å…¨ç­–ç•¥ Could not load host key HostKey è·¯å¾„é”™è¯¯ ä½¿ç”¨ç»å¯¹è·¯å¾„å¹¶è®¾æƒé™ 600 ğŸ’¡ æœ€ä½³å®è·µä¸å»ºè®® âœ… ä½¿ç”¨ ed25519 ç®—æ³•ç”Ÿæˆå¯†é’¥ï¼ˆå®‰å…¨ä¸”é€Ÿåº¦å¿«ï¼‰ã€‚ âœ… åœ¨é root ç¯å¢ƒä¸­åªä½¿ç”¨å…¬é’¥è®¤è¯ã€‚ âœ… ä¿æŒ ~/.ssh æƒé™ä¸º 700ï¼Œauthorized_keys ä¸º 600ã€‚ âš ï¸ ä¸è¦æš´éœ²ä½ çš„ç”¨æˆ·ç›®å½•æˆ– host keyã€‚ âš™ï¸ å¦‚éœ€è¿œç¨‹å¯ç”¨ï¼Œç¡®è®¤ ListenAddress 0.0.0.0 å¹¶å¼€æ”¾ç«¯å£ã€‚ ğŸ§¾ å°ç»“ æœ¬æ–‡æ¼”ç¤ºäº†å¦‚ä½•ï¼š\nåœ¨æ²¡æœ‰ sudo æƒé™çš„ç¯å¢ƒä¸‹å¯åŠ¨ç‹¬ç«‹ SSH æœåŠ¡ï¼› é…ç½®å¯†é’¥è®¤è¯é¿å… /etc/shadow é™åˆ¶ï¼› å®ç°æœ¬åœ°ä¸è¿œç¨‹ SSH ç™»å½•ï¼› æ’æŸ¥ â€œConnection refusedâ€ ç­‰å¸¸è§é—®é¢˜ã€‚ æœ€ç»ˆï¼Œä½ å°±èƒ½åœ¨ä»»ä½•æ™®é€šè´¦æˆ·ä¸­æ‹¥æœ‰ä¸€ä¸ªâ€œè‡ªå·±çš„ SSH æœåŠ¡â€ã€‚\nğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯» OpenSSH å®˜æ–¹æ‰‹å†Œ man sshd_config RFC 4251: The Secure Shell Protocol Architecture Linux æ–‡ä»¶æƒé™ä¸å®‰å…¨æœºåˆ¶ ğŸš€ è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰ ğŸ’» è¯•è¯•çœ‹ï¼šç”¨æœ¬æ–‡æ­¥éª¤å¯åŠ¨ä½ è‡ªå·±çš„ sshdã€‚ â­ æ”¶è—åˆ†äº«ï¼šä¸‹æ¬¡åœ¨å—é™ç¯å¢ƒä¸­ï¼Œä½ å°±æœ‰åé—¨æ–¹æ¡ˆã€‚ ğŸ’¬ è¯„è®ºäº¤æµï¼šä½ è¿˜é‡åˆ°è¿‡å“ªäº› SSH å¯åŠ¨é™åˆ¶ï¼Ÿ æ˜¯å¦å¸Œæœ›æˆ‘å¸®ä½ ç”Ÿæˆä¸€ä¸ª Markdown ç‰ˆï¼ˆå¯ç›´æ¥å‘å¸ƒåˆ°åšå®¢å¹³å°ã€ä¿ç•™ä»£ç é«˜äº®ï¼‰ï¼Ÿ\n","permalink":"http://localhost:1313/jeanblog/posts/%E6%B2%A1%E6%9C%89sudo%E6%9D%83%E9%99%90%E5%BC%80%E5%90%AFssh/","summary":"\u003cp\u003eä»¥ä¸‹æ˜¯ä¸€ç¯‡ç¬¦åˆä¼˜ç§€æŠ€æœ¯åšå®¢è§„èŒƒçš„å®Œæ•´æ–‡ç« è‰ç¨¿ï¼ŒåŸºäºä½ ä¸Šé¢å®Œæ•´çš„ SSH å¯åŠ¨ä¸è°ƒè¯•è¿‡ç¨‹æ•´ç†è€Œæˆï¼Œé€‚åˆå‘å¸ƒåˆ°æŠ€æœ¯åšå®¢ï¼ˆå¦‚æ˜é‡‘ã€çŸ¥ä¹ä¸“æ ã€Medium æˆ–ä¸ªäººåšå®¢ï¼‰ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch1 id=\"-åœ¨æ— -sudo-æƒé™çš„-linux-ç¯å¢ƒä¸‹å¯åŠ¨-ssh-æœåŠ¡ç”¨æˆ·æ€-sshd-å…¨æ”»ç•¥\"\u003eğŸ§  åœ¨æ—  \u003ccode\u003esudo\u003c/code\u003e æƒé™çš„ Linux ç¯å¢ƒä¸‹å¯åŠ¨ SSH æœåŠ¡ï¼ˆç”¨æˆ·æ€ sshd å…¨æ”»ç•¥ï¼‰\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦ï¼š\u003c/strong\u003e\nå½“ä½ åœ¨å­¦æ ¡æœºæˆ¿ã€è¿œç¨‹å®éªŒç¯å¢ƒæˆ–å—é™æœåŠ¡å™¨ä¸Šæ²¡æœ‰ root æƒé™æ—¶ï¼Œå¦‚ä½•å¼€å¯ SSH æœåŠ¡å¹¶è¿œç¨‹è®¿é—®ï¼Ÿæœ¬æ–‡ä»é›¶å¸¦ä½ åœ¨ç”¨æˆ·ç›®å½•ä¸‹è¿è¡Œå¯ç”¨çš„ \u003ccode\u003esshd\u003c/code\u003eï¼Œæ”¯æŒå¯†é’¥ç™»å½•å¹¶å®ç°è¿œç¨‹è¿æ¥ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eé˜…è¯»æ—¶é•¿ï¼š\u003c/strong\u003e 10 åˆ†é’Ÿ\n\u003cstrong\u003eç›®æ ‡è¯»è€…ï¼š\u003c/strong\u003e ä¸­çº§ Linux ç”¨æˆ·ã€ç§‘ç ”äººå‘˜ã€æœåŠ¡å™¨ä½¿ç”¨è€…ã€DevOps å­¦ä¹ è€…\n\u003cstrong\u003eæ ‡ç­¾ï¼š\u003c/strong\u003e SSHã€sshdã€Linuxã€è¿œç¨‹è¿æ¥ã€é rootã€ç³»ç»Ÿé…ç½®\n\u003cstrong\u003eSEO å…³é”®è¯ï¼š\u003c/strong\u003e SSH æ—  root æƒé™ã€ç”¨æˆ·æ€ sshdã€openssh é…ç½®ã€éç‰¹æƒç«¯å£ã€è¿œç¨‹ç™»å½•å¤±è´¥\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯ä¸åŠ¨æœº\"\u003eğŸ¯ èƒŒæ™¯ä¸åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eå¾ˆå¤šç§‘ç ”æœåŠ¡å™¨ã€å­¦æ ¡å®éªŒå®¤æˆ–å…±äº«ä¸»æœºéƒ½ä¸ç»™æ™®é€šç”¨æˆ· \u003ccode\u003esudo\u003c/code\u003e æƒé™ã€‚\nç„¶è€Œæˆ‘ä»¬ä»å¸¸å¸¸éœ€è¦ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè¿œç¨‹ç™»å½•è‡ªå·±çš„è´¦æˆ·ï¼›\u003c/li\u003e\n\u003cli\u003eä¸Šä¼ /ä¸‹è½½æ–‡ä»¶ï¼›\u003c/li\u003e\n\u003cli\u003eæˆ–ä»å¦ä¸€å°æœºå™¨è®¿é—®è‡ªå·±çš„è¿›ç¨‹ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eé»˜è®¤æƒ…å†µä¸‹ï¼Œ\u003ccode\u003esshd\u003c/code\u003e æœåŠ¡éœ€è¦ root æ‰èƒ½è¿è¡Œï¼Œå› ä¸ºå®ƒé€šå¸¸ç»‘å®šåœ¨ 22 ç«¯å£å¹¶è®¿é—®ç³»ç»Ÿè®¤è¯ä¿¡æ¯ã€‚ä½†äº‹å®ä¸Šï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ \u003cstrong\u003eç”¨æˆ·ç›®å½•\u003c/strong\u003e ä¸‹è¿è¡Œä¸€ä¸ªâ€œç”¨æˆ·æ€ SSH æœåŠ¡â€ï¼Œæ— éœ€ä¿®æ”¹ç³»ç»Ÿé…ç½®ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µ\"\u003eğŸ§© æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eåè¯\u003c/th\u003e\n          \u003cth\u003eå«ä¹‰\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003esshd\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eSSH æœåŠ¡ç«¯ç¨‹åºï¼Œè´Ÿè´£æ¥æ”¶å’ŒéªŒè¯ SSH è¿æ¥ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eç”¨æˆ·æ€ï¼ˆuser-spaceï¼‰sshd\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæ™®é€šç”¨æˆ·è‡ªè¡Œå¯åŠ¨çš„ sshd è¿›ç¨‹ï¼Œä¸ä½¿ç”¨ root æƒé™ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eHostKey\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæœåŠ¡å™¨ç”¨äºåŠ å¯†è¿æ¥çš„å¯†é’¥å¯¹ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eAuthorizedKeys\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eè¢«å…è®¸ç™»å½•è¯¥è´¦æˆ·çš„å…¬é’¥åˆ—è¡¨ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003e/etc/shadow\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eç³»ç»Ÿå¯†ç å“ˆå¸Œå­˜å‚¨æ–‡ä»¶ï¼Œé root ç”¨æˆ·æ— æ³•è®¿é—®ã€‚\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæŒ‡å—ä»é›¶å¯åŠ¨ç”¨æˆ·æ€-ssh-æœåŠ¡\"\u003eâš™ï¸ å®è·µæŒ‡å—ï¼šä»é›¶å¯åŠ¨ç”¨æˆ·æ€ SSH æœåŠ¡\u003c/h2\u003e\n\u003ch3 id=\"-ç¬¬ä¸€æ­¥å‡†å¤‡é…ç½®æ–‡ä»¶\"\u003eğŸªœ ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡é…ç½®æ–‡ä»¶\u003c/h3\u003e\n\u003cp\u003eåˆ›å»ºé…ç½®ç›®å½•ï¼š\u003c/p\u003e","title":"æ²¡æœ‰sudoæƒé™å¼€å¯ssh"},{"content":"ğŸš€ åœ¨ Ubuntu ä¸Šè®© frp å†…ç½‘ç©¿é€æœåŠ¡å¼€æœºè‡ªå¯ï¼šå®Œæ•´æŒ‡å— å‰¯æ ‡é¢˜ / æ‘˜è¦ é€šè¿‡ systemd å°† frpï¼ˆFast Reverse Proxyï¼‰è®¾ç½®ä¸ºç³»ç»ŸæœåŠ¡ï¼Œå®ç°ç¨³å®šã€å®‰å…¨ã€å¯ç›‘æ§çš„å¼€æœºè‡ªåŠ¨å¯åŠ¨æ–¹æ¡ˆï¼Œé¿å…æ¯æ¬¡æ‰‹åŠ¨è¿è¡Œã€‚\né˜…è¯»æ—¶é•¿ï¼š8 åˆ†é’Ÿ æ ‡ç­¾ï¼šfrpã€å†…ç½‘ç©¿é€ã€systemdã€è‡ªå¯ã€Linuxã€Ubuntu SEO å…³é”®è¯ï¼šfrp å¼€æœºè‡ªå¯ã€Ubuntu frp é…ç½®ã€frpc systemdã€frps æœåŠ¡ç«¯å¯åŠ¨ã€å†…ç½‘ç©¿é€é…ç½® å…ƒæè¿°ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ Ubuntu ä¸Šä½¿ç”¨ systemd å°† frpï¼ˆfrpc / frpsï¼‰è®¾ç½®ä¸ºå¼€æœºè‡ªå¯æœåŠ¡ï¼Œé™„é…ç½®æ–‡ä»¶æ¨¡æ¿ä¸å¸¸è§é—®é¢˜æ’æŸ¥ã€‚\nğŸ¯ ç›®æ ‡è¯»è€… é€‚åˆï¼š\næƒ³åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½² frps çš„å¼€å‘è€… æƒ³è®©å®¶ä¸­/åŠå…¬å†…ç½‘æœºå™¨é•¿æœŸç¨³å®šç©¿é€çš„ä¸­çº§ Linux ç”¨æˆ· DevOps / è‡ªå»ºæœåŠ¡çˆ±å¥½è€… ğŸ§© èƒŒæ™¯ä¸åŠ¨æœº è®¸å¤šå¼€å‘è€…ä½¿ç”¨ frp å®ç°å†…ç½‘ç©¿é€ï¼Œè®©å†…ç½‘æœåŠ¡ï¼ˆå¦‚ SSHã€Webã€NASï¼‰å¯ä»¥å®‰å…¨åœ°ä»å¤–éƒ¨è®¿é—®ã€‚ é—®é¢˜æ˜¯ï¼šæ‰‹åŠ¨è¿è¡Œ ./frpc -c frpc.ini æ—¢éº»çƒ¦åˆä¸ç¨³å®šï¼Œæœºå™¨é‡å¯åå®¹æ˜“å¿˜è®°å¯åŠ¨ã€‚\nå› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ systemd æœåŠ¡ å®ç°â€œè‡ªåŠ¨éšç³»ç»Ÿå¯åŠ¨ + å¤±è´¥è‡ªåŠ¨é‡å¯ + é›†ä¸­æ—¥å¿—ç®¡ç†â€çš„æ•ˆæœã€‚\nğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ frps / frpcï¼šfrp çš„æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å¯æ‰§è¡Œç¨‹åºã€‚ systemdï¼šç°ä»£ Linux ç³»ç»Ÿçš„æœåŠ¡ç®¡ç†å™¨ï¼Œç”¨äºå®šä¹‰å’Œæ§åˆ¶åå°æœåŠ¡ã€‚ unit æ–‡ä»¶ï¼šå®šä¹‰æœåŠ¡çš„é…ç½®ï¼ˆå¦‚å¯åŠ¨å‘½ä»¤ã€ä¾èµ–ã€é‡å¯ç­–ç•¥ï¼‰ã€‚ ğŸ› ï¸ å®è·µæ­¥éª¤æŒ‡å— 1ï¸âƒ£ å®‰è£…ä¸å‡†å¤‡ å°†äºŒè¿›åˆ¶æ–‡ä»¶ä¸é…ç½®æ–‡ä»¶æ”¾å…¥ç³»ç»Ÿè·¯å¾„ï¼š\nsudo mv frpc /usr/local/bin/ sudo chmod +x /usr/local/bin/frpc sudo mkdir -p /etc/frp sudo mv frpc.ini /etc/frp/frpc.ini ğŸ’¡ æç¤ºï¼šæœåŠ¡ç«¯ä½¿ç”¨ frps æ—¶åŒç†ï¼Œåªéœ€æ¢æˆ frps å’Œ frps.iniã€‚\n2ï¸âƒ£ ï¼ˆå¯é€‰ï¼‰åˆ›å»ºä¸“ç”¨è¿è¡Œç”¨æˆ· å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸å»ºè®®ä½¿ç”¨ rootï¼š\nsudo useradd --system --no-create-home --shell /sbin/nologin frp sudo chown -R frp:frp /etc/frp 3ï¸âƒ£ åˆ›å»º systemd Unit æ–‡ä»¶ æ–°å»º /etc/systemd/system/frpc.serviceï¼š\n[Unit] Description=frp client service After=network-online.target Wants=network-online.target [Service] Type=simple User=frp Group=frp ExecStart=/usr/local/bin/frpc -c /etc/frp/frpc.ini Restart=on-failure RestartSec=5 LimitNOFILE=65536 [Install] WantedBy=multi-user.target 4ï¸âƒ£ å¯åŠ¨ä¸å¯ç”¨è‡ªå¯ sudo systemctl daemon-reload sudo systemctl start frpc sudo systemctl enable frpc 5ï¸âƒ£ æ£€æŸ¥çŠ¶æ€ä¸æ—¥å¿— sudo systemctl status frpc sudo journalctl -u frpc -f æ—¥å¿—é›†ä¸­åœ¨ systemd æ—¥å¿—ä¸­ï¼Œæ–¹ä¾¿æ’é”™ä¸ç›‘æ§ã€‚\nğŸ§  åŸç†ä¸è§£é‡Š systemd åœ¨å¯åŠ¨é˜¶æ®µä¼šæ ¹æ® WantedBy=multi-user.target è‡ªåŠ¨åŠ è½½è¯¥æœåŠ¡ã€‚ After=network-online.target ç¡®ä¿ç½‘ç»œå¯ç”¨åå†å¯åŠ¨ï¼Œé¿å…è¿æ¥å¤±è´¥ã€‚ Restart=on-failure åˆ™ä¿è¯ frpc å¼‚å¸¸é€€å‡ºåèƒ½è‡ªåŠ¨é‡å¯ï¼Œæé«˜ç¨³å®šæ€§ã€‚\nç›¸æ¯” @reboot çš„ cron æ–¹æ¡ˆï¼Œsystemd æä¾›äº†æ›´ç²¾ç»†çš„ä¾èµ–ç®¡ç†ã€é‡å¯ç­–ç•¥ä¸ç»Ÿä¸€æ—¥å¿—ã€‚\nâš ï¸ å¸¸è§é—®é¢˜ä¸é™·é˜± é—®é¢˜ åŸå›  è§£å†³æ–¹æ¡ˆ æœåŠ¡å¯åŠ¨å¤±è´¥ é…ç½®æ–‡ä»¶æƒé™é”™è¯¯ ç¡®ä¿ /etc/frp/frpc.ini å¯è¢« frp ç”¨æˆ·è¯»å– ç½‘ç»œæœªå°±ç»ª systemd ä¾èµ–ä¸å®Œæ•´ ç¡®ä¿å¯ç”¨ systemd-networkd-wait-online.service frp æ— æ³•è¿æ¥ é˜²ç«å¢™æˆ–å®‰å…¨ç»„æœªå¼€æ”¾ç«¯å£ ç¡®è®¤ TCP/UDP ç«¯å£æ”¾é€š æœåŠ¡æ— æ³•è‡ªå¯ å¿˜è®°æ‰§è¡Œ enable å‘½ä»¤ sudo systemctl enable frpc âœ… æœ€ä½³å®è·µä¸å»ºè®® ä½¿ç”¨ é root ç”¨æˆ· è¿è¡ŒæœåŠ¡ï¼Œæå‡å®‰å…¨æ€§ã€‚ å°†æ—¥å¿—é‡å®šå‘æˆ–æ”¶é›†åˆ° ELK/Promtail ç­‰ç³»ç»Ÿä¸­ã€‚ æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯é…ç½®å‡åº”å¼€å¯ token è®¤è¯æˆ– TLSã€‚ è‹¥éœ€å¤šä¸ª frpc å®ä¾‹ï¼Œå¯ç”¨ frpc@xxx.service æ¨¡æ¿æœºåˆ¶ã€‚ ğŸ§¾ å°ç»“ æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ï¼š\nå®‰è£…ä¸é…ç½® frp åˆ›å»º systemd æœåŠ¡ å®ç°è‡ªåŠ¨å¯åŠ¨ä¸è‡ªåŠ¨é‡å¯ ç†è§£èƒŒåçš„æœºåˆ¶ä¸å¸¸è§é™·é˜± æŒæ¡ systemd é…ç½®åï¼Œä½ å¯ä»¥ç”¨ç›¸åŒæ–¹æ³•ç®¡ç†ä»»ä½•è‡ªå®šä¹‰åå°ç¨‹åºã€‚\nğŸ”— å‚è€ƒä¸å»¶ä¼¸é˜…è¯» frp å®˜æ–¹æ–‡æ¡£ systemd.service å®˜æ–¹è¯´æ˜ Ubuntu Server Guide - systemd ğŸ’¬ è¡ŒåŠ¨å·å¬ ğŸ‘‰ è¯•è¯•çœ‹ï¼ å°†æœ¬æ–‡çš„ unit æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„æœåŠ¡å™¨ä¸­ï¼Œè¿è¡Œ sudo systemctl enable --now frpcã€‚ å¦‚æœæˆåŠŸå¯åŠ¨ï¼Œè¯·åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ä½ ç”¨ frp å®ç°äº†ä»€ä¹ˆæœ‰è¶£çš„é¡¹ç›®ï¼ ä½ ä¹Ÿå¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°æœ¬æ–‡å¯¹åº”çš„æ¨¡æ¿ä¸è„šæœ¬ï¼ˆé™„è‡ªåŠ¨å®‰è£…è„šæœ¬ï¼‰ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%9C%A8ubuntu%E4%B8%8A%E8%AE%A9frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%9C%8D%E5%8A%A1%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF/","summary":"\u003ch1 id=\"-åœ¨-ubuntu-ä¸Šè®©-frp-å†…ç½‘ç©¿é€æœåŠ¡å¼€æœºè‡ªå¯å®Œæ•´æŒ‡å—\"\u003eğŸš€ åœ¨ Ubuntu ä¸Šè®© frp å†…ç½‘ç©¿é€æœåŠ¡å¼€æœºè‡ªå¯ï¼šå®Œæ•´æŒ‡å—\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eå‰¯æ ‡é¢˜ / æ‘˜è¦\u003c/strong\u003e\né€šè¿‡ systemd å°† frpï¼ˆFast Reverse Proxyï¼‰è®¾ç½®ä¸ºç³»ç»ŸæœåŠ¡ï¼Œå®ç°ç¨³å®šã€å®‰å…¨ã€å¯ç›‘æ§çš„å¼€æœºè‡ªåŠ¨å¯åŠ¨æ–¹æ¡ˆï¼Œé¿å…æ¯æ¬¡æ‰‹åŠ¨è¿è¡Œã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eé˜…è¯»æ—¶é•¿\u003c/strong\u003eï¼š8 åˆ†é’Ÿ\n\u003cstrong\u003eæ ‡ç­¾\u003c/strong\u003eï¼šfrpã€å†…ç½‘ç©¿é€ã€systemdã€è‡ªå¯ã€Linuxã€Ubuntu\n\u003cstrong\u003eSEO å…³é”®è¯\u003c/strong\u003eï¼šfrp å¼€æœºè‡ªå¯ã€Ubuntu frp é…ç½®ã€frpc systemdã€frps æœåŠ¡ç«¯å¯åŠ¨ã€å†…ç½‘ç©¿é€é…ç½®\n\u003cstrong\u003eå…ƒæè¿°\u003c/strong\u003eï¼šæ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ Ubuntu ä¸Šä½¿ç”¨ systemd å°† frpï¼ˆfrpc / frpsï¼‰è®¾ç½®ä¸ºå¼€æœºè‡ªå¯æœåŠ¡ï¼Œé™„é…ç½®æ–‡ä»¶æ¨¡æ¿ä¸å¸¸è§é—®é¢˜æ’æŸ¥ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ç›®æ ‡è¯»è€…\"\u003eğŸ¯ ç›®æ ‡è¯»è€…\u003c/h2\u003e\n\u003cp\u003eé€‚åˆï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæƒ³åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½² frps çš„å¼€å‘è€…\u003c/li\u003e\n\u003cli\u003eæƒ³è®©å®¶ä¸­/åŠå…¬å†…ç½‘æœºå™¨é•¿æœŸç¨³å®šç©¿é€çš„ä¸­çº§ Linux ç”¨æˆ·\u003c/li\u003e\n\u003cli\u003eDevOps / è‡ªå»ºæœåŠ¡çˆ±å¥½è€…\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-èƒŒæ™¯ä¸åŠ¨æœº\"\u003eğŸ§© èƒŒæ™¯ä¸åŠ¨æœº\u003c/h2\u003e\n\u003cp\u003eè®¸å¤šå¼€å‘è€…ä½¿ç”¨ \u003cstrong\u003efrp\u003c/strong\u003e å®ç°å†…ç½‘ç©¿é€ï¼Œè®©å†…ç½‘æœåŠ¡ï¼ˆå¦‚ SSHã€Webã€NASï¼‰å¯ä»¥å®‰å…¨åœ°ä»å¤–éƒ¨è®¿é—®ã€‚\né—®é¢˜æ˜¯ï¼šæ‰‹åŠ¨è¿è¡Œ \u003ccode\u003e./frpc -c frpc.ini\u003c/code\u003e æ—¢éº»çƒ¦åˆä¸ç¨³å®šï¼Œæœºå™¨é‡å¯åå®¹æ˜“å¿˜è®°å¯åŠ¨ã€‚\u003c/p\u003e\n\u003cp\u003eå› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ \u003cstrong\u003esystemd æœåŠ¡\u003c/strong\u003e å®ç°â€œ\u003cstrong\u003eè‡ªåŠ¨éšç³»ç»Ÿå¯åŠ¨ + å¤±è´¥è‡ªåŠ¨é‡å¯ + é›†ä¸­æ—¥å¿—ç®¡ç†\u003c/strong\u003eâ€çš„æ•ˆæœã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-æ ¸å¿ƒæ¦‚å¿µ\"\u003eğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003efrps / frpc\u003c/strong\u003eï¼šfrp çš„æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å¯æ‰§è¡Œç¨‹åºã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003esystemd\u003c/strong\u003eï¼šç°ä»£ Linux ç³»ç»Ÿçš„æœåŠ¡ç®¡ç†å™¨ï¼Œç”¨äºå®šä¹‰å’Œæ§åˆ¶åå°æœåŠ¡ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eunit æ–‡ä»¶\u003c/strong\u003eï¼šå®šä¹‰æœåŠ¡çš„é…ç½®ï¼ˆå¦‚å¯åŠ¨å‘½ä»¤ã€ä¾èµ–ã€é‡å¯ç­–ç•¥ï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å®è·µæ­¥éª¤æŒ‡å—\"\u003eğŸ› ï¸ å®è·µæ­¥éª¤æŒ‡å—\u003c/h2\u003e\n\u003ch3 id=\"1-å®‰è£…ä¸å‡†å¤‡\"\u003e1ï¸âƒ£ å®‰è£…ä¸å‡†å¤‡\u003c/h3\u003e\n\u003cp\u003eå°†äºŒè¿›åˆ¶æ–‡ä»¶ä¸é…ç½®æ–‡ä»¶æ”¾å…¥ç³»ç»Ÿè·¯å¾„ï¼š\u003c/p\u003e","title":"åœ¨Ubuntuä¸Šè®©frpå†…ç½‘ç©¿é€æœåŠ¡å¼€æœºè‡ªå¯"},{"content":"ğŸ§± ä»é›¶åˆ°ç”Ÿäº§ï¼šå¦‚ä½•ä¼˜é›…åœ°è®¾è®¡ ORM å±‚ç®¡ç†ï¼ˆä»¥ SQLAlchemy ä¸ºæ ¸å¿ƒï¼‰ æœ¬æ–‡å°†å¸¦ä½ ä»æ•°æ®åº“è¡¨ç»“æ„å‡ºå‘ï¼Œæ„å»ºä¸€å¥—é«˜å†…èšã€ä½è€¦åˆçš„ ORM å±‚æ¶æ„ã€‚ ç›®æ ‡ï¼šè®©ä½ çš„ Flask / FastAPI é¡¹ç›®åœ¨æ•°æ®è®¿é—®ä¸Šæ—¢ç®€æ´åˆç¨³å¥ã€‚\nä¸€ã€ä¸ºä»€ä¹ˆè¦é‡è§† ORM å±‚è®¾è®¡ï¼Ÿ å¾ˆå¤šé¡¹ç›®åˆæœŸåªæ˜¯â€œå…ˆèƒ½è·‘â€ï¼Œç›´æ¥æŠŠ SQL å†™åœ¨æ§åˆ¶å™¨é‡Œï¼Œä½†å¾ˆå¿«å°±ä¼šå‡ºç°ï¼š\nä¸šåŠ¡é€»è¾‘å’Œ SQL æ··åœ¨ä¸€èµ·ï¼› è¡¨å…³ç³»å¤æ‚ï¼Œç»´æŠ¤å›°éš¾ï¼› æƒ³å¤ç”¨æŸ¥è¯¢é€»è¾‘å¾ˆéº»çƒ¦ï¼› è¿ç§»åˆ°åˆ«çš„æ¡†æ¶ï¼ˆFlask â†’ FastAPIï¼‰ä»£ä»·å¤§ã€‚ ORM å±‚ï¼ˆObject Relational Mappingï¼‰æ˜¯æ•°æ®åº“ä¸ä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ æŠ½è±¡æ¡¥æ¢ï¼Œ ä¸€ä¸ªå¥½çš„ ORM å±‚èƒ½è®©ä½ åªå…³å¿ƒå¯¹è±¡ï¼Œä¸ç”¨åå¤å†™ SQLã€‚\näºŒã€é¡¹ç›®åœºæ™¯ï¼šæ‹›æ ‡ä¿¡æ¯æ•°æ®ç³»ç»Ÿ æˆ‘ä»¬ä»¥ä¸€ä¸ªçœŸå®ä¸šåŠ¡ä¸ºä¾‹ï¼š çˆ¬å–å„ç½‘ç«™çš„æ‹›æ ‡å…¬å‘Šï¼Œä¿å­˜ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œå¹¶ç”Ÿæˆç»Ÿè®¡çœ‹æ¿ã€‚\nç›®æ ‡æ•°æ®åº“å®ä½“ è¡¨å åŠŸèƒ½ tender_info å…¬å‘ŠåŸºæœ¬ä¿¡æ¯ tender_attachments å…¬å‘ŠåŠå˜æ›´æ–‡ä»¶ tender_organization æ‹›æ ‡æœºæ„ä¸è”ç³»æ–¹å¼ tender_statistics æ¯æ—¥/æœˆ/å¹´ç»Ÿè®¡ä¿¡æ¯ ä¸‰ã€ORM å±‚è®¾è®¡æ€è·¯ ğŸ§© åˆ†å±‚åŸåˆ™ å±‚çº§ ä½œç”¨ ä»£ç ä½ç½® Model å±‚ ORM æ¨¡å‹å®šä¹‰ï¼Œå¯¹åº”æ•°æ®åº“è¡¨ç»“æ„ models.py Repository å±‚ å°è£… CRUD é€»è¾‘ï¼ˆæ•°æ®åº“æ“ä½œï¼‰ repository.py Service å±‚ ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆèšåˆå¤šä¸ªä»“åº“é€»è¾‘ï¼‰ service.py API å±‚ æ§åˆ¶å™¨/è·¯ç”±æ¥å£ Flask/FastAPI è§†å›¾æ–‡ä»¶ è¿™ç§åˆ†å±‚è®©ä½ åšåˆ°ï¼š\nä¸€å¤„æ”¹æ¨¡å‹ï¼Œå¤šå¤„å¤ç”¨ï¼› ä¸šåŠ¡ä¸æ•°æ®åº“è®¿é—®è§£è€¦ï¼› ORM æ¨¡å‹å¯è¢«å¤šæ¡†æ¶å¤ç”¨ã€‚ å››ã€ORM æ¨¡å‹å®šä¹‰ï¼ˆSQLAlchemy 2.xï¼‰ æˆ‘ä»¬ä½¿ç”¨ declarative_base() å®šä¹‰æ‰€æœ‰æ¨¡å‹ç±»ã€‚ å››å¼ è¡¨å¦‚ä¸‹ï¼š\n# models.py from datetime import datetime from sqlalchemy import ( Column, Integer, String, Date, DateTime, Text, Enum, JSON, ForeignKey, UniqueConstraint ) from sqlalchemy.orm import relationship, declarative_base Base = declarative_base() 1ï¸âƒ£ åŸºæœ¬ä¿¡æ¯è¡¨ TenderInfo class TenderInfo(Base): __tablename__ = \u0026#34;tender_info\u0026#34; id = Column(Integer, primary_key=True, autoincrement=True) tender_id = Column(String(100), nullable=False, index=True, comment=\u0026#34;é¡¹ç›®ç¼–å·/æ‹›æ ‡ç¼–å·\u0026#34;) tender_title = Column(String(500), nullable=False, comment=\u0026#34;å…¬å‘Šæ ‡é¢˜\u0026#34;) announcement_type = Column(String(255), comment=\u0026#34;å…¬å‘Šç±»å‹\u0026#34;) purchase_type = Column(String(100), comment=\u0026#34;é‡‡è´­æ–¹å¼\u0026#34;) tender_status = Column(String(100), comment=\u0026#34;é¡¹ç›®çŠ¶æ€\u0026#34;) website_source = Column(String(50), comment=\u0026#34;ç½‘ç«™æ¥æº\u0026#34;) announcement_date = Column(Date, comment=\u0026#34;å…¬å‘Šæ—¥æœŸ\u0026#34;) bid_doc_deadline = Column(String(100)) bid_open_time = Column(String(100)) has_change_announce = Column(Enum(\u0026#34;Y\u0026#34;, \u0026#34;N\u0026#34;, name=\u0026#34;change_enum\u0026#34;), default=\u0026#34;N\u0026#34;) change_content = Column(Text) winning_bidder = Column(String(255)) collection_time = Column(DateTime, default=datetime.utcnow) created_at = Column(DateTime, default=datetime.utcnow) # ä¸€å¯¹å¤šï¼šé™„ä»¶ attachments = relationship( \u0026#34;TenderAttachments\u0026#34;, back_populates=\u0026#34;tender\u0026#34;, cascade=\u0026#34;all, delete-orphan\u0026#34;, foreign_keys=\u0026#34;TenderAttachments.tender_info_id\u0026#34; ) # ä¸€å¯¹ä¸€ï¼šæœºæ„ä¿¡æ¯ organization = relationship( \u0026#34;TenderOrganization\u0026#34;, back_populates=\u0026#34;tender\u0026#34;, uselist=False, foreign_keys=\u0026#34;TenderOrganization.tender_info_id\u0026#34; ) def __repr__(self): return f\u0026#34;\u0026lt;TenderInfo(id={self.id}, title=\u0026#39;{self.tender_title}\u0026#39;, source=\u0026#39;{self.website_source}\u0026#39;)\u0026gt;\u0026#34; 2ï¸âƒ£ é™„ä»¶ä¿¡æ¯è¡¨ TenderAttachments class TenderAttachments(Base): __tablename__ = \u0026#34;tender_attachments\u0026#34; id = Column(Integer, primary_key=True, autoincrement=True) tender_info_id = Column( Integer, ForeignKey(\u0026#34;tender_info.id\u0026#34;, ondelete=\u0026#34;CASCADE\u0026#34;), nullable=False, index=True ) original_announcement_url = Column(Text) original_announcement_file_path = Column(Text) files_url = Column(String(500)) change_announcement_url = Column(Text) change_announcement_file_path = Column(String(512)) change_files_url = Column(String(500)) has_attachments = Column(Enum(\u0026#34;Y\u0026#34;, \u0026#34;N\u0026#34;, name=\u0026#34;attach_enum\u0026#34;), default=\u0026#34;N\u0026#34;) created_at = Column(DateTime, default=datetime.utcnow) tender = relationship(\u0026#34;TenderInfo\u0026#34;, back_populates=\u0026#34;attachments\u0026#34;) 3ï¸âƒ£ æ‹›æ ‡æœºæ„è¡¨ TenderOrganization class TenderOrganization(Base): __tablename__ = \u0026#34;tender_organization\u0026#34; id = Column(Integer, primary_key=True, autoincrement=True) tender_info_id = Column( Integer, ForeignKey(\u0026#34;tender_info.id\u0026#34;, ondelete=\u0026#34;CASCADE\u0026#34;), nullable=False, unique=True, index=True ) purchaser = Column(String(200)) tender_agency = Column(String(255)) contact_person = Column(String(100)) contact_phone = Column(String(50)) email = Column(String(100)) created_at = Column(DateTime, default=datetime.utcnow) tender = relationship(\u0026#34;TenderInfo\u0026#34;, back_populates=\u0026#34;organization\u0026#34;) 4ï¸âƒ£ ç»Ÿè®¡è¡¨ TenderStatistics class TenderStatistics(Base): __tablename__ = \u0026#34;tender_statistics\u0026#34; id = Column(Integer, primary_key=True, autoincrement=True) stat_date = Column(Date, nullable=False) period_type = Column(String(10), nullable=False) # daily / monthly / yearly website_source = Column(String(20), default=\u0026#34;all\u0026#34;) total_count = Column(Integer, default=0) cumulative_total = Column(Integer, default=0) announcement_type_stats = Column(JSON) purchase_type_stats = Column(JSON) tender_status_stats = Column(JSON) created_at = Column(DateTime, default=datetime.utcnow) äº”ã€Repository å±‚ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰ è¿™ä¸€å±‚çš„èŒè´£æ˜¯å°è£…å…·ä½“çš„æ•°æ®åº“æ“ä½œé€»è¾‘ï¼Œä¿è¯ API æˆ– Service å±‚ä¸ç›´æ¥è®¿é—® Sessionã€‚\n# repository.py from sqlalchemy.orm import Session from models import TenderInfo, TenderAttachments, TenderOrganization, TenderStatistics def create_tender_info(db: Session, data: dict): tender = TenderInfo(**data) db.add(tender) db.commit() db.refresh(tender) return tender def get_tender_info(db: Session, tender_id: str): return db.query(TenderInfo).filter(TenderInfo.tender_id == tender_id).first() def list_tenders(db: Session, limit=50): return db.query(TenderInfo).order_by(TenderInfo.collection_time.desc()).limit(limit).all() def create_attachments(db: Session, tender_info_id: int, data: dict): attachment = TenderAttachments(tender_info_id=tender_info_id, **data) db.add(attachment) db.commit() return attachment def create_organization(db: Session, tender_info_id: int, data: dict): org = TenderOrganization(tender_info_id=tender_info_id, **data) db.add(org) db.commit() return org def insert_statistics(db: Session, data: dict): stat = TenderStatistics(**data) db.add(stat) db.commit() return stat å…­ã€Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘èšåˆï¼‰ Service å±‚è´Ÿè´£â€œåè°ƒå¤šä¸ªä»“åº“æ“ä½œâ€ï¼Œ è®©æ§åˆ¶å™¨ä¸ç›´æ¥æ“ä½œæ•°æ®åº“ã€‚\n# service.py from sqlalchemy.orm import Session from repository import create_tender_info, create_attachments, create_organization def create_full_tender(db: Session, info_data, attachment_data, org_data): tender = create_tender_info(db, info_data) create_attachments(db, tender.id, attachment_data) create_organization(db, tender.id, org_data) return tender ä¸ƒã€API å±‚ï¼ˆFlask / FastAPI é€šç”¨ï¼‰ Flask ç¤ºä¾‹ # app.py from flask import Flask, jsonify, request from sqlalchemy import create_engine from sqlalchemy.orm import sessionmaker from models import Base from repository import list_tenders, get_tender_info app = Flask(__name__) engine = create_engine(\u0026#34;sqlite:///tenders.db\u0026#34;) SessionLocal = sessionmaker(bind=engine) Base.metadata.create_all(engine) @app.route(\u0026#34;/api/tenders\u0026#34;) def get_all_tenders(): with SessionLocal() as db: tenders = list_tenders(db) return jsonify([{\u0026#34;id\u0026#34;: t.id, \u0026#34;title\u0026#34;: t.tender_title} for t in tenders]) @app.route(\u0026#34;/api/tenders/\u0026lt;tid\u0026gt;\u0026#34;) def get_one_tender(tid): with SessionLocal() as db: t = get_tender_info(db, tid) return jsonify({ \u0026#34;id\u0026#34;: t.id, \u0026#34;title\u0026#34;: t.tender_title, \u0026#34;status\u0026#34;: t.tender_status, \u0026#34;source\u0026#34;: t.website_source }) å…«ã€ORM ç®¡ç†å±‚çš„æ ¸å¿ƒæ€æƒ³ åŸåˆ™ è¯´æ˜ èŒè´£å•ä¸€ ORM åªæ˜ å°„å¯¹è±¡ï¼Œä¸æ··å…¥ä¸šåŠ¡é€»è¾‘ è§£è€¦å±‚æ¬¡ CRUD æ”¾åœ¨ Repository å±‚ èšåˆæ“ä½œ å¤æ‚é€»è¾‘æ”¾ Service å±‚ è‡ªåŠ¨å…³ç³» å……åˆ†åˆ©ç”¨ relationship ä»£æ›¿æ‰‹å†™ JOIN å¯æ‰©å±•æ€§å¼º æ–°è¡¨å¯ç‹¬ç«‹æ·»åŠ ï¼Œä¸å½±å“æ—§å±‚é€»è¾‘ ä¹ã€ORM è®¾è®¡çš„æœ€ä½³å®è·µ âœ… æ¨èåšæ³•\nä¸ºæ¯ä¸ªæ¨¡å‹å®šä¹‰ __repr__ï¼Œä¾¿äºè°ƒè¯• åœ¨å¤–é”®åˆ—åŠ ç´¢å¼•ï¼ˆindex=Trueï¼‰ åœ¨ä¸€å¯¹ä¸€å¤–é”®ä¸ŠåŠ å”¯ä¸€çº¦æŸï¼ˆunique=Trueï¼‰ ä½¿ç”¨ back_populates ä¿æŒåŒå‘åŒæ­¥ ä½¿ç”¨ cascade=\u0026quot;all, delete-orphan\u0026quot; è‡ªåŠ¨çº§è”åˆ é™¤ ğŸš« ä¸è¦åšçš„äº‹\nä¸è¦åœ¨ API å±‚ç›´æ¥ä½¿ç”¨ Session ä¸è¦è®©æ¨¡å‹ç±»æ‰¿æ‹…ä¸šåŠ¡é€»è¾‘ ä¸è¦åœ¨æ¨¡å‹ç±»é‡Œå®šä¹‰å¤æ‚æŸ¥è¯¢æ–¹æ³•ï¼ˆæ”¾ Repository å±‚ï¼‰ ğŸ”š åã€æ€»ç»“ ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€æ•´å¥—å¯æ‰©å±•çš„ ORM ç®¡ç†ç»“æ„ï¼š\nğŸ“¦ your_project/ â”£â” models.py # ORM æ¨¡å‹å®šä¹‰ â”£â” repository.py # æ•°æ®è®¿é—®å±‚ â”£â” service.py # ä¸šåŠ¡èšåˆå±‚ â”£â” app.py # Flask / FastAPI è·¯ç”± â”—â” database.py # Engine + Session é…ç½® ä¼˜ç‚¹ï¼š\næ¡†æ¶æ— å…³ï¼ˆFlask / FastAPI å‡å¯ï¼‰ ORM ä¸ä¸šåŠ¡é€»è¾‘è§£è€¦ è¡¨å…³ç³»æ¸…æ™°ï¼Œä¸€å¯¹å¤š/ä¸€å¯¹ä¸€è‡ªç„¶å¯è¯» æ‰©å±•æ€§æå¼ºï¼ˆåŠ è¡¨æ— éœ€é‡æ„ï¼‰ ","permalink":"http://localhost:1313/jeanblog/posts/%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEorm%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE/","summary":"\u003ch1 id=\"-ä»é›¶åˆ°ç”Ÿäº§å¦‚ä½•ä¼˜é›…åœ°è®¾è®¡-orm-å±‚ç®¡ç†ä»¥-sqlalchemy-ä¸ºæ ¸å¿ƒ\"\u003eğŸ§± ä»é›¶åˆ°ç”Ÿäº§ï¼šå¦‚ä½•ä¼˜é›…åœ°è®¾è®¡ ORM å±‚ç®¡ç†ï¼ˆä»¥ SQLAlchemy ä¸ºæ ¸å¿ƒï¼‰\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæœ¬æ–‡å°†å¸¦ä½ ä»æ•°æ®åº“è¡¨ç»“æ„å‡ºå‘ï¼Œæ„å»ºä¸€å¥—é«˜å†…èšã€ä½è€¦åˆçš„ ORM å±‚æ¶æ„ã€‚\nç›®æ ‡ï¼šè®©ä½ çš„ Flask / FastAPI é¡¹ç›®åœ¨æ•°æ®è®¿é—®ä¸Šæ—¢ç®€æ´åˆç¨³å¥ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¸€ä¸ºä»€ä¹ˆè¦é‡è§†-orm-å±‚è®¾è®¡\"\u003eä¸€ã€ä¸ºä»€ä¹ˆè¦é‡è§† ORM å±‚è®¾è®¡ï¼Ÿ\u003c/h2\u003e\n\u003cp\u003eå¾ˆå¤šé¡¹ç›®åˆæœŸåªæ˜¯â€œå…ˆèƒ½è·‘â€ï¼Œç›´æ¥æŠŠ SQL å†™åœ¨æ§åˆ¶å™¨é‡Œï¼Œä½†å¾ˆå¿«å°±ä¼šå‡ºç°ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä¸šåŠ¡é€»è¾‘å’Œ SQL æ··åœ¨ä¸€èµ·ï¼›\u003c/li\u003e\n\u003cli\u003eè¡¨å…³ç³»å¤æ‚ï¼Œç»´æŠ¤å›°éš¾ï¼›\u003c/li\u003e\n\u003cli\u003eæƒ³å¤ç”¨æŸ¥è¯¢é€»è¾‘å¾ˆéº»çƒ¦ï¼›\u003c/li\u003e\n\u003cli\u003eè¿ç§»åˆ°åˆ«çš„æ¡†æ¶ï¼ˆFlask â†’ FastAPIï¼‰ä»£ä»·å¤§ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eORM å±‚ï¼ˆObject Relational Mappingï¼‰æ˜¯æ•°æ®åº“ä¸ä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ \u003cstrong\u003eæŠ½è±¡æ¡¥æ¢\u003c/strong\u003eï¼Œ\nä¸€ä¸ªå¥½çš„ ORM å±‚èƒ½è®©ä½ åªå…³å¿ƒå¯¹è±¡ï¼Œä¸ç”¨åå¤å†™ SQLã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"äºŒé¡¹ç›®åœºæ™¯æ‹›æ ‡ä¿¡æ¯æ•°æ®ç³»ç»Ÿ\"\u003eäºŒã€é¡¹ç›®åœºæ™¯ï¼šæ‹›æ ‡ä¿¡æ¯æ•°æ®ç³»ç»Ÿ\u003c/h2\u003e\n\u003cp\u003eæˆ‘ä»¬ä»¥ä¸€ä¸ªçœŸå®ä¸šåŠ¡ä¸ºä¾‹ï¼š\nçˆ¬å–å„ç½‘ç«™çš„æ‹›æ ‡å…¬å‘Šï¼Œä¿å­˜ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œå¹¶ç”Ÿæˆç»Ÿè®¡çœ‹æ¿ã€‚\u003c/p\u003e\n\u003ch3 id=\"ç›®æ ‡æ•°æ®åº“å®ä½“\"\u003eç›®æ ‡æ•°æ®åº“å®ä½“\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eè¡¨å\u003c/th\u003e\n          \u003cth\u003eåŠŸèƒ½\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etender_info\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå…¬å‘ŠåŸºæœ¬ä¿¡æ¯\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etender_attachments\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå…¬å‘ŠåŠå˜æ›´æ–‡ä»¶\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etender_organization\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ‹›æ ‡æœºæ„ä¸è”ç³»æ–¹å¼\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003etender_statistics\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¯æ—¥/æœˆ/å¹´ç»Ÿè®¡ä¿¡æ¯\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¸‰orm-å±‚è®¾è®¡æ€è·¯\"\u003eä¸‰ã€ORM å±‚è®¾è®¡æ€è·¯\u003c/h2\u003e\n\u003ch3 id=\"-åˆ†å±‚åŸåˆ™\"\u003eğŸ§© åˆ†å±‚åŸåˆ™\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå±‚çº§\u003c/th\u003e\n          \u003cth\u003eä½œç”¨\u003c/th\u003e\n          \u003cth\u003eä»£ç ä½ç½®\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eModel å±‚\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eORM æ¨¡å‹å®šä¹‰ï¼Œå¯¹åº”æ•°æ®åº“è¡¨ç»“æ„\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003emodels.py\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eRepository å±‚\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eå°è£… CRUD é€»è¾‘ï¼ˆæ•°æ®åº“æ“ä½œï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003erepository.py\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eService å±‚\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eä¸šåŠ¡é€»è¾‘å±‚ï¼ˆèšåˆå¤šä¸ªä»“åº“é€»è¾‘ï¼‰\u003c/td\u003e\n          \u003ctd\u003e\u003ccode\u003eservice.py\u003c/code\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003cstrong\u003eAPI å±‚\u003c/strong\u003e\u003c/td\u003e\n          \u003ctd\u003eæ§åˆ¶å™¨/è·¯ç”±æ¥å£\u003c/td\u003e\n          \u003ctd\u003eFlask/FastAPI è§†å›¾æ–‡ä»¶\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eè¿™ç§åˆ†å±‚è®©ä½ åšåˆ°ï¼š\u003c/p\u003e","title":"å¦‚ä½•é…ç½®ormç®¡ç†æ•°æ®"},{"content":"ğŸ“ Windows + WSL2 ç«¯å£è½¬å‘æ•™ç¨‹ï¼ˆè®¿é—® Flask 5000ï¼‰ å‰ææ¡ä»¶ ä½ æ­£åœ¨ä½¿ç”¨ WSL2ï¼ˆUbuntu æˆ–å…¶ä»– Linux å‘è¡Œç‰ˆï¼‰ Windows ä¸»æœºèƒ½è®¿é—®å±€åŸŸç½‘ï¼ˆWi-Fi æˆ–ä»¥å¤ªç½‘ï¼‰ Flask æœåŠ¡åœ¨ WSL2 ä¸­è¿è¡Œï¼Œå¹¶ç›‘å¬ï¼š app.run(host=\u0026#34;0.0.0.0\u0026#34;, port=5000) âš ï¸ host=\u0026quot;0.0.0.0\u0026quot; å¿…é¡»ï¼Œå¦åˆ™å¤–éƒ¨æ— æ³•è®¿é—®\nç¬¬ 1 æ­¥ï¼šç¡®è®¤ WSL2 çš„ IP åœ¨ WSL2 ä¸­è¿è¡Œï¼š\nip addr show eth0 ä½ ä¼šçœ‹åˆ°ç±»ä¼¼ï¼š\ninet 172.26.209.37/20 è®°ä¸‹ inet åé¢çš„ IPï¼ˆæœ¬ä¾‹æ˜¯ 172.26.209.37ï¼‰ï¼Œè¿™æ˜¯ WSL2 å†…éƒ¨ IPã€‚\nç¬¬ 2 æ­¥ï¼šæ‰“å¼€ PowerShellï¼ˆç®¡ç†å‘˜æ¨¡å¼ï¼‰ æŒ‰ Win + X â†’ é€‰æ‹© Windows PowerShell (ç®¡ç†å‘˜) ç¡®è®¤ç®¡ç†å‘˜æƒé™ï¼Œå¿…è¦æ—¶å…è®¸ UAC æç¤º ç¬¬ 3 æ­¥ï¼šè®¾ç½®ç«¯å£è½¬å‘ åœ¨ PowerShell ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† Windows çš„ 5000 ç«¯å£è½¬å‘åˆ° WSL2ï¼š\n# å°† Windows 5000 ç«¯å£è½¬å‘åˆ° WSL2 çš„ 5000 netsh interface portproxy add v4tov4 listenport=5000 listenaddress=0.0.0.0 connectport=5000 connectaddress=172.26.209.37 # å¼€æ”¾é˜²ç«å¢™ï¼Œè®©å±€åŸŸç½‘å¯ä»¥è®¿é—® netsh advfirewall firewall add rule name=\u0026#34;WSL Flask 5000\u0026#34; dir=in action=allow protocol=TCP localport=5000 listenaddress=0.0.0.0 è¡¨ç¤ºç›‘å¬ Windows æ‰€æœ‰ç½‘å¡ï¼ˆå±€åŸŸç½‘å¯è®¿é—®ï¼‰ connectaddress=172.26.209.37 æ˜¯ WSL2 å†…éƒ¨ IP é˜²ç«å¢™è§„åˆ™å…è®¸å¤–éƒ¨è®¾å¤‡è®¿é—® Windows 5000 ç«¯å£ ç¬¬ 4 æ­¥ï¼šæµ‹è¯•ç«¯å£è½¬å‘ åœ¨ Windows æœ¬æœºæµè§ˆå™¨æˆ– curl æµ‹è¯•ï¼š curl http://localhost:5000 # æˆ–è€… curl http://192.168.1.227:5000 åœ¨å±€åŸŸç½‘è®¾å¤‡ä¸Šè®¿é—®ï¼š http://\u0026lt;Windowså±€åŸŸç½‘IP\u0026gt;:5000 ç¤ºä¾‹ï¼šhttp://192.168.1.227:5000\nç¬¬ 5 æ­¥ï¼ˆå¯é€‰ï¼‰ï¼šè‡ªåŠ¨æ›´æ–°è„šæœ¬ WSL2 IP æ¯æ¬¡é‡å¯å¯èƒ½å˜åŒ–ï¼Œä¸ºäº†è‡ªåŠ¨æ›´æ–°è½¬å‘è§„åˆ™ï¼Œå¯åˆ›å»º PowerShell è„šæœ¬ wsl_port_forward.ps1ï¼š\n# è·å–å½“å‰ WSL IP $wsl_ip = wsl hostname -I | ForEach-Object { $_.Split(\u0026#34; \u0026#34;)[0] } Write-Host \u0026#34;Detected WSL IP: $wsl_ip\u0026#34; # åˆ é™¤æ—§è§„åˆ™ netsh interface portproxy delete v4tov4 listenport=5000 listenaddress=0.0.0.0 # æ·»åŠ æ–°è§„åˆ™ netsh interface portproxy add v4tov4 listenport=5000 listenaddress=0.0.0.0 connectport=5000 connectaddress=$wsl_ip # æ”¾è¡Œé˜²ç«å¢™ netsh advfirewall firewall add rule name=\u0026#34;WSL Flask 5000\u0026#34; dir=in action=allow protocol=TCP localport=5000 ä¿å­˜è„šæœ¬ï¼Œæ¯æ¬¡ WSL å¯åŠ¨å‰æ‰§è¡Œå³å¯ è‡ªåŠ¨æ£€æµ‹å½“å‰ WSL IPï¼Œæ›´æ–°ç«¯å£è½¬å‘è§„åˆ™ ç¬¬ 6 æ­¥ï¼šæ³¨æ„äº‹é¡¹ Flask å¿…é¡»ç›‘å¬ 0.0.0.0ï¼Œå¦åˆ™åªèƒ½æœ¬æœºè®¿é—®\nç¡®ä¿ Windows é˜²ç«å¢™å…è®¸ TCP 5000 ç«¯å£\nå¦‚æœå±€åŸŸç½‘è®¾å¤‡ä»æ— æ³•è®¿é—®ï¼š\næ£€æŸ¥è·¯ç”±å™¨æ˜¯å¦é˜»æ­¢å±€åŸŸç½‘å†…ç«¯å£è®¿é—® æ£€æŸ¥ Windows é˜²ç«å¢™æ˜¯å¦ç”Ÿæ•ˆ WSL2 NAT æ¨¡å¼ä¸‹ï¼Œå±€åŸŸç½‘ä¸èƒ½ç›´æ¥è®¿é—® WSL å†…éƒ¨ IPï¼Œåªèƒ½é€šè¿‡ Windows IP + è½¬å‘ç«¯å£è®¿é—®\nâœ… æ€»ç»“ WSL2 é»˜è®¤ç½‘ç»œéš”ç¦»ï¼Œå±€åŸŸç½‘æ— æ³•ç›´æ¥è®¿é—® é€šè¿‡ Windows ç«¯å£è½¬å‘ + é˜²ç«å¢™æ”¾è¡Œï¼Œå±€åŸŸç½‘è®¾å¤‡å¯ä»¥è®¿é—® WSL2 ä¸­çš„ Flask æœåŠ¡ è‡ªåŠ¨åŒ–è„šæœ¬å¯ä»¥è§£å†³ WSL2 é‡å¯å IP å˜åŒ–çš„é—®é¢˜ ","permalink":"http://localhost:1313/jeanblog/posts/wsl%E8%A7%A3%E5%86%B3%E5%86%85%E7%BD%91%E5%92%8Cwindows%E4%B8%8D%E5%85%B1%E4%BA%AB/","summary":"\u003ch1 id=\"-windows--wsl2-ç«¯å£è½¬å‘æ•™ç¨‹è®¿é—®-flask-5000\"\u003eğŸ“ Windows + WSL2 ç«¯å£è½¬å‘æ•™ç¨‹ï¼ˆè®¿é—® Flask 5000ï¼‰\u003c/h1\u003e\n\u003ch2 id=\"å‰ææ¡ä»¶\"\u003eå‰ææ¡ä»¶\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eä½ æ­£åœ¨ä½¿ç”¨ \u003cstrong\u003eWSL2\u003c/strong\u003eï¼ˆUbuntu æˆ–å…¶ä»– Linux å‘è¡Œç‰ˆï¼‰\u003c/li\u003e\n\u003cli\u003eWindows ä¸»æœºèƒ½è®¿é—®å±€åŸŸç½‘ï¼ˆWi-Fi æˆ–ä»¥å¤ªç½‘ï¼‰\u003c/li\u003e\n\u003cli\u003eFlask æœåŠ¡åœ¨ WSL2 ä¸­è¿è¡Œï¼Œå¹¶ç›‘å¬ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eapp\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erun(host\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0.0.0.0\u0026#34;\u003c/span\u003e, port\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e5000\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eâš ï¸ \u003ccode\u003ehost=\u0026quot;0.0.0.0\u0026quot;\u003c/code\u003e å¿…é¡»ï¼Œå¦åˆ™å¤–éƒ¨æ— æ³•è®¿é—®\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"ç¬¬-1-æ­¥ç¡®è®¤-wsl2-çš„-ip\"\u003eç¬¬ 1 æ­¥ï¼šç¡®è®¤ WSL2 çš„ IP\u003c/h2\u003e\n\u003cp\u003eåœ¨ WSL2 ä¸­è¿è¡Œï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eip addr show eth0\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä½ ä¼šçœ‹åˆ°ç±»ä¼¼ï¼š\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003einet 172.26.209.37/20\n\u003c/code\u003e\u003c/pre\u003e\u003cblockquote\u003e\n\u003cp\u003eè®°ä¸‹ \u003ccode\u003einet\u003c/code\u003e åé¢çš„ IPï¼ˆæœ¬ä¾‹æ˜¯ \u003ccode\u003e172.26.209.37\u003c/code\u003eï¼‰ï¼Œè¿™æ˜¯ WSL2 å†…éƒ¨ IPã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"ç¬¬-2-æ­¥æ‰“å¼€-powershellç®¡ç†å‘˜æ¨¡å¼\"\u003eç¬¬ 2 æ­¥ï¼šæ‰“å¼€ PowerShellï¼ˆç®¡ç†å‘˜æ¨¡å¼ï¼‰\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eæŒ‰ \u003ccode\u003eWin + X\u003c/code\u003e â†’ é€‰æ‹© \u003cstrong\u003eWindows PowerShell (ç®¡ç†å‘˜)\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eç¡®è®¤ç®¡ç†å‘˜æƒé™ï¼Œå¿…è¦æ—¶å…è®¸ UAC æç¤º\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr\u003e\n\u003ch2 id=\"ç¬¬-3-æ­¥è®¾ç½®ç«¯å£è½¬å‘\"\u003eç¬¬ 3 æ­¥ï¼šè®¾ç½®ç«¯å£è½¬å‘\u003c/h2\u003e\n\u003cp\u003eåœ¨ PowerShell ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† Windows çš„ 5000 ç«¯å£è½¬å‘åˆ° WSL2ï¼š\u003c/p\u003e","title":"WSLè§£å†³å†…ç½‘å’Œwindowsä¸å…±äº«"},{"content":"ğŸš€ ä½¿ç”¨ wrk å¯¹æ¥å£è¿›è¡Œé«˜æ€§èƒ½å‹åŠ›æµ‹è¯•ï¼ˆè¶…è¯¦ç»†æ•™ç¨‹ï¼‰ æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Ubuntu ç¯å¢ƒä¸­ä½¿ç”¨ wrk å¯¹åç«¯æ¥å£ï¼ˆå¦‚ Flask / FastAPI / Spring Boot ç­‰ï¼‰è¿›è¡Œé«˜å¹¶å‘å‹åŠ›æµ‹è¯•ï¼Œå¹¶ç»“åˆç»“æœåˆ†ææ€§èƒ½ç“¶é¢ˆã€‚\nğŸ§° ä¸€ã€ä»€ä¹ˆæ˜¯ wrkï¼Ÿ wrk æ˜¯ä¸€ä¸ªç°ä»£åŒ–ã€é«˜æ€§èƒ½çš„ HTTP å‹æµ‹å·¥å…·ï¼Œç”± C è¯­è¨€ç¼–å†™ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\né«˜å¹¶å‘èƒ½åŠ›å¼ºï¼šæ”¯æŒæˆåƒä¸Šä¸‡çš„å¹¶å‘è¿æ¥ æ”¯æŒå¤šçº¿ç¨‹ï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU å¯è‡ªå®šä¹‰ Lua è„šæœ¬ï¼šé€‚åˆå¤æ‚åœºæ™¯ï¼ˆå¦‚è‡ªå®šä¹‰è¯·æ±‚å¤´ã€Bodyã€Token ç­‰ï¼‰ æ¯” Apache Benchmark (ab) æ›´è½»é‡ã€æ›´å¿«ã€æ›´ç¨³å®š âš™ï¸ äºŒã€å®‰è£… wrk åœ¨ Ubuntu / Debian ä¸Šå®‰è£…ï¼š\nsudo apt update sudo apt install wrk -y éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š\nwrk --version è¾“å‡ºç±»ä¼¼ï¼š\nwrk 4.2.0 [epoll] è¡¨ç¤ºå®‰è£…æˆåŠŸ âœ…\nğŸ§ª ä¸‰ã€å¿«é€Ÿå¼€å§‹å‹æµ‹ å‡è®¾ä½ çš„æœåŠ¡è¿è¡Œåœ¨ï¼š\nhttp://192.168.1.224:5000/api/tenders è¿è¡Œï¼š\nwrk -t4 -c100 -d30s http://192.168.1.224:5000/api/tenders å‚æ•°è¯´æ˜ï¼š å‚æ•° å«ä¹‰ -t4 å¯åŠ¨ 4 ä¸ªçº¿ç¨‹ï¼ˆåˆ©ç”¨å¤šæ ¸ CPUï¼‰ -c100 æ¨¡æ‹Ÿ 100 ä¸ªå¹¶å‘è¿æ¥ -d30s æŒç»­å‹æµ‹ 30 ç§’ æœ€åä¸€ä¸ªå‚æ•° ç›®æ ‡ URL ğŸ“Š å››ã€ç¤ºä¾‹è¾“å‡ºç»“æœè§£è¯» å‡è®¾è¾“å‡ºå¦‚ä¸‹ï¼š\nRunning 30s test @ http://192.168.1.224:5000/api/tenders 4 threads and 100 connections Thread Stats Avg Stdev Max +/- Stdev Latency 1.12s 248.83ms 1.99s 85.59% Req/Sec 22.88 14.29 90.00 77.73% 2452 requests in 30.09s, 27.02MB read Socket errors: connect 0, read 0, write 0, timeout 2 Requests/sec: 81.49 Transfer/sec: 0.90MB ç»“æœåˆ†æï¼š æŒ‡æ ‡ å«ä¹‰ ç¤ºä¾‹å€¼ è¯´æ˜ Latency æ¯ä¸ªè¯·æ±‚å¹³å‡å“åº”æ—¶é—´ 1.12s å“åº”è¾ƒæ…¢ï¼ˆ\u0026gt;1sï¼‰ Req/Sec æ¯ä¸ªçº¿ç¨‹æ¯ç§’è¯·æ±‚æ•° 22.88 ä¸çº¿ç¨‹æ•°æœ‰å…³ Requests/sec æ•´ä½“ QPSï¼ˆæ¯ç§’å¤„ç†è¯·æ±‚æ•°ï¼‰ 81.49 è¡¨ç¤ºæœåŠ¡ååé‡ Transfer/sec æ¯ç§’ä¼ è¾“æ•°æ®é‡ 0.90MB ç½‘ç»œå¸¦å®½å ç”¨æƒ…å†µ Timeouts è¶…æ—¶è¯·æ±‚æ•° 2 ç¨æœ‰è¯·æ±‚å»¶è¿Ÿè¿‡é•¿ ğŸ” ä¸€èˆ¬æƒ…å†µä¸‹ï¼š\nä¼˜ç§€æ¥å£ï¼šå»¶è¿Ÿ \u0026lt; 200ms ä¸­ç­‰æ¥å£ï¼š200â€“800ms è¿‡æ…¢æ¥å£ï¼š\u0026gt;1s âš¡ äº”ã€æé«˜å¹¶å‘æ€§èƒ½çš„å®ç”¨æŠ€å·§ âœ… 1. ä½¿ç”¨ç”Ÿäº§çº§æœåŠ¡å™¨ï¼ˆFlask ç¤ºä¾‹ï¼‰ ä¸è¦ç”¨ Flask çš„ app.run()ã€‚ æ”¹ç”¨ Gunicorn å¯åŠ¨ï¼š\npip install gunicorn gunicorn -w 4 -b 0.0.0.0:5000 run:app -w 4ï¼š4 ä¸ª worker è¿›ç¨‹ï¼ˆæ¨èï¼š2 * CPUæ ¸æ•° + 1ï¼‰ èƒ½æ˜¾è‘—æå‡å¹¶å‘èƒ½åŠ›ä¸ç¨³å®šæ€§ âœ… 2. å¢åŠ å¼‚æ­¥å¤„ç†èƒ½åŠ›ï¼ˆé€‚åˆ I/O å¯†é›†å‹æ¥å£ï¼‰ gunicorn -w 4 -k gevent -b 0.0.0.0:5000 run:app -k gevent ä½¿ç”¨å¼‚æ­¥ worker æ¨¡å‹ï¼Œå¯åŒæ—¶å¤„ç†å¤§é‡ç­‰å¾…ä¸­çš„è¯·æ±‚ã€‚\nâœ… 3. å‡å°‘å“åº”ä½“å¤§å° å‹æµ‹æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚çš„å“åº”ä½“è¶Šå¤§ï¼Œç½‘ç»œååè¶Šå—é™ã€‚ å»ºè®®ï¼š\nåªè¿”å›å¿…è¦å­—æ®µ å¯ç”¨ Gzip å‹ç¼©ï¼ˆNginx æˆ– Flask æ’ä»¶ï¼‰ ğŸ“ˆ å…­ã€é«˜çº§ç”¨æ³•ï¼šLua è„šæœ¬è‡ªå®šä¹‰è¯·æ±‚ ä½ å¯ä»¥ç”¨ Lua è„šæœ¬å®ç°ï¼š\nè‡ªå®šä¹‰è¯·æ±‚å¤´ / Token POST JSON è¯·æ±‚ å‚æ•°éšæœºåŒ– ç¤ºä¾‹ post.luaï¼š\nwrk.method = \u0026#34;POST\u0026#34; wrk.body = \u0026#39;{\u0026#34;keyword\u0026#34;:\u0026#34;test\u0026#34;}\u0026#39; wrk.headers[\u0026#34;Content-Type\u0026#34;] = \u0026#34;application/json\u0026#34; è¿è¡Œï¼š\nwrk -t4 -c100 -d30s -s post.lua http://127.0.0.1:5000/api/search ","permalink":"http://localhost:1313/jeanblog/posts/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8wrk%E8%BF%9B%E8%A1%8C%E5%8E%8B%E6%B5%8B/","summary":"\u003ch1 id=\"-ä½¿ç”¨-wrk-å¯¹æ¥å£è¿›è¡Œé«˜æ€§èƒ½å‹åŠ›æµ‹è¯•è¶…è¯¦ç»†æ•™ç¨‹\"\u003eğŸš€ ä½¿ç”¨ wrk å¯¹æ¥å£è¿›è¡Œé«˜æ€§èƒ½å‹åŠ›æµ‹è¯•ï¼ˆè¶…è¯¦ç»†æ•™ç¨‹ï¼‰\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Ubuntu ç¯å¢ƒä¸­ä½¿ç”¨ \u003ccode\u003ewrk\u003c/code\u003e å¯¹åç«¯æ¥å£ï¼ˆå¦‚ Flask / FastAPI / Spring Boot ç­‰ï¼‰è¿›è¡Œé«˜å¹¶å‘å‹åŠ›æµ‹è¯•ï¼Œå¹¶ç»“åˆç»“æœåˆ†ææ€§èƒ½ç“¶é¢ˆã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ä¸€ä»€ä¹ˆæ˜¯-wrk\"\u003eğŸ§° ä¸€ã€ä»€ä¹ˆæ˜¯ wrkï¼Ÿ\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/wg/wrk\"\u003e\u003ccode\u003ewrk\u003c/code\u003e\u003c/a\u003e æ˜¯ä¸€ä¸ªç°ä»£åŒ–ã€é«˜æ€§èƒ½çš„ HTTP å‹æµ‹å·¥å…·ï¼Œç”± C è¯­è¨€ç¼–å†™ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eé«˜å¹¶å‘èƒ½åŠ›å¼º\u003c/strong\u003eï¼šæ”¯æŒæˆåƒä¸Šä¸‡çš„å¹¶å‘è¿æ¥\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ”¯æŒå¤šçº¿ç¨‹\u003c/strong\u003eï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå¯è‡ªå®šä¹‰ Lua è„šæœ¬\u003c/strong\u003eï¼šé€‚åˆå¤æ‚åœºæ™¯ï¼ˆå¦‚è‡ªå®šä¹‰è¯·æ±‚å¤´ã€Bodyã€Token ç­‰ï¼‰\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæ¯” Apache Benchmark (ab)\u003c/strong\u003e æ›´è½»é‡ã€æ›´å¿«ã€æ›´ç¨³å®š\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"-äºŒå®‰è£…-wrk\"\u003eâš™ï¸ äºŒã€å®‰è£… wrk\u003c/h2\u003e\n\u003cp\u003eåœ¨ Ubuntu / Debian ä¸Šå®‰è£…ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt update\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt install wrk -y\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eéªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewrk --version\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¾“å‡ºç±»ä¼¼ï¼š\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ewrk 4.2.0 [epoll]\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eè¡¨ç¤ºå®‰è£…æˆåŠŸ âœ…\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-ä¸‰å¿«é€Ÿå¼€å§‹å‹æµ‹\"\u003eğŸ§ª ä¸‰ã€å¿«é€Ÿå¼€å§‹å‹æµ‹\u003c/h2\u003e\n\u003cp\u003eå‡è®¾ä½ çš„æœåŠ¡è¿è¡Œåœ¨ï¼š\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ehttp://192.168.1.224:5000/api/tenders\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eè¿è¡Œï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewrk -t4 -c100 -d30s http://192.168.1.224:5000/api/tenders\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"å‚æ•°è¯´æ˜\"\u003eå‚æ•°è¯´æ˜ï¼š\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eå‚æ•°\u003c/th\u003e\n          \u003cth\u003eå«ä¹‰\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-t4\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eå¯åŠ¨ 4 ä¸ªçº¿ç¨‹ï¼ˆåˆ©ç”¨å¤šæ ¸ CPUï¼‰\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-c100\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæ¨¡æ‹Ÿ 100 ä¸ªå¹¶å‘è¿æ¥\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e-d30s\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eæŒç»­å‹æµ‹ 30 ç§’\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæœ€åä¸€ä¸ªå‚æ•°\u003c/td\u003e\n          \u003ctd\u003eç›®æ ‡ URL\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2 id=\"-å››ç¤ºä¾‹è¾“å‡ºç»“æœè§£è¯»\"\u003eğŸ“Š å››ã€ç¤ºä¾‹è¾“å‡ºç»“æœè§£è¯»\u003c/h2\u003e\n\u003cp\u003eå‡è®¾è¾“å‡ºå¦‚ä¸‹ï¼š\u003c/p\u003e","title":"å¦‚ä½•ä½¿ç”¨wrkè¿›è¡Œå‹æµ‹"},{"content":"åœ¨å±€åŸŸç½‘è®¿é—® Windows WSL2 ä¸Šçš„ Git Bare ä»“åº“ åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨å¤šå°ç”µè„‘ä¹‹é—´å…±äº« Git ä»“åº“ã€‚å¦‚æœä½ åœ¨ Windows ä¸Šä½¿ç”¨ WSL2ï¼Œå¹¶ä¸”æƒ³åœ¨åŒä¸€å±€åŸŸç½‘çš„å…¶ä»–ç”µè„‘è®¿é—® WSL2 ä¸Šçš„ Git bare ä»“åº“ï¼Œæœ¬æ–‡å°†ä¸€æ­¥æ­¥æ•™ä½ å®ç°ã€‚\n1. åœ¨ WSL2 åˆ›å»º Git Bare ä»“åº“ æ‰“å¼€ WSL2 ç»ˆç«¯ï¼Œè¿›å…¥ä½ æƒ³å­˜æ”¾ä»“åº“çš„ç›®å½•ï¼Œæ‰§è¡Œï¼š\ngit init --bare my_project.git my_project.git æ˜¯ bare ä»“åº“ï¼Œä¸å«å·¥ä½œåŒºï¼Œä»…ç”¨äºæ¨é€å’Œæ‹‰å–ã€‚ bare ä»“åº“å°±åƒè¿œç¨‹ä»“åº“ä¸€æ ·ï¼Œå¯ä»¥è¢«å…‹éš†å’Œæ“ä½œã€‚ 2. é…ç½® WSL2 çš„ SSH æœåŠ¡ ä¸ºäº†è®©å…¶ä»–ç”µè„‘è®¿é—®ä»“åº“ï¼Œéœ€è¦é€šè¿‡ SSH è®¿é—® WSL2ã€‚\nå®‰è£… SSH æœåŠ¡ï¼š sudo apt update sudo apt install openssh-server -y å¯åŠ¨ SSH æœåŠ¡ï¼š sudo service ssh start æ£€æŸ¥ SSH æœåŠ¡çŠ¶æ€ï¼š sudo service ssh status é»˜è®¤ç«¯å£æ˜¯ 22ï¼Œå¯ä»¥åœ¨ /etc/ssh/sshd_config ä¿®æ”¹ã€‚ 3. è·å– WSL2 IP åœ°å€ åœ¨ WSL2 ç»ˆç«¯è¿è¡Œï¼š\nip addr æ‰¾åˆ° eth0 ä¸‹çš„ inet åœ°å€ï¼Œä¾‹å¦‚ï¼š\ninet 172.25.190.21/20 æ³¨æ„ï¼šWSL2 IP æ¯æ¬¡é‡å¯å¯èƒ½å˜åŒ–ã€‚\n4. é…ç½® Windows é˜²ç«å¢™ ä¸ºäº†è®©å±€åŸŸç½‘ç”µè„‘è®¿é—®ï¼Œéœ€è¦å…è®¸ SSH ç«¯å£é€šè¿‡é˜²ç«å¢™ã€‚\næ‰“å¼€ Windows é˜²ç«å¢™ â†’ é«˜çº§è®¾ç½® â†’ å…¥ç«™è§„åˆ™ â†’ æ–°å»ºè§„åˆ™ è§„åˆ™ç±»å‹é€‰æ‹© ç«¯å£ â†’ TCP â†’ æŒ‡å®šç«¯å£ï¼ˆ22 æˆ–è‡ªå®šä¹‰ç«¯å£å¦‚ 2222ï¼‰ å…è®¸è¿æ¥ â†’ åº”ç”¨åˆ° åŸŸ/ä¸“ç”¨/å…¬ç”¨ ç»™è§„åˆ™å‘½å â†’ å®Œæˆ 5. æ¨èï¼šä½¿ç”¨ç«¯å£è½¬å‘è§£å†³ WSL2 IP å˜åŒ–é—®é¢˜ å› ä¸º WSL2 IP ä¼šå˜ï¼Œæ¨èä½¿ç”¨ Windows ç«¯å£è½¬å‘ï¼š\næ‰“å¼€ PowerShellï¼ˆç®¡ç†å‘˜ï¼‰ï¼Œæ‰§è¡Œï¼š netsh interface portproxy add v4tov4 listenport=2222 listenaddress=0.0.0.0 connectport=22 connectaddress=\u0026lt;WSL_IP\u0026gt; ç„¶åä»å±€åŸŸç½‘å…¶ä»–ç”µè„‘é€šè¿‡ Windows IP + 2222 è®¿é—® WSL2ï¼š git clone ssh://user@WINDOWS_IP:2222/home/user/my_project.git user æ˜¯ WSL2 ç”¨æˆ·å WINDOWS_IP æ˜¯ Windows ä¸»æœºåœ¨å±€åŸŸç½‘çš„ IP 6. ä»å…¶ä»–ç”µè„‘å…‹éš†ã€æ¨é€å’Œæ‹‰å– å…‹éš†ä»“åº“ï¼š\ngit clone ssh://user@WINDOWS_IP:2222/home/user/my_project.git æäº¤ä¿®æ”¹ï¼š\ngit add . git commit -m \u0026#34;ä¿®æ”¹è¯´æ˜\u0026#34; git push origin main # æˆ– master æ‹‰å–æ›´æ–°ï¼š\ngit pull origin main 7. æ€»ç»“ WSL2 è‡ªèº«æœ‰è™šæ‹Ÿç½‘ç»œï¼ŒIP æ¯æ¬¡å¯åŠ¨å¯èƒ½å˜åŒ–ã€‚ ä½¿ç”¨ ç«¯å£è½¬å‘ + é˜²ç«å¢™æ”¾è¡Œ æ˜¯æœ€ç¨³å¦¥çš„æ–¹å¼ã€‚ bare ä»“åº“åœ¨ WSL2 å†…éƒ¨åˆ›å»ºï¼Œå…¶ä»–ç”µè„‘å°±åƒè®¿é—®è¿œç¨‹ä»“åº“ä¸€æ ·æ“ä½œã€‚ é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œä½ å°±å¯ä»¥åœ¨å±€åŸŸç½‘å†…å¤šå°ç”µè„‘è®¿é—® WSL2 ä¸Šçš„ Git ä»“åº“ï¼Œè½»æ¾å®ç°ä»£ç å…±äº«å’Œåä½œã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%B1%80%E5%9F%9F%E7%BD%91git-bare/","summary":"\u003ch1 id=\"åœ¨å±€åŸŸç½‘è®¿é—®-windows-wsl2-ä¸Šçš„-git-bare-ä»“åº“\"\u003eåœ¨å±€åŸŸç½‘è®¿é—® Windows WSL2 ä¸Šçš„ Git Bare ä»“åº“\u003c/h1\u003e\n\u003cp\u003eåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨å¤šå°ç”µè„‘ä¹‹é—´å…±äº« Git ä»“åº“ã€‚å¦‚æœä½ åœ¨ Windows ä¸Šä½¿ç”¨ WSL2ï¼Œå¹¶ä¸”æƒ³åœ¨åŒä¸€å±€åŸŸç½‘çš„å…¶ä»–ç”µè„‘è®¿é—® WSL2 ä¸Šçš„ Git bare ä»“åº“ï¼Œæœ¬æ–‡å°†ä¸€æ­¥æ­¥æ•™ä½ å®ç°ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"1-åœ¨-wsl2-åˆ›å»º-git-bare-ä»“åº“\"\u003e1. åœ¨ WSL2 åˆ›å»º Git Bare ä»“åº“\u003c/h2\u003e\n\u003cp\u003eæ‰“å¼€ WSL2 ç»ˆç«¯ï¼Œè¿›å…¥ä½ æƒ³å­˜æ”¾ä»“åº“çš„ç›®å½•ï¼Œæ‰§è¡Œï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit init --bare my_project.git\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003emy_project.git\u003c/code\u003e æ˜¯ bare ä»“åº“ï¼Œä¸å«å·¥ä½œåŒºï¼Œä»…ç”¨äºæ¨é€å’Œæ‹‰å–ã€‚\u003c/li\u003e\n\u003cli\u003ebare ä»“åº“å°±åƒè¿œç¨‹ä»“åº“ä¸€æ ·ï¼Œå¯ä»¥è¢«å…‹éš†å’Œæ“ä½œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"2-é…ç½®-wsl2-çš„-ssh-æœåŠ¡\"\u003e2. é…ç½® WSL2 çš„ SSH æœåŠ¡\u003c/h2\u003e\n\u003cp\u003eä¸ºäº†è®©å…¶ä»–ç”µè„‘è®¿é—®ä»“åº“ï¼Œéœ€è¦é€šè¿‡ SSH è®¿é—® WSL2ã€‚\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eå®‰è£… SSH æœåŠ¡ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt update\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt install openssh-server -y\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"2\"\u003e\n\u003cli\u003eå¯åŠ¨ SSH æœåŠ¡ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo service ssh start\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"3\"\u003e\n\u003cli\u003eæ£€æŸ¥ SSH æœåŠ¡çŠ¶æ€ï¼š\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo service ssh status\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"4\"\u003e\n\u003cli\u003eé»˜è®¤ç«¯å£æ˜¯ 22ï¼Œå¯ä»¥åœ¨ \u003ccode\u003e/etc/ssh/sshd_config\u003c/code\u003e ä¿®æ”¹ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr\u003e\n\u003ch2 id=\"3-è·å–-wsl2-ip-åœ°å€\"\u003e3. è·å– WSL2 IP åœ°å€\u003c/h2\u003e\n\u003cp\u003eåœ¨ WSL2 ç»ˆç«¯è¿è¡Œï¼š\u003c/p\u003e","title":"å±€åŸŸç½‘Git Bare"},{"content":"ğŸŒ¿ ç®€åŒ– Git åˆ†æ”¯å·¥ä½œæµï¼ˆä¸ªäºº / å°å›¢é˜Ÿï¼‰ æœ¬å·¥ä½œæµåŸºäº Git Flow ç²¾ç®€è€Œæ¥ï¼Œé€‚åˆä¸ªäººæˆ–å°å›¢é˜Ÿï¼Œæ—¢è§„èŒƒåˆä¸å¤æ‚ã€‚\nğŸš€ 1. ä¸»åˆ†æ”¯ï¼ˆé•¿æœŸåˆ†æ”¯ï¼‰ main æ°¸è¿œä¿æŒç¨³å®šã€å¯å‘å¸ƒçš„çŠ¶æ€ã€‚ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„ä»£ç éƒ½æ¥è‡ªè¿™é‡Œã€‚ å¯¹äºå°å›¢é˜Ÿï¼Œé€šå¸¸åªéœ€è¦ mainï¼Œä¸éœ€è¦ç»´æŠ¤ developã€‚\nğŸ› ï¸ 2. åŠŸèƒ½å¼€å‘ï¼ˆFeature Branchï¼‰ åˆ†æ”¯å‘½åï¼šfeature/\u0026lt;åŠŸèƒ½å\u0026gt; ç”¨é€”ï¼šå¼€å‘æ–°åŠŸèƒ½ï¼Œå®Œæˆååˆå¹¶å› mainã€‚ ç¤ºä¾‹ï¼š\nfeature/login-api feature/user-profile æµç¨‹ï¼š\n# ä» main åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ git checkout -b feature/login-api main # å¼€å‘å®Œæˆåï¼Œåˆå¹¶åˆ° main git checkout main git merge feature/login-api git branch -d feature/login-api ğŸ 3. Bug ä¿®å¤ï¼ˆBugfix Branchï¼‰ åˆ†æ”¯å‘½åï¼šbugfix/\u0026lt;é—®é¢˜å\u0026gt; ç”¨é€”ï¼šä¿®å¤æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒçš„ bugã€‚ ç¤ºä¾‹ï¼š\nbugfix/fix-login-redirect æµç¨‹åŒ feature åˆ†æ”¯ï¼Œå®Œæˆååˆå¹¶å› mainã€‚\nğŸ”¥ 4. ç´§æ€¥ä¿®å¤ï¼ˆHotfix Branchï¼‰ åˆ†æ”¯å‘½åï¼šhotfix/\u0026lt;é—®é¢˜å\u0026gt; ç”¨é€”ï¼šç”Ÿäº§ç¯å¢ƒå‡ºç°ä¸¥é‡é—®é¢˜æ—¶çš„å¿«é€Ÿä¿®å¤ã€‚ ç¤ºä¾‹ï¼š\nhotfix/security-patch æµç¨‹ï¼š\ngit checkout -b hotfix/security-patch main # ä¿®å¤é—®é¢˜ï¼Œæäº¤ git checkout main git merge hotfix/security-patch git branch -d hotfix/security-patch ğŸ“¦ 5. ç‰ˆæœ¬å‘å¸ƒï¼ˆRelease / Tagï¼‰ å¦‚æœéœ€è¦ç‰ˆæœ¬ç®¡ç†ï¼Œå¯ä»¥ä½¿ç”¨ Git Tag æ ‡è®°å‘å¸ƒç‰ˆæœ¬ã€‚ ä¸éœ€è¦å•ç‹¬çš„ release åˆ†æ”¯ã€‚ ç¤ºä¾‹ï¼š\ngit tag v1.0.0 git push origin v1.0.0 âœ… æœ€å°å¯è¡Œè§„èŒƒï¼ˆæ¨èï¼‰ æ°¸ä¹…åˆ†æ”¯ï¼šmain ä¸´æ—¶åˆ†æ”¯ï¼šfeature/...ã€bugfix/...ã€hotfix/... å‘å¸ƒç”¨ Git Tagï¼Œä¸å•ç‹¬å»º release åˆ†æ”¯ã€‚ è¿™æ ·æ—¢è§„èŒƒï¼Œåˆä¸ä¼šå¢åŠ å¤ªå¤šå¤æ‚åº¦ã€‚\nğŸ“Š åˆ†æ”¯ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾ gitGraph commit id: \u0026#34;åˆå§‹åŒ– main\u0026#34; branch feature/login-api commit id: \u0026#34;å¼€å‘ç™»å½• API\u0026#34; checkout main merge feature/login-api id: \u0026#34;åˆå¹¶åŠŸèƒ½åˆ†æ”¯\u0026#34; branch bugfix/fix-redirect commit id: \u0026#34;ä¿®å¤ç™»å½•è·³è½¬ Bug\u0026#34; checkout main merge bugfix/fix-redirect id: \u0026#34;åˆå¹¶ Bug ä¿®å¤\u0026#34; branch hotfix/security-patch commit id: \u0026#34;ç´§æ€¥å®‰å…¨è¡¥ä¸\u0026#34; checkout main merge hotfix/security-patch id: \u0026#34;åˆå¹¶ Hotfix\u0026#34; commit id: \u0026#34;æ‰“ Tag v1.0.0\u0026#34; ","permalink":"http://localhost:1313/jeanblog/posts/git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95/","summary":"\u003ch1 id=\"-ç®€åŒ–-git-åˆ†æ”¯å·¥ä½œæµä¸ªäºº--å°å›¢é˜Ÿ\"\u003eğŸŒ¿ ç®€åŒ– Git åˆ†æ”¯å·¥ä½œæµï¼ˆä¸ªäºº / å°å›¢é˜Ÿï¼‰\u003c/h1\u003e\n\u003cp\u003eæœ¬å·¥ä½œæµåŸºäº Git Flow ç²¾ç®€è€Œæ¥ï¼Œé€‚åˆä¸ªäººæˆ–å°å›¢é˜Ÿï¼Œæ—¢è§„èŒƒåˆä¸å¤æ‚ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-1-ä¸»åˆ†æ”¯é•¿æœŸåˆ†æ”¯\"\u003eğŸš€ 1. ä¸»åˆ†æ”¯ï¼ˆé•¿æœŸåˆ†æ”¯ï¼‰\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003emain\u003c/code\u003e\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003eæ°¸è¿œä¿æŒç¨³å®šã€å¯å‘å¸ƒçš„çŠ¶æ€ã€‚\u003c/li\u003e\n\u003cli\u003eéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„ä»£ç éƒ½æ¥è‡ªè¿™é‡Œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¯¹äºå°å›¢é˜Ÿï¼Œé€šå¸¸åªéœ€è¦ \u003ccode\u003emain\u003c/code\u003eï¼Œä¸éœ€è¦ç»´æŠ¤ \u003ccode\u003edevelop\u003c/code\u003eã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003chr\u003e\n\u003ch2 id=\"-2-åŠŸèƒ½å¼€å‘feature-branch\"\u003eğŸ› ï¸ 2. åŠŸèƒ½å¼€å‘ï¼ˆFeature Branchï¼‰\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eåˆ†æ”¯å‘½åï¼š\u003ccode\u003efeature/\u0026lt;åŠŸèƒ½å\u0026gt;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eç”¨é€”ï¼šå¼€å‘æ–°åŠŸèƒ½ï¼Œå®Œæˆååˆå¹¶å› \u003ccode\u003emain\u003c/code\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç¤ºä¾‹ï¼š\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\nfeature/login-api\nfeature/user-profile\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eæµç¨‹ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ä» main åˆ›å»ºåŠŸèƒ½åˆ†æ”¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout -b feature/login-api main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# å¼€å‘å®Œæˆåï¼Œåˆå¹¶åˆ° main\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit merge feature/login-api\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit branch -d feature/login-api\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"-3-bug-ä¿®å¤bugfix-branch\"\u003eğŸ 3. Bug ä¿®å¤ï¼ˆBugfix Branchï¼‰\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eåˆ†æ”¯å‘½åï¼š\u003ccode\u003ebugfix/\u0026lt;é—®é¢˜å\u0026gt;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eç”¨é€”ï¼šä¿®å¤æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒçš„ bugã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç¤ºä¾‹ï¼š\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ebugfix/fix-login-redirect\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eæµç¨‹åŒ feature åˆ†æ”¯ï¼Œå®Œæˆååˆå¹¶å› \u003ccode\u003emain\u003c/code\u003eã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"-4-ç´§æ€¥ä¿®å¤hotfix-branch\"\u003eğŸ”¥ 4. ç´§æ€¥ä¿®å¤ï¼ˆHotfix Branchï¼‰\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eåˆ†æ”¯å‘½åï¼š\u003ccode\u003ehotfix/\u0026lt;é—®é¢˜å\u0026gt;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eç”¨é€”ï¼šç”Ÿäº§ç¯å¢ƒå‡ºç°ä¸¥é‡é—®é¢˜æ—¶çš„å¿«é€Ÿä¿®å¤ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç¤ºä¾‹ï¼š\u003c/p\u003e","title":"gitåˆ†æ”¯ç®¡ç†æ–¹æ³•"},{"content":"åœ¨æœ¬åœ°ä½¿ç”¨ Git è£¸ä»“åº“å®ç°å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒéš”ç¦» åœ¨å…¨æ ˆå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šå¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒå¦‚ä½•éš”ç¦»ï¼Ÿ å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ç”¨ GitHub æˆ– GitLab æ¥æ‰˜ç®¡ä»£ç ï¼Œä½†å¦‚æœé¡¹ç›®æ¶‰åŠéšç§ï¼Œä¸æ–¹ä¾¿æ”¾åœ¨å…¬å…±ä»“åº“ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\nå…¶å®ï¼ŒGit æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ æœ¬åœ°ç”µè„‘ä¸Šå»ºç«‹ä¸€ä¸ªâ€œè£¸ä»“åº“ (bare repo)â€ï¼Œå½“ä½œâ€œè¿œç¨‹ä»“åº“â€æ¥ç”¨ï¼Œä»è€Œå®ç° å¼€å‘ç¯å¢ƒ â†’ æµ‹è¯•ç¯å¢ƒ çš„ä»£ç è¿ç§»å’ŒåŒæ­¥ã€‚\nä»€ä¹ˆæ˜¯è£¸ä»“åº“ (bare repository) æ™®é€š Git ä»“åº“ï¼ˆgit initï¼‰åŒ…å« å·¥ä½œåŒº + .git å…ƒæ•°æ®ï¼Œå¯ä»¥ç›´æ¥ç¼–è¾‘æ–‡ä»¶ã€‚ è£¸ä»“åº“ï¼ˆgit init --bareï¼‰åªæœ‰ Git çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ²¡æœ‰å·¥ä½œåŒºï¼Œä¸èƒ½ç›´æ¥ç¼–è¾‘æ–‡ä»¶ï¼Œé€šå¸¸ä½œä¸º è¿œç¨‹ä»“åº“ æ¥å­˜å‚¨å’ŒåŒæ­¥ä»£ç ã€‚ ç®€å•ç†è§£ï¼š\nå¼€å‘ä»“åº“ï¼šæˆ‘åœ¨è¿™é‡Œå†™ä»£ç ã€‚ è£¸ä»“åº“ï¼šæˆ‘ç”¨æ¥å­˜æ”¾ä»£ç å†å²ï¼Œä½œä¸ºè¿œç¨‹åŒæ­¥ç‚¹ã€‚ æµ‹è¯•ä»“åº“ï¼šä»è£¸ä»“åº“å…‹éš†å‡ºæ¥ï¼Œæ¨¡æ‹Ÿè¿è¡Œç¯å¢ƒã€‚ æ­¥éª¤ä¸€ï¼šåˆ›å»ºè£¸ä»“åº“ åœ¨æœ¬æœºæŸä¸ªç›®å½•ï¼ˆæ¯”å¦‚ ~/.reposï¼‰ä¸‹åˆ›å»ºè£¸ä»“åº“ï¼š\nmkdir -p ~/.repos cd ~/.repos git init --bare scrapy.git è¿™æ ·ä½ å¾—åˆ°ä¸€ä¸ªè·¯å¾„ ~/.repos/scrapy.gitï¼Œå®ƒå°±æ˜¯æœ¬åœ°çš„è¿œç¨‹ä»“åº“ã€‚\næ­¥éª¤äºŒï¼šåœ¨å¼€å‘ä»“åº“é‡Œæ·»åŠ è¿œç¨‹ å‡è®¾ä½ çš„å¼€å‘ä»“åº“åœ¨ ~/scrapyï¼š\ncd ~/scrapy git remote add local ~/.repos/scrapy.git æ£€æŸ¥ä¸€ä¸‹è¿œç¨‹æ˜¯å¦æ·»åŠ æˆåŠŸï¼š\ngit remote -v è¾“å‡ºç±»ä¼¼ï¼š\nlocal\t/home/gong/.repos/scrapy.git (fetch) local\t/home/gong/.repos/scrapy.git (push) è¯´æ˜é…ç½®æˆåŠŸã€‚\næ­¥éª¤ä¸‰ï¼šæ¨é€ä»£ç åˆ°æœ¬åœ°è¿œç¨‹ å°† main åˆ†æ”¯æ¨é€åˆ°åˆšåˆšåˆ›å»ºçš„è£¸ä»“åº“ï¼š\ngit push local main è¿™æ—¶è£¸ä»“åº“ä¸­å·²ç»ä¿å­˜äº†ä½ æ‰€æœ‰çš„æäº¤è®°å½•ã€‚\næ­¥éª¤å››ï¼šåœ¨æµ‹è¯•ç¯å¢ƒä¸­å…‹éš†ä»£ç  å‡è®¾ä½ æƒ³åœ¨ ~/test-env ä¸‹è¿è¡Œæµ‹è¯•ç¯å¢ƒï¼š\ncd ~/test-env git clone ~/.repos/scrapy.git è¿™æ ·ä½ å°±å¾—åˆ°äº†ä¸€ä¸ªå¹²å‡€çš„å‰¯æœ¬ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ¨¡æ‹Ÿéƒ¨ç½²ã€è¿è¡Œæµ‹è¯•ï¼Œè€Œä¸ä¼šå½±å“å¼€å‘ç¯å¢ƒã€‚\nps. å¾ˆå¤šæ—¶å€™\nwarning: remote HEAD refers to nonexistent ref, unable to checkout ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯,æ˜¯ç”±äºæˆ‘ä»¬æ–°å»ºçš„è£¸ä»“åº“è™½ç„¶å·²ç» init \u0026ndash;bare äº†,ä½†æ˜¯æ²¡æœ‰é»˜è®¤çš„HEADæŒ‡é’ˆ,æ‰€ä»¥æˆ‘ä»¬git cloneçš„æ—¶å€™ä¸çŸ¥é“è¯¥æ£€å‡ºå“ªä¸ªåˆ†æ”¯\nè¿›å…¥è£¸ä»“åº“,ä½¿ç”¨\ncd ~/.repos/scrapy.git git symbolic-ref HEAD refs/heads/main ä¹‹åå†é‡æ–°cloneä¸€æ¬¡å°±å¯ä»¥äº†\næ­¥éª¤äº”ï¼šåç»­åŒæ­¥æµç¨‹ åœ¨å¼€å‘ç¯å¢ƒ (~/scrapy)ï¼š\n# æ­£å¸¸å¼€å‘ã€æäº¤ git add . git commit -m \u0026#34;feat: å®ŒæˆåŠŸèƒ½\u0026#34; # æ¨é€åˆ°æœ¬åœ°è¿œç¨‹ git push local main åœ¨æµ‹è¯•ç¯å¢ƒ (~/test-env/scrapy)ï¼š\n# æ‹‰å–æœ€æ–°ä»£ç  git pull è¿™æ ·ä½ å°±èƒ½æ–¹ä¾¿åœ°åœ¨ä¸€å°ç”µè„‘ä¸Šå®ç° å¼€å‘ç¯å¢ƒ â†’ æµ‹è¯•ç¯å¢ƒ çš„ä»£ç è¿ç§»å’Œéš”ç¦»ã€‚\næ€»ç»“ å¦‚æœä»£ç ä¸æ–¹ä¾¿ä¸Šä¼ åˆ° GitHub/GitLabï¼Œå®Œå…¨å¯ä»¥é€šè¿‡æœ¬åœ°è£¸ä»“åº“æ¥å®ç°å‰åç«¯å¼€å‘ä¸æµ‹è¯•ç¯å¢ƒçš„è§£è€¦ã€‚\nä¼˜ç‚¹ï¼š\nä¸ä¾èµ–å¤–éƒ¨å¹³å°ï¼Œå®‰å…¨æ€§é«˜ã€‚ å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒéš”ç¦»ï¼Œäº’ä¸å¹²æ‰°ã€‚ ä¿ç•™äº†å®Œæ•´çš„ Git å†å²ï¼Œæ–¹ä¾¿ç‰ˆæœ¬ç®¡ç†ã€‚ åç»­å¦‚æœé¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å¼•å…¥ ç§æœ‰ Git æœåŠ¡ï¼ˆGitea/GitLab CEï¼‰ æˆ– Docker éƒ¨ç½²ï¼Œè¿›ä¸€æ­¥æå‡å¼€å‘ä½“éªŒã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%9C%A8%E6%9C%AC%E5%9C%B0%E4%BD%BF%E7%94%A8git%E8%A3%B8%E4%BB%93%E5%BA%93%E5%AE%9E%E7%8E%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%92%8C%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E9%9A%94%E7%A6%BB/","summary":"\u003ch1 id=\"åœ¨æœ¬åœ°ä½¿ç”¨-git-è£¸ä»“åº“å®ç°å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒéš”ç¦»\"\u003eåœ¨æœ¬åœ°ä½¿ç”¨ Git è£¸ä»“åº“å®ç°å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒéš”ç¦»\u003c/h1\u003e\n\u003cp\u003eåœ¨å…¨æ ˆå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š\u003cstrong\u003eå¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒå¦‚ä½•éš”ç¦»\u003c/strong\u003eï¼Ÿ\nå¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ç”¨ GitHub æˆ– GitLab æ¥æ‰˜ç®¡ä»£ç ï¼Œä½†å¦‚æœé¡¹ç›®æ¶‰åŠéšç§ï¼Œä¸æ–¹ä¾¿æ”¾åœ¨å…¬å…±ä»“åº“ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\u003c/p\u003e\n\u003cp\u003eå…¶å®ï¼ŒGit æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ \u003cstrong\u003eæœ¬åœ°ç”µè„‘ä¸Šå»ºç«‹ä¸€ä¸ªâ€œè£¸ä»“åº“ (bare repo)â€\u003c/strong\u003eï¼Œå½“ä½œâ€œè¿œç¨‹ä»“åº“â€æ¥ç”¨ï¼Œä»è€Œå®ç° \u003cstrong\u003eå¼€å‘ç¯å¢ƒ â†’ æµ‹è¯•ç¯å¢ƒ\u003c/strong\u003e çš„ä»£ç è¿ç§»å’ŒåŒæ­¥ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä»€ä¹ˆæ˜¯è£¸ä»“åº“-bare-repository\"\u003eä»€ä¹ˆæ˜¯è£¸ä»“åº“ (bare repository)\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eæ™®é€š Git ä»“åº“ï¼ˆ\u003ccode\u003egit init\u003c/code\u003eï¼‰åŒ…å« \u003cstrong\u003eå·¥ä½œåŒº + .git å…ƒæ•°æ®\u003c/strong\u003eï¼Œå¯ä»¥ç›´æ¥ç¼–è¾‘æ–‡ä»¶ã€‚\u003c/li\u003e\n\u003cli\u003eè£¸ä»“åº“ï¼ˆ\u003ccode\u003egit init --bare\u003c/code\u003eï¼‰åªæœ‰ Git çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ²¡æœ‰å·¥ä½œåŒºï¼Œä¸èƒ½ç›´æ¥ç¼–è¾‘æ–‡ä»¶ï¼Œé€šå¸¸ä½œä¸º \u003cstrong\u003eè¿œç¨‹ä»“åº“\u003c/strong\u003e æ¥å­˜å‚¨å’ŒåŒæ­¥ä»£ç ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç®€å•ç†è§£ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eå¼€å‘ä»“åº“\u003c/strong\u003eï¼šæˆ‘åœ¨è¿™é‡Œå†™ä»£ç ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eè£¸ä»“åº“\u003c/strong\u003eï¼šæˆ‘ç”¨æ¥å­˜æ”¾ä»£ç å†å²ï¼Œä½œä¸ºè¿œç¨‹åŒæ­¥ç‚¹ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæµ‹è¯•ä»“åº“\u003c/strong\u003eï¼šä»è£¸ä»“åº“å…‹éš†å‡ºæ¥ï¼Œæ¨¡æ‹Ÿè¿è¡Œç¯å¢ƒã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"æ­¥éª¤ä¸€åˆ›å»ºè£¸ä»“åº“\"\u003eæ­¥éª¤ä¸€ï¼šåˆ›å»ºè£¸ä»“åº“\u003c/h2\u003e\n\u003cp\u003eåœ¨æœ¬æœºæŸä¸ªç›®å½•ï¼ˆæ¯”å¦‚ \u003ccode\u003e~/.repos\u003c/code\u003eï¼‰ä¸‹åˆ›å»ºè£¸ä»“åº“ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emkdir -p ~/.repos\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd ~/.repos\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit init --bare scrapy.git\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™æ ·ä½ å¾—åˆ°ä¸€ä¸ªè·¯å¾„ \u003ccode\u003e~/.repos/scrapy.git\u003c/code\u003eï¼Œå®ƒå°±æ˜¯æœ¬åœ°çš„è¿œç¨‹ä»“åº“ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"æ­¥éª¤äºŒåœ¨å¼€å‘ä»“åº“é‡Œæ·»åŠ è¿œç¨‹\"\u003eæ­¥éª¤äºŒï¼šåœ¨å¼€å‘ä»“åº“é‡Œæ·»åŠ è¿œç¨‹\u003c/h2\u003e\n\u003cp\u003eå‡è®¾ä½ çš„å¼€å‘ä»“åº“åœ¨ \u003ccode\u003e~/scrapy\u003c/code\u003eï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd ~/scrapy\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit remote add local ~/.repos/scrapy.git\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ£€æŸ¥ä¸€ä¸‹è¿œç¨‹æ˜¯å¦æ·»åŠ æˆåŠŸï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit remote -v\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¾“å‡ºç±»ä¼¼ï¼š\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003elocal\t/home/gong/.repos/scrapy.git (fetch)\nlocal\t/home/gong/.repos/scrapy.git (push)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eè¯´æ˜é…ç½®æˆåŠŸã€‚\u003c/p\u003e","title":"åœ¨æœ¬åœ°ä½¿ç”¨gitè£¸ä»“åº“å®ç°å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒéš”ç¦»"},{"content":"Introduction å¯¹äºtypescriptä»¥.tsä¸ºåç¼€çš„æ–‡ä»¶,æˆ‘ä»¬æ˜¯ä¸èƒ½ç›´æ¥ç¼–è¯‘è¿è¡Œçš„,æˆ‘ä»¬éœ€è¦æŠŠtypescriptæ–‡ä»¶è½¬è¯‘ä¸ºjsæ–‡ä»¶ç„¶åå†è¿›è¡Œè¿è¡Œ\næˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸¤ç§æ–¹å¼,æŠŠtsæ–‡ä»¶ä¼ åˆ°æœåŠ¡å™¨ä¸Šä½¿ç”¨ciå·¥å…·è¿›è¡Œç¼–è¯‘,æˆ–è€…ç›´æ¥åœ¨æœ¬åœ°è½¬è¯‘åä¸Šä¼ jsæ–‡ä»¶åˆ°ç”Ÿäº§ç¯å¢ƒ,å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨å¼€å‘ç¯å¢ƒä¸­ç›´æ¥è¿›è¡Œè¿è¡Œæµ‹è¯•çš„è¯,å¯ä»¥ä½¿ç”¨ts-nodeè¿›è¡Œè¿è¡Œ,ä½†æ˜¯å¼€å‘ç¯å¢ƒä¹‹ä¸­è¿˜æ˜¯éœ€è¦ç¼–è¯‘\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%92%8C%E9%85%8D%E7%BD%AEtypescript%E7%8E%AF%E5%A2%83/","summary":"\u003ch1 id=\"introduction\"\u003eIntroduction\u003c/h1\u003e\n\u003cp\u003eå¯¹äºtypescriptä»¥.tsä¸ºåç¼€çš„æ–‡ä»¶,æˆ‘ä»¬æ˜¯ä¸èƒ½ç›´æ¥ç¼–è¯‘è¿è¡Œçš„,æˆ‘ä»¬éœ€è¦æŠŠtypescriptæ–‡ä»¶è½¬è¯‘ä¸ºjsæ–‡ä»¶ç„¶åå†è¿›è¡Œè¿è¡Œ\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸¤ç§æ–¹å¼,æŠŠtsæ–‡ä»¶ä¼ åˆ°æœåŠ¡å™¨ä¸Šä½¿ç”¨ciå·¥å…·è¿›è¡Œç¼–è¯‘,æˆ–è€…ç›´æ¥åœ¨æœ¬åœ°è½¬è¯‘åä¸Šä¼ jsæ–‡ä»¶åˆ°ç”Ÿäº§ç¯å¢ƒ,å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨å¼€å‘ç¯å¢ƒä¸­ç›´æ¥è¿›è¡Œè¿è¡Œæµ‹è¯•çš„è¯,å¯ä»¥ä½¿ç”¨ts-nodeè¿›è¡Œè¿è¡Œ,ä½†æ˜¯å¼€å‘ç¯å¢ƒä¹‹ä¸­è¿˜æ˜¯éœ€è¦ç¼–è¯‘\u003c/p\u003e","title":"å¦‚ä½•ä½¿ç”¨å’Œé…ç½®typescriptç¯å¢ƒ"},{"content":"Python æ—¥å¿—ä¸è¿½è¸ª Python æ—¥å¿—è¿½è¸ªå®è·µ ç»“æ„åŒ–æ—¥å¿—ä¸è¿½è¸ª\nå‰¯æ ‡é¢˜/æ‘˜è¦ï¼š ç»“åˆ logging + OpenTelemetry å®ç°ç»“æ„åŒ–æ—¥å¿—å¹¶æŠŠ trace_id æ³¨å…¥æ—¥å¿—ï¼Œä¾¿äºåœ¨ç”Ÿäº§ç¯å¢ƒä¸²è”è°ƒç”¨é“¾ä¸å®šä½é—®é¢˜ã€‚\nTL;DRï¼š è®¾ç½® json æ ¼å¼æ—¥å¿—å¹¶é€šè¿‡ OpenTelemetry åœ¨æ¯æ¡æ—¥å¿—é‡Œæ³¨å…¥ trace_id/span_idã€‚å…³é”®æ­¥éª¤ï¼šå®‰è£…ä¾èµ– â†’ é…ç½® loggingï¼ˆJSONï¼‰â†’ é…ç½® TracerProvider â†’ ç”¨ Filter ä»å½“å‰ span æå– trace ä¿¡æ¯å¹¶æ·»åŠ åˆ°æ—¥å¿—è®°å½•ä¸­ã€‚\nç›®å½•\nèƒŒæ™¯ä¸åŠ¨æœºï¼ˆä¸ºä»€ä¹ˆéœ€è¦ï¼‰ å…³é”®æ¦‚å¿µä¸æœ¯è¯­è§£é‡Š ç¯å¢ƒä¸ä¾èµ–ï¼ˆå®‰è£…å‘½ä»¤ï¼‰ é€æ­¥å®æˆ˜ç¤ºä¾‹ï¼ˆå¯ç›´æ¥è¿è¡Œï¼‰ åŸç†ä¸å®ç°è¦ç‚¹ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ æœ€ä½³å®è·µæ€»ç»“ ç»“è®ºä¸ä¸‹ä¸€æ­¥å»ºè®® å¯è§†åŒ–å»ºè®® å‚è€ƒä¸å»¶ä¼¸é˜…è¯» å¯å¤åˆ¶ç¤ºä¾‹ä»£ç  èƒŒæ™¯ä¸åŠ¨æœºï¼ˆä¸ºä»€ä¹ˆéœ€è¦ï¼‰ ç°ä»£åç«¯æœåŠ¡åˆ†å¸ƒå¼éƒ¨ç½²åï¼Œå•é æ–‡æœ¬æ—¥å¿—å¾ˆéš¾æŠŠä¸€æ¬¡è¯·æ±‚é“¾è·¯ä»å…¥å£åˆ°åç«¯ä¸²èµ·æ¥ã€‚ç»“æ„åŒ–æ—¥å¿—ï¼ˆJSONï¼‰ä¾¿äºèšåˆä¸æŸ¥è¯¢ï¼›è€Œåˆ†å¸ƒå¼è¿½è¸ªï¼ˆtracingï¼‰ç»™å‡ºè°ƒç”¨é“¾ä¸ span ä¿¡æ¯ã€‚äºŒè€…ç»“åˆèƒ½å¿«é€Ÿå®šä½å»¶è¿Ÿä¸é”™è¯¯æ ¹å› ï¼šæ—¥å¿—å‘Šè¯‰ä½ â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€ï¼Œtrace å‘Šè¯‰ä½ â€œè¿™ä¸ªè¯·æ±‚ç»è¿‡äº†å“ªäº›æœåŠ¡/æ“ä½œâ€ã€‚\nå…³é”®æ¦‚å¿µä¸æœ¯è¯­è§£é‡Šï¼ˆç®€æ˜ï¼‰\næ—¥å¿—ï¼ˆLoggingï¼‰ï¼šç¨‹åºè¿è¡Œæ—¶çš„äº‹ä»¶è®°å½•ï¼Œé€šå¸¸æŒ‰çº§åˆ«ï¼ˆINFO/ERRORï¼‰è¾“å‡ºã€‚ ç»“æ„åŒ–æ—¥å¿—ï¼šä»¥ JSON ç­‰ç»“æ„åŒ–æ ¼å¼è¾“å‡ºï¼Œä¾¿äºæœºå™¨å¤„ç†ä¸æ£€ç´¢ã€‚ Trace/Spanï¼šä¸€æ¬¡åˆ†å¸ƒå¼æ“ä½œï¼ˆtraceï¼‰ç”±è‹¥å¹²å­æ“ä½œï¼ˆspanï¼‰ç»„æˆï¼Œspan å«æœ‰ trace_id ä¸ span_idã€‚ Context Propagationï¼šåœ¨ä¸åŒæœåŠ¡/çº¿ç¨‹/åç¨‹ä¸­ä¼ é€’ trace context ä»¥ä¸²è”è°ƒç”¨é“¾ã€‚ ç¯å¢ƒä¸ä¾èµ–ï¼ˆåˆ—å‡ºå®‰è£…å‘½ä»¤ï¼‰ æ¨èç¯å¢ƒï¼šPython 3.8+ å®‰è£…ä¾èµ–ï¼š pip install python-json-logger opentelemetry-api opentelemetry-sdk\nå¦‚éœ€æ§åˆ¶å°å¯¼å‡ºï¼ˆç”¨äº MVP æµ‹è¯•ï¼‰ï¼š pip install opentelemetry-exporter-console\né€æ­¥å®æˆ˜ç¤ºä¾‹ï¼ˆåŒ…å«å¯ç›´æ¥è¿è¡Œçš„ä»£ç ç‰‡æ®µï¼Œæ³¨é‡Šæ¸…æ¥šï¼‰ ä¸‹é¢ä¾‹å­å±•ç¤ºï¼š1) é…ç½® JSON æ—¥å¿— 2) é…ç½® OpenTelemetry TracerProviderï¼ˆConsoleExporterï¼‰3) ç”¨ Filter å°† trace_id/span_id æ³¨å…¥æ¯æ¡æ—¥å¿—ã€‚\n# demo.py import logging import sys from pythonjsonlogger import jsonlogger from opentelemetry import trace from opentelemetry.sdk.trace import TracerProvider from opentelemetry.sdk.trace.export import SimpleSpanProcessor, ConsoleSpanExporter # 1) è®¾ç½® TracerProvider ä¸ Console å¯¼å‡ºï¼ˆMVPï¼‰ trace.set_tracer_provider(TracerProvider()) tracer_provider = trace.get_tracer_provider() tracer_provider.add_span_processor(SimpleSpanProcessor(ConsoleSpanExporter())) tracer = trace.get_tracer(__name__) # 2) è‡ªå®šä¹‰ logging Filterï¼šä»å½“å‰ span ä¸­å– trace_id/span_id æ³¨å…¥ log record class OTFilter(logging.Filter): def filter(self, record): span = trace.get_current_span() ctx = span.get_span_context() if ctx and ctx.trace_id != 0: record.trace_id = format(ctx.trace_id, \u0026#39;032x\u0026#39;) record.span_id = format(ctx.span_id, \u0026#39;016x\u0026#39;) else: record.trace_id = None record.span_id = None return True # 3) é…ç½® logger è¾“å‡º JSON åˆ° stdout logger = logging.getLogger(\u0026#34;backend_api\u0026#34;) handler = logging.StreamHandler(sys.stdout) fmt = jsonlogger.JsonFormatter(\u0026#39;%(asctime)s %(levelname)s %(name)s %(message)s %(trace_id)s %(span_id)s\u0026#39;) handler.setFormatter(fmt) logger.addHandler(handler) logger.addFilter(OTFilter()) logger.setLevel(logging.INFO) # 4) ä½¿ç”¨ tracer å¹¶åœ¨ span å†…è®°å½•æ—¥å¿— def handle_request(user_id): with tracer.start_as_current_span(\u0026#34;handle_request\u0026#34;) as span: logger.info(\u0026#34;å¼€å§‹å¤„ç†è¯·æ±‚\u0026#34;, extra={\u0026#34;user_id\u0026#34;: user_id}) # simulate work with tracer.start_as_current_span(\u0026#34;db_query\u0026#34;): logger.info(\u0026#34;æŸ¥è¯¢æ•°æ®åº“\u0026#34;, extra={\u0026#34;query\u0026#34;: \u0026#34;select *\u0026#34;}) logger.info(\u0026#34;è¯·æ±‚å¤„ç†å®Œæˆ\u0026#34;, extra={\u0026#34;status\u0026#34;: \u0026#34;ok\u0026#34;}) if __name__ == \u0026#34;__main__\u0026#34;: handle_request(\u0026#34;user-123\u0026#34;) åŸç†ä¸å®ç°è¦ç‚¹ï¼ˆè§£é‡Šä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼‰\nç»“æ„åŒ–æ—¥å¿—ï¼ˆJSONï¼‰ä¾¿äº ELK/EFK ç­‰ç³»ç»Ÿç´¢å¼•å’ŒæŸ¥è¯¢ï¼›jsonlogger ç›´æ¥è¾“å‡º JSON å­—æ®µã€‚ trace_id/span_id ä¸æ˜¯ç”± logging è‡ªå¸¦ï¼Œéœ€è¦ä» OpenTelemetry å½“å‰ä¸Šä¸‹æ–‡è·å–å¹¶æ³¨å…¥åˆ° LogRecordï¼›é€šè¿‡ logging.Filter å¯ä»¥åœ¨è®°å½•åˆ›å»ºæ—¶åŠ¨æ€æ·»åŠ å­—æ®µã€‚ å°† tracing ä¸æ—¥å¿—åˆ†å¼€ç®¡ç†ï¼Œå‡ºå£ï¼ˆExporterï¼‰å†³å®š trace æœ€ç»ˆå»å‘ï¼›ConsoleExporter é€‚åˆå¼€å‘/è°ƒè¯•ï¼Œç”Ÿäº§é€šå¸¸ç”¨ OTLP/Jaeger/Zipkinã€‚ å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ï¼ˆè‡³å°‘åˆ—å‡º 5 é¡¹ï¼‰\ntrace_id ä¸º 0 æˆ– Noneï¼šè¯´æ˜å½“å‰æ²¡æœ‰æ´»è·ƒ spanï¼Œå¯èƒ½æ²¡æ­£ç¡®ä¼ æ’­ä¸Šä¸‹æ–‡ã€‚ å¤šçº¿ç¨‹/å¼‚æ­¥é—®é¢˜ï¼šç¡®ä¿åœ¨æ–°çº¿ç¨‹/åç¨‹ä¸­æ­£ç¡®æ¿€æ´»ä¸Šä¸‹æ–‡ï¼ˆä½¿ç”¨ ContextVar æˆ– SDK æä¾›çš„å·¥å…·ï¼‰ã€‚ æ€§èƒ½å¼€é”€ï¼šç»“æ„åŒ–æ—¥å¿—å’Œè¿½è¸ªä¼šå¢åŠ  CPU/IOï¼Œæ³¨æ„ samplingã€å¼‚æ­¥å¯¼å‡ºä¸æ‰¹å¤„ç†ã€‚ æ•æ„Ÿæ•°æ®ï¼šä¸è¦æŠŠæ•æ„Ÿå­—æ®µï¼ˆPIIã€å¯†ç ï¼‰å†™å…¥æ—¥å¿—æˆ– trace æ ‡ç­¾ã€‚ æ—¥å¿—å­—æ®µä¸ä¸€è‡´ï¼šä¿è¯ç»“æ„åŒ–æ—¥å¿—å­—æ®µå‘½åä¸€è‡´ï¼ˆtrace_idã€span_idã€user_idï¼‰ï¼Œåˆ©äºèšåˆã€‚ ç‰ˆæœ¬å…¼å®¹ï¼šOpenTelemetry å„åº“ç‰ˆæœ¬é¢‘ç¹å˜åŒ–ï¼Œæ³¨æ„ SDK ä¸ exporter çš„å…¼å®¹æ€§ã€‚ æ—¶é—´åŒæ­¥ï¼šæ—¥å¿—ä¸ trace çš„æ—¶é—´æˆ³åº”ä½¿ç”¨ç»Ÿä¸€æ—¶é’Ÿï¼ˆUTCï¼‰ï¼Œä¾¿äºå…³è”ä¸æ’åºã€‚ æœ€ä½³å®è·µæ€»ç»“ï¼ˆè¦ç‚¹å¼ï¼‰\nä½¿ç”¨ç»“æ„åŒ– JSON æ—¥å¿—å¹¶ç»Ÿä¸€å­—æ®µåã€‚ åœ¨æ—¥å¿—ä¸­æ³¨å…¥ trace_id/span_idï¼Œä¼˜å…ˆé€šè¿‡ Filter/Formatter è‡ªåŠ¨æ·»åŠ ã€‚ ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ‰¹é‡å¼‚æ­¥å¯¼å‡ºï¼ˆOTLPï¼‰ä¸é‡‡æ ·ç­–ç•¥ã€‚ åœ¨é«˜é¢‘è·¯å¾„é¿å…è¿‡åº¦æ—¥å¿—ï¼Œåˆ©ç”¨æŒ‡æ ‡ä¸ traces æ’æŸ¥æ€§èƒ½é—®é¢˜ã€‚ ä¿è¯ä¸Šä¸‹æ–‡ä¼ æ’­åœ¨ RPCã€é˜Ÿåˆ—ã€å¼‚æ­¥ä»»åŠ¡ä¸­æ­£ç¡®ä¼ é€’ã€‚ ç»“è®ºä¸ä¸‹ä¸€æ­¥å»ºè®® æŠŠ logging ä¸ tracing ç»“åˆèƒ½æ˜¾è‘—æå‡çº¿ä¸Šé—®é¢˜å®šä½æ•ˆç‡ã€‚å…ˆä» ConsoleExporter + JSON logging åš MVPï¼Œç¡®è®¤å­—æ®µä¸æŸ¥è¯¢é“¾è·¯åï¼Œè¿ç§»åˆ°ç”Ÿäº§çº§å¯¼å‡ºï¼ˆOTLP åˆ°åç«¯å¦‚ Jaeger/Tempoï¼‰ï¼Œå¹¶é…ç½®é‡‡æ ·ä¸æ—¥å¿—èšåˆç®¡é“ã€‚\nå¯è§†åŒ–å»ºè®®\nè°ƒç”¨é“¾æ—¶åºå›¾ï¼šå±•ç¤º service A -\u0026gt; B -\u0026gt; C çš„ span å¼€å§‹/ç»“æŸæ—¶é—´çº¿ã€‚ æ—¥å¿—ç»“æ„ç¤ºæ„å›¾ï¼šå±•ç¤º JSON æ—¥å¿—å­—æ®µï¼ˆtimestampã€levelã€messageã€trace_idã€span_idã€user_idï¼‰ã€‚ SEO æ ‡ç­¾ï¼ˆtagsï¼‰\npython logging opentelemetry tracing ç»“æ„åŒ–æ—¥å¿— é•¿å°¾å…³é”®è¯ï¼ˆ3 ä¸ªï¼‰\npython logging æ³¨å…¥ trace_id å®ç° opentelemetry æ—¥å¿—ä¸è¿½è¸ªç»“åˆç¤ºä¾‹ å°† trace_id å†™å…¥ json æ—¥å¿—çš„æ–¹æ³• Meta æè¿°ï¼ˆâ‰¤150 å­—ï¼‰ é€šè¿‡ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•åœ¨ Python ä¸­å°† OpenTelemetry çš„ trace_id æ³¨å…¥ç»“æ„åŒ– JSON æ—¥å¿—ï¼ŒåŒ…å«ä¾èµ–å®‰è£…ã€ä»£ç ç¤ºä¾‹ä¸å¸¸è§æ³¨æ„äº‹é¡¹ï¼Œä¾¿äºå¿«é€Ÿä¸Šçº¿åˆ†å¸ƒå¼è¿½è¸ªä¸æ—¥å¿—å…³è”ã€‚\nå¼•ç”¨ä¸å»¶ä¼¸é˜…è¯»\nPython logging å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.python.org/3/library/logging.html OpenTelemetry Python æŒ‡å—ï¼šhttps://opentelemetry.io/docs/instrumentation/python/ python-json-loggerï¼ˆGitHubï¼‰ï¼šhttps://github.com/madzak/python-json-logger W3C Trace Context è§„èŒƒï¼šhttps://www.w3.org/TR/trace-context/ å¯å¤åˆ¶ç¤ºä¾‹ä»£ç  è¿è¡Œç¯å¢ƒä¸ä¾èµ–ç‰ˆæœ¬ï¼ˆç¤ºä¾‹æµ‹è¯•ç¯å¢ƒï¼‰\nPython 3.8+ python-json-logger \u0026gt;= 2.0.2 opentelemetry-api \u0026gt;= 1.10.0 opentelemetry-sdk \u0026gt;= 1.10.0 å®‰è£…å‘½ä»¤ï¼š pip install python-json-logger opentelemetry-api opentelemetry-sdk opentelemetry-exporter-console å®Œæ•´ç¤ºä¾‹ï¼ˆå¤åˆ¶ç²˜è´´è¿è¡Œï¼‰ï¼š\n# demo.py import logging import sys from pythonjsonlogger import jsonlogger from opentelemetry import trace from opentelemetry.sdk.trace import TracerProvider from opentelemetry.sdk.trace.export import SimpleSpanProcessor, ConsoleSpanExporter # Set up tracer provider and console exporter (MVP) trace.set_tracer_provider(TracerProvider()) tracer_provider = trace.get_tracer_provider() tracer_provider.add_span_processor(SimpleSpanProcessor(ConsoleSpanExporter())) tracer = trace.get_tracer(__name__) # Logging Filter to inject trace_id/span_id class OTFilter(logging.Filter): def filter(self, record): span = trace.get_current_span() ctx = span.get_span_context() # ctx.trace_id is integer; format to 32-hex string if ctx and ctx.trace_id != 0: record.trace_id = format(ctx.trace_id, \u0026#39;032x\u0026#39;) record.span_id = format(ctx.span_id, \u0026#39;016x\u0026#39;) else: record.trace_id = None record.span_id = None return True # JSON logger config logger = logging.getLogger(\u0026#34;backend_api\u0026#34;) handler = logging.StreamHandler(sys.stdout) # include trace_id/span_id in format so they appear in JSON fmt = jsonlogger.JsonFormatter(\u0026#39;%(asctime)s %(levelname)s %(name)s %(message)s %(trace_id)s %(span_id)s\u0026#39;) handler.setFormatter(fmt) logger.addHandler(handler) logger.addFilter(OTFilter()) logger.setLevel(logging.INFO) # Example usage with nested spans def handle_request(user_id): with tracer.start_as_current_span(\u0026#34;handle_request\u0026#34;) as span: logger.info(\u0026#34;å¼€å§‹å¤„ç†è¯·æ±‚\u0026#34;, extra={\u0026#34;user_id\u0026#34;: user_id}) with tracer.start_as_current_span(\u0026#34;db_query\u0026#34;): logger.info(\u0026#34;æŸ¥è¯¢æ•°æ®åº“\u0026#34;, extra={\u0026#34;query\u0026#34;: \u0026#34;select * from users where id=%s\u0026#34;, \u0026#34;user_id\u0026#34;: user_id}) logger.info(\u0026#34;è¯·æ±‚å¤„ç†å®Œæˆ\u0026#34;, extra={\u0026#34;status\u0026#34;: \u0026#34;ok\u0026#34;}) if __name__ == \u0026#34;__main__\u0026#34;: handle_request(\u0026#34;user-123\u0026#34;) è¿è¡Œï¼š python demo.py\nç¤ºä¾‹è¾“å‡ºï¼ˆæ§åˆ¶å°ä¼šåŒæ—¶æ‰“å° span åˆ° ConsoleExporter ä¸ JSON æ—¥å¿—åˆ° stdoutï¼‰ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/%E7%BB%93%E6%9E%84%E5%8C%96%E6%97%A5%E5%BF%97%E5%92%8C%E8%BF%BD%E8%B8%AA/","summary":"\u003cp\u003ePython æ—¥å¿—ä¸è¿½è¸ª\nPython æ—¥å¿—è¿½è¸ªå®è·µ\nç»“æ„åŒ–æ—¥å¿—ä¸è¿½è¸ª\u003c/p\u003e\n\u003cp\u003eå‰¯æ ‡é¢˜/æ‘˜è¦ï¼š\nç»“åˆ logging + OpenTelemetry å®ç°ç»“æ„åŒ–æ—¥å¿—å¹¶æŠŠ trace_id æ³¨å…¥æ—¥å¿—ï¼Œä¾¿äºåœ¨ç”Ÿäº§ç¯å¢ƒä¸²è”è°ƒç”¨é“¾ä¸å®šä½é—®é¢˜ã€‚\u003c/p\u003e\n\u003cp\u003eTL;DRï¼š\nè®¾ç½® json æ ¼å¼æ—¥å¿—å¹¶é€šè¿‡ OpenTelemetry åœ¨æ¯æ¡æ—¥å¿—é‡Œæ³¨å…¥ trace_id/span_idã€‚å…³é”®æ­¥éª¤ï¼šå®‰è£…ä¾èµ– â†’ é…ç½® loggingï¼ˆJSONï¼‰â†’ é…ç½® TracerProvider â†’ ç”¨ Filter ä»å½“å‰ span æå– trace ä¿¡æ¯å¹¶æ·»åŠ åˆ°æ—¥å¿—è®°å½•ä¸­ã€‚\u003c/p\u003e\n\u003cp\u003eç›®å½•\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eèƒŒæ™¯ä¸åŠ¨æœºï¼ˆä¸ºä»€ä¹ˆéœ€è¦ï¼‰\u003c/li\u003e\n\u003cli\u003eå…³é”®æ¦‚å¿µä¸æœ¯è¯­è§£é‡Š\u003c/li\u003e\n\u003cli\u003eç¯å¢ƒä¸ä¾èµ–ï¼ˆå®‰è£…å‘½ä»¤ï¼‰\u003c/li\u003e\n\u003cli\u003eé€æ­¥å®æˆ˜ç¤ºä¾‹ï¼ˆå¯ç›´æ¥è¿è¡Œï¼‰\u003c/li\u003e\n\u003cli\u003eåŸç†ä¸å®ç°è¦ç‚¹\u003c/li\u003e\n\u003cli\u003eå¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹\u003c/li\u003e\n\u003cli\u003eæœ€ä½³å®è·µæ€»ç»“\u003c/li\u003e\n\u003cli\u003eç»“è®ºä¸ä¸‹ä¸€æ­¥å»ºè®®\u003c/li\u003e\n\u003cli\u003eå¯è§†åŒ–å»ºè®®\u003c/li\u003e\n\u003cli\u003eå‚è€ƒä¸å»¶ä¼¸é˜…è¯»\u003c/li\u003e\n\u003cli\u003eå¯å¤åˆ¶ç¤ºä¾‹ä»£ç \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eèƒŒæ™¯ä¸åŠ¨æœºï¼ˆä¸ºä»€ä¹ˆéœ€è¦ï¼‰\nç°ä»£åç«¯æœåŠ¡åˆ†å¸ƒå¼éƒ¨ç½²åï¼Œå•é æ–‡æœ¬æ—¥å¿—å¾ˆéš¾æŠŠä¸€æ¬¡è¯·æ±‚é“¾è·¯ä»å…¥å£åˆ°åç«¯ä¸²èµ·æ¥ã€‚ç»“æ„åŒ–æ—¥å¿—ï¼ˆJSONï¼‰ä¾¿äºèšåˆä¸æŸ¥è¯¢ï¼›è€Œåˆ†å¸ƒå¼è¿½è¸ªï¼ˆtracingï¼‰ç»™å‡ºè°ƒç”¨é“¾ä¸ span ä¿¡æ¯ã€‚äºŒè€…ç»“åˆèƒ½å¿«é€Ÿå®šä½å»¶è¿Ÿä¸é”™è¯¯æ ¹å› ï¼šæ—¥å¿—å‘Šè¯‰ä½ â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€ï¼Œtrace å‘Šè¯‰ä½ â€œè¿™ä¸ªè¯·æ±‚ç»è¿‡äº†å“ªäº›æœåŠ¡/æ“ä½œâ€ã€‚\u003c/p\u003e\n\u003cp\u003eå…³é”®æ¦‚å¿µä¸æœ¯è¯­è§£é‡Šï¼ˆç®€æ˜ï¼‰\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ—¥å¿—ï¼ˆLoggingï¼‰ï¼šç¨‹åºè¿è¡Œæ—¶çš„äº‹ä»¶è®°å½•ï¼Œé€šå¸¸æŒ‰çº§åˆ«ï¼ˆINFO/ERRORï¼‰è¾“å‡ºã€‚\u003c/li\u003e\n\u003cli\u003eç»“æ„åŒ–æ—¥å¿—ï¼šä»¥ JSON ç­‰ç»“æ„åŒ–æ ¼å¼è¾“å‡ºï¼Œä¾¿äºæœºå™¨å¤„ç†ä¸æ£€ç´¢ã€‚\u003c/li\u003e\n\u003cli\u003eTrace/Spanï¼šä¸€æ¬¡åˆ†å¸ƒå¼æ“ä½œï¼ˆtraceï¼‰ç”±è‹¥å¹²å­æ“ä½œï¼ˆspanï¼‰ç»„æˆï¼Œspan å«æœ‰ trace_id ä¸ span_idã€‚\u003c/li\u003e\n\u003cli\u003eContext Propagationï¼šåœ¨ä¸åŒæœåŠ¡/çº¿ç¨‹/åç¨‹ä¸­ä¼ é€’ trace context ä»¥ä¸²è”è°ƒç”¨é“¾ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eç¯å¢ƒä¸ä¾èµ–ï¼ˆåˆ—å‡ºå®‰è£…å‘½ä»¤ï¼‰\næ¨èç¯å¢ƒï¼šPython 3.8+\nå®‰è£…ä¾èµ–ï¼š\npip install python-json-logger opentelemetry-api opentelemetry-sdk\u003c/p\u003e","title":"ç»“æ„åŒ–æ—¥å¿—å’Œè¿½è¸ª"},{"content":"Introduction æˆ‘ç°åœ¨æƒ³è¦æ„å»ºä¸€ä¸ªå¯ä»¥æ ‘çŠ¶,æˆ–è€…å›¾çŠ¶è¿›è¡Œé—®ç­”çš„aiç³»ç»Ÿ,è€Œä¸æ˜¯ä¼ ç»Ÿçš„å•çº¿å¼å¯¹è¯æµç¨‹\næ¢ç´¢ å¼€æºæ¡†æ¶æ¢ç´¢ flowise ","permalink":"http://localhost:1313/jeanblog/posts/%E5%85%B3%E4%BA%8Eai%E5%8A%A9%E6%89%8B%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E7%9A%84%E6%96%B0%E6%9E%84%E5%BB%BA%E6%96%B9%E6%A1%88%E6%9E%84%E6%80%9D/","summary":"\u003ch1 id=\"introduction\"\u003eIntroduction\u003c/h1\u003e\n\u003cp\u003eæˆ‘ç°åœ¨æƒ³è¦æ„å»ºä¸€ä¸ªå¯ä»¥æ ‘çŠ¶,æˆ–è€…å›¾çŠ¶è¿›è¡Œé—®ç­”çš„aiç³»ç»Ÿ,è€Œä¸æ˜¯ä¼ ç»Ÿçš„å•çº¿å¼å¯¹è¯æµç¨‹\u003c/p\u003e\n\u003ch1 id=\"æ¢ç´¢\"\u003eæ¢ç´¢\u003c/h1\u003e\n\u003ch2 id=\"å¼€æºæ¡†æ¶æ¢ç´¢\"\u003eå¼€æºæ¡†æ¶æ¢ç´¢\u003c/h2\u003e\n\u003ch3 id=\"flowise\"\u003eflowise\u003c/h3\u003e","title":"å…³äºaiåŠ©æ‰‹å‰ç«¯ç•Œé¢çš„æ–°æ„å»ºæ–¹æ¡ˆæ„æ€"},{"content":"å¦‚ä½•å°½å¯èƒ½æŒæ¡ä¸€ç¯‡è®ºæ–‡ä¸­çš„æ‰€æœ‰çŸ¥è¯† ç»“è®º æˆ‘ä»¬è¦çœŸæ­£\u0026quot;æŒæ¡\u0026quot;ä¸€ç¯‡è®ºæ–‡,ä¸æ˜¯è¯»ä¸€éå°±è¡Œ,è€Œæ˜¯æŒ‰ç…§ç°æœ‰ç»“æ„æŠŠè®ºæ–‡è¿›è¡Œæ‹†è§£,éªŒè¯,é‡æ„å¹¶æŠŠå…³é”®ç‚¹è½¬åŒ–ä¸ºä½ è‡ªå·±çš„è¡¨è¿°æˆ–è€…å®ç°.ç›®æ ‡æ˜¯:å¯ä»¥åœ¨5åˆ†é’Ÿå†…è®²æ¸…æ¥šæ ¸å¿ƒè´¡çŒ®,å¯ä»¥æ‰‹æ¨å…³é”®å…¬å¼,å¯ä»¥å®ç°å¹¶å¤ç°ä¸€ä¸ªæ ¸å¿ƒå®éªŒ\nåŸç†å’ŒèƒŒæ™¯ è®ºæ–‡æ˜¯ä½œè€…å¯¹é—®é¢˜çš„å‹ç¼©è¡¨è¾¾ï¼šçœç•¥èƒŒæ™¯ã€å®éªŒç»†èŠ‚ã€ç›´è§‰å’Œå¤±è´¥ã€‚è¦æŒæ¡ï¼Œéœ€è¦æŠŠè¿™ç§é«˜å¯†åº¦ä¿¡æ¯â€œè§£å‹â€å›ä½ è‡ªå·±çš„çŸ¥è¯†ç½‘ç»œï¼šç†è§£èƒŒæ™¯å‡è®¾ã€æ•°å­¦æ¨å¯¼ã€å·¥ç¨‹å®ç°ã€ä»¥åŠç»“è®ºçš„é€‚ç”¨èŒƒå›´ã€‚è¿™æ ·æ‰èƒ½åˆ¤æ–­ä»€ä¹ˆæ—¶å€™èƒ½ç”¨ï¼Œä»€ä¹ˆæ—¶å€™ä¸èƒ½ç”¨ï¼Œä»€ä¹ˆæ—¶å€™è¦æ”¹è¿›ã€‚\nå…·ä½“æ­¥éª¤ ä¸è¦æŠŠè®ºæ–‡å½“æˆâ€œæƒå¨â€ï¼ŒæŠŠå®ƒå½“æˆä¸€ä¸ªå¯ä»¥æµ‹éªŒçš„ä¸»å¼ ï¼šæŠŠå£°æ˜åˆ†è§£æˆå¯éªŒè¯çš„å°æ–­è¨€ï¼Œç„¶åå»éªŒè¯å®ƒã€‚æŒæ¡ä¸æ˜¯è®°ä½è®ºæ–‡çš„æ–‡å­—ï¼Œè€Œæ˜¯æŠŠå®ƒå˜ä¸ºä½ è‡ªå·±èƒ½ç”¨çš„å·¥å…·ã€‚ä¸è¦å·æ‡’ â€” çœŸæ­£çš„ç†è§£éœ€è¦åšäº‹ï¼šæ¨å¯¼ã€å®ç°ã€å¯¹æ¯”ã€è§£é‡Šã€‚ç°åœ¨å°±æŒ‘ä¸€ç¯‡ï¼ŒæŒ‰ä¸Šé¢çš„ä¸‰å¤©è®¡åˆ’å¼€å§‹ã€‚\nå‡†å¤‡ä¸é¢„è¯»ï¼ˆ30â€“60 åˆ†é’Ÿï¼‰ è¯»é¢˜ç›®ã€æ‘˜è¦ã€ç»“è®ºã€å›¾è¡¨ï¼ˆä¸å¿…ç»†è¯»æ­£æ–‡ï¼‰ã€‚ç›®çš„ï¼šæŠ“ä½â€œè¿™ç¯‡è®ºæ–‡åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€ç»™å‡ºäº†ä»€ä¹ˆç»“æœâ€ã€‚ å¿«é€Ÿæ‰«ä¸€éå¼•è¨€å’Œè´¡çŒ®åˆ—è¡¨ï¼Œè®°å½•ä½œè€…å£°ç§°çš„ä¸‰ä¸ªå…³é”®ç‚¹ã€‚ æ£€æŸ¥å‚è€ƒæ–‡çŒ®ï¼Œç¡®å®šæ˜¯å¦éœ€è¦è¡¥è¯»å“ªäº›åŸºç¡€ææ–™ï¼ˆæ¯”å¦‚æŸä¸ªç»å…¸ç®—æ³•æˆ–è¯æ˜ï¼‰ã€‚ ç²¾è¯»ï¼ˆ2â€“6 å°æ—¶ï¼‰ é€æ®µç»†è¯»æ–¹æ³•/ç†è®ºéƒ¨åˆ†ã€‚é‡åˆ°å…¬å¼ï¼Œå°è¯•æ‰‹æ¨å…³é”®æ¨å¯¼ï¼ˆç”¨çº¸å’Œç¬”ï¼‰ã€‚ æŠŠæ¯ä¸ªé‡è¦ç¬¦å·å†™æˆè¡¨æ ¼ï¼Œå…å¾—æ··æ·†ã€‚å¯¹ç®—æ³•ï¼Œå†™ä¼ªä»£ç ã€‚ æ ‡æ³¨ä¸ç†è§£/å¯ç–‘çš„åœ°æ–¹ï¼Œå½¢æˆé—®é¢˜æ¸…å•ã€‚ è§£æ„ä¸é‡æ„ï¼ˆåŠå¤©åˆ°å‡ å¤©ï¼‰ æŠŠè®ºæ–‡åˆ†è§£ä¸ºï¼šé—®é¢˜å®šä¹‰ã€å…³é”®å‡è®¾ã€æ–¹æ³•/ç®—æ³•ã€ä¸»è¦å®šç†ã€å®éªŒè®¾ç½®ã€ç»“è®ºä¸é™åˆ¶ã€‚ ä¸ºæ¯ä¸€éƒ¨åˆ†å†™ä¸€æ®µ 2â€“3 å¥çš„â€œæˆ‘èƒ½è®²ç»™åŒé¢†åŸŸçš„äººâ€çš„è§£é‡Šï¼ˆç”¨ä½ è‡ªå·±çš„è¯ï¼‰ã€‚ å°†ç®—æ³•å®ç°ä¸ºæœ€å°å¯è¿è¡Œç‰ˆæœ¬ï¼ˆSee å®ç°å»ºè®®ï¼‰ã€‚ å®ç°ä¸å¤ç°ï¼ˆå‡ å°æ—¶åˆ°å‡ å¤©ï¼‰ ä¼˜å…ˆå®ç°æœ€èƒ½ä½“ç°è´¡çŒ®çš„éƒ¨åˆ†ï¼ˆä¸€ä¸ªç®—æ³•/ä¸€ä¸ªæ¨¡å‹/ä¸€ä¸ªå…³é”®å®éªŒï¼‰ã€‚ ç”¨å°è§„æ¨¡åˆæˆæ•°æ®å…ˆåšè°ƒè¯•ï¼Œå†è·‘è®ºæ–‡çš„è®¾ç½®ã€‚ å¿…è¦å·¥å…·/æ¨¡æ¿ç¤ºä¾‹ï¼š æ¨èç¯å¢ƒï¼šPython + Jupyter/Colabï¼Œæˆ– C++/Rustï¼ˆå¦‚æœæ˜¯ç³»ç»Ÿ/æ€§èƒ½è®ºæ–‡ï¼‰ã€‚ å¸¸ç”¨åº“ï¼šnumpy/pandas/matplotlib/scikit-learn/torch/tensorflowã€‚ ç¤ºä¾‹ï¼šæŠŠè®ºæ–‡ç®—æ³•å†™æˆ Python å‡½æ•°ï¼ˆä¼ªä»£ç è½¬å®ç°ï¼‰ã€‚ é€è¡Œæ³¨é‡Šå·²å†™åœ¨å‡½æ•° docstring å’Œä»£ç ä¸­ã€‚æŠŠè®ºæ–‡ä¸­çš„ç¬¦å·æ˜ å°„åˆ°ä»£ç å˜é‡ï¼Œè®°å½•åœ¨æ³¨é‡Šé‡Œã€‚ ç»˜å›¾ä¸ç»“æœå¯¹æ¯” é‡ç°å…³é”®å›¾è¡¨ï¼ˆè®­ç»ƒæ›²çº¿ã€è¯¯å·®è¡¨ï¼‰ã€‚å¦‚æœä¸èƒ½ä¸€æ¬¡è·‘å‡ºè®ºæ–‡ç»“æœï¼Œå…ˆéªŒè¯è¶‹åŠ¿å’Œç›¸å¯¹å¯¹æ¯”ï¼ˆä¾‹å¦‚æ¯”åŸºçº¿é«˜å¤šå°‘ï¼‰ã€‚ åŠ å…¥æ–­è¨€å’Œå•å…ƒæµ‹è¯•ï¼šä¾‹å¦‚ï¼Œå¯¹å·²çŸ¥é—®é¢˜ï¼ˆåˆæˆæ•°æ®ï¼‰çš„è¡Œä¸ºåº”ä¸ç†è®ºä¸€è‡´ã€‚ æ¶ˆåŒ–ä¸è¾“å‡ºï¼ˆæŒç»­ï¼‰ æŠŠå…³é”®ç‚¹å†™æˆä¸€é¡µâ€œcheatsheetâ€æˆ–ä¸€ç¯‡çŸ­åšå®¢ï¼Œç›®æ ‡ï¼šåœ¨äº”åˆ†é’Ÿå†…è®©äººç†è§£ã€‚ å°†éš¾ç‚¹åšæˆ Anki å¡ç‰‡ï¼ˆé—®é¢˜ï¼šå…³é”®å‡è®¾ã€å®šç†æ¡ä»¶ã€å…¬å¼æ¨å¯¼æ­¥éª¤ï¼‰ã€‚ å°è¯•è§£é‡Šç»™é™Œç”Ÿäººæˆ–å†™è¯»ä¹¦æŠ¥å‘Šã€‚ å·¥å…·æ¨èï¼ˆå®æ“ï¼‰ æ–‡çŒ®ç®¡ç†ï¼šZotero / Mendeley ç¬”è®°ä¸çŸ¥è¯†åº“ï¼šObsidian / Notion / org-mode ä»£ç ä¸å®éªŒï¼šGit + Jupyter/Colab + Dockerï¼ˆå¿…è¦æ—¶å¤ç°ç¯å¢ƒï¼‰ æ–‡æœ¬å¤„ç†ï¼špdftotextã€pdfgrepã€grepã€ripgrep å¸¸è§é”™è¯¯ é”™è¯¯ï¼šåªè¯»ä¸åšï¼ˆåªçœ‹ç»“è®ºï¼Œä¸æ¨å¯¼ã€ä¸å®ç°ï¼‰ã€‚ è°ƒè¯•ï¼šå¼ºåˆ¶è‡ªå·±å®ç°æˆ–è‡³å°‘å†™ä¼ªä»£ç å¹¶æ‰‹æ¨ä¸€éã€‚ é”™è¯¯ï¼šå¿½è§†å‡è®¾/è¾¹ç•Œæ¡ä»¶ï¼ˆåœ¨ä¸æ»¡è¶³å‡è®¾çš„åœ°æ–¹ç›´æ¥ä½¿ç”¨æ–¹æ³•ï¼‰ã€‚ è°ƒè¯•ï¼šåˆ—å‡ºæ‰€æœ‰å‡è®¾ï¼Œæ„é€ è¿åå‡è®¾çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè§‚å¯Ÿå¤±è´¥æ¨¡å¼ã€‚ é”™è¯¯ï¼šæŠŠä½œè€…çš„å®ç°ç­‰åŒäºè®ºæ–‡ä¸­çš„æ–¹æ³•ï¼ˆä»£ç ç»†èŠ‚ã€è¶…å‚å¸¸è¢«çœç•¥ï¼‰ã€‚ è°ƒè¯•ï¼šé˜…è¯»ä½œè€…ä»£ç ï¼ˆå¦‚å¼€æºï¼‰ï¼Œæ¯”å¯¹è®ºæ–‡æè¿°ï¼Œè®°å½•å·®å¼‚ã€‚ é”™è¯¯ï¼šè¿‡æ—©è¿½æ±‚è®ºæ–‡ç»“æœçš„æ•°å€¼ç²¾ç¡®å¤ç°ã€‚ è°ƒè¯•ï¼šå…ˆéªŒè¯å¯å¤åˆ¶çš„è¶‹åŠ¿ï¼Œå†é€æ­¥ç»†åŒ–è¶…å‚/å®ç°ç»†èŠ‚ã€‚ é”™è¯¯ï¼šæ•°å­¦æ¨å¯¼åªçœ‹ç»“è®ºå…¬å¼ï¼ŒæœªéªŒè¯æ¯ä¸€æ­¥æ˜¯å¦åˆæ³•ã€‚ è°ƒè¯•ï¼šé€è¡Œæ‰‹æ¨ï¼Œæ‰¾å‡ºéšå«æ­¥éª¤æˆ–å¼•ç”¨çš„å¼•ç†ï¼Œè¡¥è¯»æ¥æºã€‚ éªŒè¯æ–¹æ³• èƒ½åœ¨äº”åˆ†é’Ÿå†…å£è¿°è®ºæ–‡çš„æ ¸å¿ƒè´¡çŒ®ã€é€‚ç”¨åœºæ™¯ä¸é™åˆ¶ï¼ˆä¸çœ‹ç¨¿ï¼‰ã€‚ èƒ½æ‰‹åŠ¨æ¨å¯¼å…³é”®å…¬å¼æˆ–é‡å†™è¯æ˜çš„ä¸»è¦æ­¥éª¤ï¼ˆçº¸ç¬”å®Œæˆï¼‰ã€‚ èƒ½å®ç°ä¸€ä¸ªæœ€å°å·¥ä½œä¾‹å­ï¼Œå¾—åˆ°ä¸è®ºæ–‡ä¸€è‡´çš„è¶‹åŠ¿æˆ–æ•°å€¼ï¼ˆè‡³å°‘åœ¨åˆæˆæ•°æ®ä¸Šï¼‰ã€‚ èƒ½å›ç­”ä»¥ä¸‹é—®é¢˜ï¼šä½œè€…çš„å…³é”®å‡è®¾æ˜¯ä»€ä¹ˆï¼Ÿç»“æœå¦‚ä½•ä¾èµ–è¿™äº›å‡è®¾ï¼Ÿæœ‰å“ªäº›æ½œåœ¨å¤±è´¥æ¨¡å¼ï¼Ÿ èƒ½æŠŠè®ºæ–‡çš„æƒ³æ³•åº”ç”¨åˆ°ä¸€ä¸ªç¨æœ‰ä¸åŒçš„é—®é¢˜ä¸Šå¹¶è§‚å¯Ÿç»“æœï¼ˆè¿ç§»èƒ½åŠ›ï¼‰ã€‚\n","permalink":"http://localhost:1313/jeanblog/posts/mastering-paper/","summary":"\u003ch1 id=\"å¦‚ä½•å°½å¯èƒ½æŒæ¡ä¸€ç¯‡è®ºæ–‡ä¸­çš„æ‰€æœ‰çŸ¥è¯†\"\u003eå¦‚ä½•å°½å¯èƒ½æŒæ¡ä¸€ç¯‡è®ºæ–‡ä¸­çš„æ‰€æœ‰çŸ¥è¯†\u003c/h1\u003e\n\u003ch1 id=\"ç»“è®º\"\u003eç»“è®º\u003c/h1\u003e\n\u003cp\u003eæˆ‘ä»¬è¦çœŸæ­£\u0026quot;æŒæ¡\u0026quot;ä¸€ç¯‡è®ºæ–‡,ä¸æ˜¯è¯»ä¸€éå°±è¡Œ,è€Œæ˜¯æŒ‰ç…§ç°æœ‰ç»“æ„æŠŠè®ºæ–‡è¿›è¡Œæ‹†è§£,éªŒè¯,é‡æ„å¹¶æŠŠå…³é”®ç‚¹è½¬åŒ–ä¸ºä½ è‡ªå·±çš„è¡¨è¿°æˆ–è€…å®ç°.ç›®æ ‡æ˜¯:å¯ä»¥åœ¨5åˆ†é’Ÿå†…è®²æ¸…æ¥šæ ¸å¿ƒè´¡çŒ®,å¯ä»¥æ‰‹æ¨å…³é”®å…¬å¼,å¯ä»¥å®ç°å¹¶å¤ç°ä¸€ä¸ªæ ¸å¿ƒå®éªŒ\u003c/p\u003e\n\u003ch1 id=\"åŸç†å’ŒèƒŒæ™¯\"\u003eåŸç†å’ŒèƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eè®ºæ–‡æ˜¯ä½œè€…å¯¹é—®é¢˜çš„å‹ç¼©è¡¨è¾¾ï¼šçœç•¥èƒŒæ™¯ã€å®éªŒç»†èŠ‚ã€ç›´è§‰å’Œå¤±è´¥ã€‚è¦æŒæ¡ï¼Œéœ€è¦æŠŠè¿™ç§é«˜å¯†åº¦ä¿¡æ¯â€œè§£å‹â€å›ä½ è‡ªå·±çš„çŸ¥è¯†ç½‘ç»œï¼šç†è§£èƒŒæ™¯å‡è®¾ã€æ•°å­¦æ¨å¯¼ã€å·¥ç¨‹å®ç°ã€ä»¥åŠç»“è®ºçš„é€‚ç”¨èŒƒå›´ã€‚è¿™æ ·æ‰èƒ½åˆ¤æ–­ä»€ä¹ˆæ—¶å€™èƒ½ç”¨ï¼Œä»€ä¹ˆæ—¶å€™ä¸èƒ½ç”¨ï¼Œä»€ä¹ˆæ—¶å€™è¦æ”¹è¿›ã€‚\u003c/p\u003e\n\u003ch1 id=\"å…·ä½“æ­¥éª¤\"\u003eå…·ä½“æ­¥éª¤\u003c/h1\u003e\n\u003cp\u003eä¸è¦æŠŠè®ºæ–‡å½“æˆâ€œæƒå¨â€ï¼ŒæŠŠå®ƒå½“æˆä¸€ä¸ªå¯ä»¥æµ‹éªŒçš„ä¸»å¼ ï¼šæŠŠå£°æ˜åˆ†è§£æˆå¯éªŒè¯çš„å°æ–­è¨€ï¼Œç„¶åå»éªŒè¯å®ƒã€‚æŒæ¡ä¸æ˜¯è®°ä½è®ºæ–‡çš„æ–‡å­—ï¼Œè€Œæ˜¯æŠŠå®ƒå˜ä¸ºä½ è‡ªå·±èƒ½ç”¨çš„å·¥å…·ã€‚ä¸è¦å·æ‡’ â€” çœŸæ­£çš„ç†è§£éœ€è¦åšäº‹ï¼šæ¨å¯¼ã€å®ç°ã€å¯¹æ¯”ã€è§£é‡Šã€‚ç°åœ¨å°±æŒ‘ä¸€ç¯‡ï¼ŒæŒ‰ä¸Šé¢çš„ä¸‰å¤©è®¡åˆ’å¼€å§‹ã€‚\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eå‡†å¤‡ä¸é¢„è¯»ï¼ˆ30â€“60 åˆ†é’Ÿï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eè¯»é¢˜ç›®ã€æ‘˜è¦ã€ç»“è®ºã€å›¾è¡¨ï¼ˆä¸å¿…ç»†è¯»æ­£æ–‡ï¼‰ã€‚ç›®çš„ï¼šæŠ“ä½â€œè¿™ç¯‡è®ºæ–‡åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€ç»™å‡ºäº†ä»€ä¹ˆç»“æœâ€ã€‚\u003c/li\u003e\n\u003cli\u003eå¿«é€Ÿæ‰«ä¸€éå¼•è¨€å’Œè´¡çŒ®åˆ—è¡¨ï¼Œè®°å½•ä½œè€…å£°ç§°çš„ä¸‰ä¸ªå…³é”®ç‚¹ã€‚\u003c/li\u003e\n\u003cli\u003eæ£€æŸ¥å‚è€ƒæ–‡çŒ®ï¼Œç¡®å®šæ˜¯å¦éœ€è¦è¡¥è¯»å“ªäº›åŸºç¡€ææ–™ï¼ˆæ¯”å¦‚æŸä¸ªç»å…¸ç®—æ³•æˆ–è¯æ˜ï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eç²¾è¯»ï¼ˆ2â€“6 å°æ—¶ï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eé€æ®µç»†è¯»æ–¹æ³•/ç†è®ºéƒ¨åˆ†ã€‚é‡åˆ°å…¬å¼ï¼Œå°è¯•æ‰‹æ¨å…³é”®æ¨å¯¼ï¼ˆç”¨çº¸å’Œç¬”ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eæŠŠæ¯ä¸ªé‡è¦ç¬¦å·å†™æˆè¡¨æ ¼ï¼Œå…å¾—æ··æ·†ã€‚å¯¹ç®—æ³•ï¼Œå†™ä¼ªä»£ç ã€‚\u003c/li\u003e\n\u003cli\u003eæ ‡æ³¨ä¸ç†è§£/å¯ç–‘çš„åœ°æ–¹ï¼Œå½¢æˆé—®é¢˜æ¸…å•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eè§£æ„ä¸é‡æ„ï¼ˆåŠå¤©åˆ°å‡ å¤©ï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eæŠŠè®ºæ–‡åˆ†è§£ä¸ºï¼šé—®é¢˜å®šä¹‰ã€å…³é”®å‡è®¾ã€æ–¹æ³•/ç®—æ³•ã€ä¸»è¦å®šç†ã€å®éªŒè®¾ç½®ã€ç»“è®ºä¸é™åˆ¶ã€‚\u003c/li\u003e\n\u003cli\u003eä¸ºæ¯ä¸€éƒ¨åˆ†å†™ä¸€æ®µ 2â€“3 å¥çš„â€œæˆ‘èƒ½è®²ç»™åŒé¢†åŸŸçš„äººâ€çš„è§£é‡Šï¼ˆç”¨ä½ è‡ªå·±çš„è¯ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eå°†ç®—æ³•å®ç°ä¸ºæœ€å°å¯è¿è¡Œç‰ˆæœ¬ï¼ˆSee å®ç°å»ºè®®ï¼‰ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003eå®ç°ä¸å¤ç°ï¼ˆå‡ å°æ—¶åˆ°å‡ å¤©ï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eä¼˜å…ˆå®ç°æœ€èƒ½ä½“ç°è´¡çŒ®çš„éƒ¨åˆ†ï¼ˆä¸€ä¸ªç®—æ³•/ä¸€ä¸ªæ¨¡å‹/ä¸€ä¸ªå…³é”®å®éªŒï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eç”¨å°è§„æ¨¡åˆæˆæ•°æ®å…ˆåšè°ƒè¯•ï¼Œå†è·‘è®ºæ–‡çš„è®¾ç½®ã€‚\u003c/li\u003e\n\u003cli\u003eå¿…è¦å·¥å…·/æ¨¡æ¿ç¤ºä¾‹ï¼š\u003c/li\u003e\n\u003cli\u003eæ¨èç¯å¢ƒï¼šPython + Jupyter/Colabï¼Œæˆ– C++/Rustï¼ˆå¦‚æœæ˜¯ç³»ç»Ÿ/æ€§èƒ½è®ºæ–‡ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eå¸¸ç”¨åº“ï¼šnumpy/pandas/matplotlib/scikit-learn/torch/tensorflowã€‚\u003c/li\u003e\n\u003cli\u003eç¤ºä¾‹ï¼šæŠŠè®ºæ–‡ç®—æ³•å†™æˆ Python å‡½æ•°ï¼ˆä¼ªä»£ç è½¬å®ç°ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eé€è¡Œæ³¨é‡Šå·²å†™åœ¨å‡½æ•° docstring å’Œä»£ç ä¸­ã€‚æŠŠè®ºæ–‡ä¸­çš„ç¬¦å·æ˜ å°„åˆ°ä»£ç å˜é‡ï¼Œè®°å½•åœ¨æ³¨é‡Šé‡Œã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"5\"\u003e\n\u003cli\u003eç»˜å›¾ä¸ç»“æœå¯¹æ¯”\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eé‡ç°å…³é”®å›¾è¡¨ï¼ˆè®­ç»ƒæ›²çº¿ã€è¯¯å·®è¡¨ï¼‰ã€‚å¦‚æœä¸èƒ½ä¸€æ¬¡è·‘å‡ºè®ºæ–‡ç»“æœï¼Œå…ˆéªŒè¯è¶‹åŠ¿å’Œç›¸å¯¹å¯¹æ¯”ï¼ˆä¾‹å¦‚æ¯”åŸºçº¿é«˜å¤šå°‘ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eåŠ å…¥æ–­è¨€å’Œå•å…ƒæµ‹è¯•ï¼šä¾‹å¦‚ï¼Œå¯¹å·²çŸ¥é—®é¢˜ï¼ˆåˆæˆæ•°æ®ï¼‰çš„è¡Œä¸ºåº”ä¸ç†è®ºä¸€è‡´ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"6\"\u003e\n\u003cli\u003eæ¶ˆåŒ–ä¸è¾“å‡ºï¼ˆæŒç»­ï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eæŠŠå…³é”®ç‚¹å†™æˆä¸€é¡µâ€œcheatsheetâ€æˆ–ä¸€ç¯‡çŸ­åšå®¢ï¼Œç›®æ ‡ï¼šåœ¨äº”åˆ†é’Ÿå†…è®©äººç†è§£ã€‚\u003c/li\u003e\n\u003cli\u003eå°†éš¾ç‚¹åšæˆ Anki å¡ç‰‡ï¼ˆé—®é¢˜ï¼šå…³é”®å‡è®¾ã€å®šç†æ¡ä»¶ã€å…¬å¼æ¨å¯¼æ­¥éª¤ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eå°è¯•è§£é‡Šç»™é™Œç”Ÿäººæˆ–å†™è¯»ä¹¦æŠ¥å‘Šã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"7\"\u003e\n\u003cli\u003eå·¥å…·æ¨èï¼ˆå®æ“ï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eæ–‡çŒ®ç®¡ç†ï¼šZotero / Mendeley\u003c/li\u003e\n\u003cli\u003eç¬”è®°ä¸çŸ¥è¯†åº“ï¼šObsidian / Notion / org-mode\u003c/li\u003e\n\u003cli\u003eä»£ç ä¸å®éªŒï¼šGit + Jupyter/Colab + Dockerï¼ˆå¿…è¦æ—¶å¤ç°ç¯å¢ƒï¼‰\u003c/li\u003e\n\u003cli\u003eæ–‡æœ¬å¤„ç†ï¼špdftotextã€pdfgrepã€grepã€ripgrep\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"å¸¸è§é”™è¯¯\"\u003eå¸¸è§é”™è¯¯\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eé”™è¯¯ï¼šåªè¯»ä¸åšï¼ˆåªçœ‹ç»“è®ºï¼Œä¸æ¨å¯¼ã€ä¸å®ç°ï¼‰ã€‚\u003c/li\u003e\n\u003cli\u003eè°ƒè¯•ï¼šå¼ºåˆ¶è‡ªå·±å®ç°æˆ–è‡³å°‘å†™ä¼ªä»£ç å¹¶æ‰‹æ¨ä¸€éã€‚\u003c/li\u003e\n\u003cli\u003eé”™è¯¯ï¼šå¿½è§†å‡è®¾/è¾¹ç•Œæ¡ä»¶ï¼ˆåœ¨ä¸æ»¡è¶³å‡è®¾çš„åœ°æ–¹ç›´æ¥ä½¿ç”¨æ–¹æ³•ï¼‰ã€‚\nè°ƒè¯•ï¼šåˆ—å‡ºæ‰€æœ‰å‡è®¾ï¼Œæ„é€ è¿åå‡è®¾çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè§‚å¯Ÿå¤±è´¥æ¨¡å¼ã€‚\u003c/li\u003e\n\u003cli\u003eé”™è¯¯ï¼šæŠŠä½œè€…çš„å®ç°ç­‰åŒäºè®ºæ–‡ä¸­çš„æ–¹æ³•ï¼ˆä»£ç ç»†èŠ‚ã€è¶…å‚å¸¸è¢«çœç•¥ï¼‰ã€‚\nè°ƒè¯•ï¼šé˜…è¯»ä½œè€…ä»£ç ï¼ˆå¦‚å¼€æºï¼‰ï¼Œæ¯”å¯¹è®ºæ–‡æè¿°ï¼Œè®°å½•å·®å¼‚ã€‚\u003c/li\u003e\n\u003cli\u003eé”™è¯¯ï¼šè¿‡æ—©è¿½æ±‚è®ºæ–‡ç»“æœçš„æ•°å€¼ç²¾ç¡®å¤ç°ã€‚\nè°ƒè¯•ï¼šå…ˆéªŒè¯å¯å¤åˆ¶çš„è¶‹åŠ¿ï¼Œå†é€æ­¥ç»†åŒ–è¶…å‚/å®ç°ç»†èŠ‚ã€‚\u003c/li\u003e\n\u003cli\u003eé”™è¯¯ï¼šæ•°å­¦æ¨å¯¼åªçœ‹ç»“è®ºå…¬å¼ï¼ŒæœªéªŒè¯æ¯ä¸€æ­¥æ˜¯å¦åˆæ³•ã€‚\nè°ƒè¯•ï¼šé€è¡Œæ‰‹æ¨ï¼Œæ‰¾å‡ºéšå«æ­¥éª¤æˆ–å¼•ç”¨çš„å¼•ç†ï¼Œè¡¥è¯»æ¥æºã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"éªŒè¯æ–¹æ³•\"\u003eéªŒè¯æ–¹æ³•\u003c/h1\u003e\n\u003cp\u003eèƒ½åœ¨äº”åˆ†é’Ÿå†…å£è¿°è®ºæ–‡çš„æ ¸å¿ƒè´¡çŒ®ã€é€‚ç”¨åœºæ™¯ä¸é™åˆ¶ï¼ˆä¸çœ‹ç¨¿ï¼‰ã€‚\nèƒ½æ‰‹åŠ¨æ¨å¯¼å…³é”®å…¬å¼æˆ–é‡å†™è¯æ˜çš„ä¸»è¦æ­¥éª¤ï¼ˆçº¸ç¬”å®Œæˆï¼‰ã€‚\nèƒ½å®ç°ä¸€ä¸ªæœ€å°å·¥ä½œä¾‹å­ï¼Œå¾—åˆ°ä¸è®ºæ–‡ä¸€è‡´çš„è¶‹åŠ¿æˆ–æ•°å€¼ï¼ˆè‡³å°‘åœ¨åˆæˆæ•°æ®ä¸Šï¼‰ã€‚\nèƒ½å›ç­”ä»¥ä¸‹é—®é¢˜ï¼šä½œè€…çš„å…³é”®å‡è®¾æ˜¯ä»€ä¹ˆï¼Ÿç»“æœå¦‚ä½•ä¾èµ–è¿™äº›å‡è®¾ï¼Ÿæœ‰å“ªäº›æ½œåœ¨å¤±è´¥æ¨¡å¼ï¼Ÿ\nèƒ½æŠŠè®ºæ–‡çš„æƒ³æ³•åº”ç”¨åˆ°ä¸€ä¸ªç¨æœ‰ä¸åŒçš„é—®é¢˜ä¸Šå¹¶è§‚å¯Ÿç»“æœï¼ˆè¿ç§»èƒ½åŠ›ï¼‰ã€‚\u003c/p\u003e","title":"mastering paper"},{"content":"Introduction Mermaidæ˜¯ä¸€ä¸ªç”¨äºä½¿ç”¨ä»£ç åˆ›å»ºå›¾åƒçš„æ¡†æ¶,ä»Šå¤©çš„åšå®¢,æˆ‘ä»¬å°†ä¼šç®€å•ä»‹ç»å¦‚ä½•åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå®‰è£…ç›¸å…³çš„æ¡†æ¶,å¹¶å¯¹ä»£ç è¿›è¡Œæ¸²æŸ“ç”Ÿæˆå›¾åƒ\nå…·ä½“æ­¥éª¤ å¦‚ä½•å®‰è£…æ¸²æŸ“æ¡†æ¶ ä½¿ç”¨\nnpm install -g @mermaid-js/mermaid-cli å°±å¯ä»¥å®‰è£…\néœ€è¦æ³¨æ„çš„æ˜¯è¯¥æ¡†æ¶ä½¿ç”¨çš„npmç‰ˆæœ¬éœ€è¦å¤§äº20,æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ‡æ¢npmç‰ˆæœ¬,æ¨èä½¿ç”¨nvmç®¡ç†npmçš„ç‰ˆæœ¬\nå¦‚æœæ²¡æœ‰nvmçš„è¯,ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤è¿›è¡Œå®‰è£…\ncurl -o https://raw.githubusercontent.com/nvm-sh/nvim/v0.39.4/install.sh | bash ç„¶åå¯¹shellè¿›è¡Œé‡å¯\nç„¶åä½¿ç”¨\nnvm install 20 nvm use 20 nvm alias default 20 è¿›è¡Œå®‰è£…,å¹¶æŠŠé»˜è®¤npmåˆ‡æ¢ä¸º20\nå¯ä»¥ä½¿ç”¨\nnode -v npm -v ç¡®è®¤ç‰ˆæœ¬\nå¦‚ä½•è¿›è¡Œæ¸²æŸ“ å°†éœ€è¦æ¸²æŸ“çš„ä»£ç æ”¾ç½®åœ¨ä»¥.mmdç»“å°¾çš„æ–‡ä»¶ä¸­\nç„¶åä½¿ç”¨\nmmdc -i diagrams/example.mmd -o images/example.svg å³å¯\n","permalink":"http://localhost:1313/jeanblog/posts/%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BAmermaid%E5%9B%BE%E5%83%8F%E5%B9%B6%E8%BF%9B%E8%A1%8C%E7%BC%96%E8%BE%91/","summary":"\u003ch1 id=\"introduction\"\u003eIntroduction\u003c/h1\u003e\n\u003cp\u003eMermaidæ˜¯ä¸€ä¸ªç”¨äºä½¿ç”¨ä»£ç åˆ›å»ºå›¾åƒçš„æ¡†æ¶,ä»Šå¤©çš„åšå®¢,æˆ‘ä»¬å°†ä¼šç®€å•ä»‹ç»å¦‚ä½•åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå®‰è£…ç›¸å…³çš„æ¡†æ¶,å¹¶å¯¹ä»£ç è¿›è¡Œæ¸²æŸ“ç”Ÿæˆå›¾åƒ\u003c/p\u003e\n\u003ch1 id=\"å…·ä½“æ­¥éª¤\"\u003eå…·ä½“æ­¥éª¤\u003c/h1\u003e\n\u003ch2 id=\"å¦‚ä½•å®‰è£…æ¸²æŸ“æ¡†æ¶\"\u003eå¦‚ä½•å®‰è£…æ¸²æŸ“æ¡†æ¶\u003c/h2\u003e\n\u003cp\u003eä½¿ç”¨\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enpm install -g @mermaid-js/mermaid-cli\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå°±å¯ä»¥å®‰è£…\u003c/p\u003e\n\u003cp\u003eéœ€è¦æ³¨æ„çš„æ˜¯è¯¥æ¡†æ¶ä½¿ç”¨çš„npmç‰ˆæœ¬éœ€è¦å¤§äº20,æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ‡æ¢npmç‰ˆæœ¬,æ¨èä½¿ç”¨nvmç®¡ç†npmçš„ç‰ˆæœ¬\u003c/p\u003e\n\u003cp\u003eå¦‚æœæ²¡æœ‰nvmçš„è¯,ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤è¿›è¡Œå®‰è£…\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl -o https://raw.githubusercontent.com/nvm-sh/nvim/v0.39.4/install.sh | bash\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eç„¶åå¯¹shellè¿›è¡Œé‡å¯\u003c/p\u003e\n\u003cp\u003eç„¶åä½¿ç”¨\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003envm install \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003envm use \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003envm alias default \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿›è¡Œå®‰è£…,å¹¶æŠŠé»˜è®¤npmåˆ‡æ¢ä¸º20\u003c/p\u003e\n\u003cp\u003eå¯ä»¥ä½¿ç”¨\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003enode -v\nnpm -v\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eç¡®è®¤ç‰ˆæœ¬\u003c/p\u003e\n\u003ch2 id=\"å¦‚ä½•è¿›è¡Œæ¸²æŸ“\"\u003eå¦‚ä½•è¿›è¡Œæ¸²æŸ“\u003c/h2\u003e\n\u003cp\u003eå°†éœ€è¦æ¸²æŸ“çš„ä»£ç æ”¾ç½®åœ¨ä»¥.mmdç»“å°¾çš„æ–‡ä»¶ä¸­\u003c/p\u003e\n\u003cp\u003eç„¶åä½¿ç”¨\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emmdc -i diagrams/example.mmd -o images/example.svg\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå³å¯\u003c/p\u003e","title":"å¦‚ä½•åˆ›å»ºmermaidå›¾åƒå¹¶è¿›è¡Œç¼–è¾‘"},{"content":"è¿™ç¯‡è®ºæ–‡è§£å†³äº†ä»€ä¹ˆé—®é¢˜,ç»™å‡ºäº†ä»€ä¹ˆç»“æœ é¦–å…ˆæˆ‘ä»¬çŸ¥é“AIç³»ç»Ÿç°åœ¨å¹¿é˜”å‘å±•,å¯ä»¥åƒäººç±»ä¸€æ ·è§£å†³å¾ˆå¤šé€šç”¨é—®é¢˜,ä½†æ˜¯ç°åœ¨å‘å±•ä¸­çš„ai agentç³»ç»Ÿæ‰€åˆ¶ä½œçš„å¤§é‡åº”ç”¨ä½œç”¨äºä¸€äº›å¾ˆå°çš„ä»»åŠ¡,ç„¶ånvidiaåœ¨è¿™ç¯‡æ–‡çŒ®ä¸­æå‡ºäº†å°è¯­è¨€æ¨¡å‹(SLMs) æœ‰ç€è¶³å¤Ÿçš„èƒ½åŠ›,æ›´é€‚åˆ,è€Œä¸”ä¹Ÿæ›´å»‰ä»·,å¯¹äºå¾ˆå¤šagentç³»ç»Ÿ,ä¹Ÿåº”è¯¥ä½œä¸ºåæ¥ai agentçš„ä¸€ä¸ªä¸»è¦å‘å±•æ–¹å‘\nç„¶åé’ˆå¯¹ä¸å…¶æå‡ºçš„è¿™ä¸ªè®ºç‚¹,è¯¥è®ºæ–‡è¿›è¡Œäº†ä»¥ä¸‹å‡ ç‚¹è®¨è®º 1.å½“å‰å°è¯­è¨€æ¨¡å‹å¯ä»¥åšåˆ°çš„ä»»åŠ¡ 2.åœ¨æŸäº›é€šç”¨è¯­è¨€èƒ½åŠ›æ˜¯é‡è¦çš„éƒ¨åˆ† 3.è®¨è®ºäº†å°æ¨¡å‹ä½œä¸ºagentç³»ç»Ÿçš„æ½œåŠ›ç•Œé™\nç»“è®º,ä»‹ç»äº†ä¸ç®¡æ˜¯ä»èƒ½åŠ›è¿˜æ˜¯ç»æµä»·å€¼æ–¹é¢,ä»LLMsç§»åŠ¨åˆ°SLMsçš„ä¼˜åŠ¿\n","permalink":"http://localhost:1313/jeanblog/posts/%E9%98%85%E8%AF%BBnvidia%E5%B0%8F%E6%A8%A1%E5%9E%8B%E7%90%86%E8%AE%BA%E8%AE%BA%E6%96%87/","summary":"\u003ch1 id=\"è¿™ç¯‡è®ºæ–‡è§£å†³äº†ä»€ä¹ˆé—®é¢˜ç»™å‡ºäº†ä»€ä¹ˆç»“æœ\"\u003eè¿™ç¯‡è®ºæ–‡è§£å†³äº†ä»€ä¹ˆé—®é¢˜,ç»™å‡ºäº†ä»€ä¹ˆç»“æœ\u003c/h1\u003e\n\u003cp\u003eé¦–å…ˆæˆ‘ä»¬çŸ¥é“AIç³»ç»Ÿç°åœ¨å¹¿é˜”å‘å±•,å¯ä»¥åƒäººç±»ä¸€æ ·è§£å†³å¾ˆå¤šé€šç”¨é—®é¢˜,ä½†æ˜¯ç°åœ¨å‘å±•ä¸­çš„ai agentç³»ç»Ÿæ‰€åˆ¶ä½œçš„å¤§é‡åº”ç”¨ä½œç”¨äºä¸€äº›å¾ˆå°çš„ä»»åŠ¡,ç„¶ånvidiaåœ¨è¿™ç¯‡æ–‡çŒ®ä¸­æå‡ºäº†å°è¯­è¨€æ¨¡å‹(SLMs) æœ‰ç€è¶³å¤Ÿçš„èƒ½åŠ›,æ›´é€‚åˆ,è€Œä¸”ä¹Ÿæ›´å»‰ä»·,å¯¹äºå¾ˆå¤šagentç³»ç»Ÿ,ä¹Ÿåº”è¯¥ä½œä¸ºåæ¥ai agentçš„ä¸€ä¸ªä¸»è¦å‘å±•æ–¹å‘\u003c/p\u003e\n\u003cp\u003eç„¶åé’ˆå¯¹ä¸å…¶æå‡ºçš„è¿™ä¸ªè®ºç‚¹,è¯¥è®ºæ–‡è¿›è¡Œäº†ä»¥ä¸‹å‡ ç‚¹è®¨è®º\n1.å½“å‰å°è¯­è¨€æ¨¡å‹å¯ä»¥åšåˆ°çš„ä»»åŠ¡\n2.åœ¨æŸäº›é€šç”¨è¯­è¨€èƒ½åŠ›æ˜¯é‡è¦çš„éƒ¨åˆ†\n3.è®¨è®ºäº†å°æ¨¡å‹ä½œä¸ºagentç³»ç»Ÿçš„æ½œåŠ›ç•Œé™\u003c/p\u003e\n\u003cp\u003eç»“è®º,ä»‹ç»äº†ä¸ç®¡æ˜¯ä»èƒ½åŠ›è¿˜æ˜¯ç»æµä»·å€¼æ–¹é¢,ä»LLMsç§»åŠ¨åˆ°SLMsçš„ä¼˜åŠ¿\u003c/p\u003e","title":"é˜…è¯»nvidiaå°æ¨¡å‹ç†è®ºè®ºæ–‡"}]