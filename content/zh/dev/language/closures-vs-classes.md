---
title: "闭包和类的共同点：为什么它们都能“携带状态”"
date: 2026-01-24T15:42:47+08:00
draft: false
description: "对比闭包与类的共同点与差异，解释它们如何封装状态。"
tags: ["语言设计", "闭包", "面向对象", "函数式"]
categories: ["语言设计"]
keywords: ["闭包", "类", "状态封装", "函数式"]
---

## 副标题 / 摘要

闭包和类都能“携带状态”，只是表达方式不同。本文用简单示例对比二者的共性与差异。

## 目标读者

- 学习函数式与面向对象的开发者
- 想理解“状态封装”概念的人
- 需要在不同范式间切换的工程师

## 背景 / 动机

闭包常被认为是函数式特性，类是面向对象特性。  
实际上它们都解决“状态 + 行为绑定”的问题。

## 核心概念

- **闭包**：函数捕获外部变量形成状态
- **类/对象**：属性 + 方法封装状态
- **封装**：隐藏内部状态细节

## 实践指南 / 步骤

1. **用闭包实现一个计数器**
2. **用类实现同样功能**
3. **对比可读性与扩展性**
4. **选择更适合的表达方式**

## 可运行示例

```python
# 闭包实现

def make_counter():
    x = 0
    def inc():
        nonlocal x
        x += 1
        return x
    return inc

# 类实现
class Counter:
    def __init__(self):
        self.x = 0

    def inc(self):
        self.x += 1
        return self.x


if __name__ == "__main__":
    c1 = make_counter()
    print(c1())
    c2 = Counter()
    print(c2.inc())
```

## 解释与原理

闭包通过捕获变量保存状态，类通过属性保存状态。  
二者都把“状态 + 行为”绑定在一起。

## 常见问题与注意事项

1. **闭包一定更简洁吗？**  
   小规模逻辑更简洁，大规模更难维护。

2. **类一定更面向对象吗？**  
   是的，但样板代码更多。

3. **如何选择？**  
   取决于规模与可扩展性需求。

## 最佳实践与建议

- 小规模状态用闭包
- 复杂状态用类与方法组织
- 保持接口清晰

## 小结 / 结论

闭包与类都能封装状态与行为。  
它们只是范式不同的表达方式。

## 参考与延伸阅读

- JavaScript Closures
- Object-Oriented Design Basics

## 元信息

- **阅读时长**：6~8 分钟  
- **标签**：闭包、类  
- **SEO 关键词**：闭包 vs 类, 状态封装  
- **元描述**：解释闭包与类的共同点与差异。

## 行动号召（CTA）

用闭包和类分别实现一个小组件，比较可读性与可维护性。
